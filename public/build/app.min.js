require=function a(b,c,d){function e(f,h){var i,j,k;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw j=Error("Cannot find module '"+f+"'"),j.code="MODULE_NOT_FOUND",j}k=c[f]={exports:{}},b[f][0].call(k.exports,function(a){var c=b[f][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b,c){(function(a,c){!function(){function d(){}function e(a){return a}function f(a){return!!a}function g(a){return!a}function h(a){return function(){if(null===a)throw Error("Callback was already called.");a.apply(this,arguments),a=null}}function i(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function j(a){return L(a)||"number"==typeof a.length&&a.length>=0&&a.length%1===0}function k(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function l(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function m(a){return l(Array(a),function(a,b){return b})}function n(a,b,c){return k(a,function(a,d,e){c=b(c,a,d,e)}),c}function o(a,b){k(N(a),function(c){b(a[c],c)})}function p(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function q(a){var b,c,d=-1;return j(a)?(b=a.length,function(){return d++,b>d?d:null}):(c=N(a),b=c.length,function(){return d++,b>d?c[d]:null})}function r(a,b){return b=null==b?a.length-1:+b,function(){var c,d=Math.max(arguments.length-b,0),e=Array(d);for(c=0;d>c;c++)e[c]=arguments[c+b];switch(b){case 0:return a.call(this,e);case 1:return a.call(this,arguments[0],e)}}}function s(a){return function(b,c,d){return a(b,d)}}function t(a){return function(b,c,e){var f,g,j,k;return e=i(e||d),b=b||[],f=q(b),0>=a?e(null):(g=!1,j=0,k=!1,void function d(){if(g&&0>=j)return e(null);for(;a>j&&!k;){var i=f();if(null===i)return g=!0,void(0>=j&&e(null));j+=1,c(b[i],i,h(function(a){j-=1,a?(e(a),k=!0):d()}))}}())}}function u(a){return function(b,c,d){return a(Q.eachOf,b,c,d)}}function v(a){return function(b,c,d,e){return a(t(c),b,d,e)}}function w(a){return function(b,c,d){return a(Q.eachOfSeries,b,c,d)}}function x(a,b,c,e){e=i(e||d),b=b||[];var f=j(b)?[]:{};a(b,function(a,b,d){c(a,function(a,c){f[b]=c,d(a)})},function(a){e(a,f)})}function y(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&&e.push({index:b,value:a}),d()})},function(){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function z(a,b,c,d){y(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function A(a,b,c){return function(d,e,f,g){function h(){g&&g(c(!1,void 0))}function i(a,d,e){return g?void f(a,function(d){g&&b(d)&&(g(c(!0,a)),g=f=!1),e()}):e()}arguments.length>3?a(d,e,i,h):(g=f,f=e,a(d,i,h))}}function B(a,b){return b}function C(a,b,c){c=c||d;var e=j(b)?[]:{};a(b,function(a,b,c){a(r(function(a,d){d.length<=1&&(d=d[0]),e[b]=d,c(a)}))},function(a){c(a,e)})}function D(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function E(a,b,c){function e(a,b,c,e){if(null!=e&&"function"!=typeof e)throw Error("task callback must be a function");return a.started=!0,L(b)||(b=[b]),0===b.length&&a.idle()?Q.setImmediate(function(){a.drain()}):(k(b,function(b){var f={data:b,callback:e||d};c?a.tasks.unshift(f):a.tasks.push(f),a.tasks.length===a.concurrency&&a.saturated()}),void Q.setImmediate(a.process))}function f(a,b){return function(){var c,d;g-=1,c=!1,d=arguments,k(b,function(a){k(i,function(b,d){b!==a||c||(i.splice(d,1),c=!0)}),a.callback.apply(a,d)}),a.tasks.length+g===0&&a.drain(),a.process()}}var g,i,j;if(null==b)b=1;else if(0===b)throw Error("Concurrency must not be zero");return g=0,i=[],j={tasks:[],concurrency:b,payload:c,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(a,b){e(j,a,!1,b)},kill:function(){j.drain=d,j.tasks=[]},unshift:function(a,b){e(j,a,!0,b)},process:function(){for(var b,c,d;!j.paused&&g<j.concurrency&&j.tasks.length;)b=j.payload?j.tasks.splice(0,j.payload):j.tasks.splice(0,j.tasks.length),c=l(b,function(a){return a.data}),0===j.tasks.length&&j.empty(),g+=1,i.push(b[0]),d=h(f(j,b)),a(c,d)},length:function(){return j.tasks.length},running:function(){return g},workersList:function(){return i},idle:function(){return j.tasks.length+g===0},pause:function(){j.paused=!0},resume:function(){var a,b;if(j.paused!==!1)for(j.paused=!1,a=Math.min(j.concurrency,j.tasks.length),b=1;a>=b;b++)Q.setImmediate(j.process)}}}function F(a){return r(function(b,c){b.apply(null,c.concat([r(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&k(c,function(b){console[a](b)}))})]))})}function G(a){return function(b,c,d){a(m(b),c,d)}}function H(a){return r(function(b,c){var d=r(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function I(a){return r(function(b){var c,d=b.pop();b.push(function(){var a=arguments;c?Q.setImmediate(function(){d.apply(null,a)}):d.apply(null,a)}),c=!0,a.apply(this,b),c=!1})}var J,K,L,M,N,O,P,Q={},R="object"==typeof self&&self.self===self&&self||"object"==typeof c&&c.global===c&&c||this;null!=R&&(J=R.async),Q.noConflict=function(){return R.async=J,Q},K=Object.prototype.toString,L=Array.isArray||function(a){return"[object Array]"===K.call(a)},M=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},N=Object.keys||function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},O="function"==typeof setImmediate&&setImmediate,P=O?function(a){O(a)}:function(a){setTimeout(a,0)},"object"==typeof a&&"function"==typeof a.nextTick?Q.nextTick=a.nextTick:Q.nextTick=P,Q.setImmediate=O?P:Q.nextTick,Q.forEach=Q.each=function(a,b,c){return Q.eachOf(a,s(b),c)},Q.forEachSeries=Q.eachSeries=function(a,b,c){return Q.eachOfSeries(a,s(b),c)},Q.forEachLimit=Q.eachLimit=function(a,b,c,d){return t(b)(a,s(c),d)},Q.forEachOf=Q.eachOf=function(a,b,c){function e(a){j--,a?c(a):null===g&&0>=j&&c(null)}var f,g,j;for(c=i(c||d),a=a||[],f=q(a),j=0;null!=(g=f());)j+=1,b(a[g],g,h(e));0===j&&c(null)},Q.forEachOfSeries=Q.eachOfSeries=function(a,b,c){function e(){var d=!0;return null===g?c(null):(b(a[g],g,h(function(a){if(a)c(a);else{if(g=f(),null===g)return c(null);d?Q.setImmediate(e):e()}})),void(d=!1))}var f,g;c=i(c||d),a=a||[],f=q(a),g=f(),e()},Q.forEachOfLimit=Q.eachOfLimit=function(a,b,c,d){t(b)(a,c,d)},Q.map=u(x),Q.mapSeries=w(x),Q.mapLimit=v(x),Q.inject=Q.foldl=Q.reduce=function(a,b,c,d){Q.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})},Q.foldr=Q.reduceRight=function(a,b,c,d){var f=l(a,e).reverse();Q.reduce(f,b,c,d)},Q.transform=function(a,b,c,d){3===arguments.length&&(d=c,c=b,b=L(a)?[]:{}),Q.eachOf(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})},Q.select=Q.filter=u(y),Q.selectLimit=Q.filterLimit=v(y),Q.selectSeries=Q.filterSeries=w(y),Q.reject=u(z),Q.rejectLimit=v(z),Q.rejectSeries=w(z),Q.any=Q.some=A(Q.eachOf,f,e),Q.someLimit=A(Q.eachOfLimit,f,e),Q.all=Q.every=A(Q.eachOf,g,g),Q.everyLimit=A(Q.eachOfLimit,g,g),Q.detect=A(Q.eachOf,e,B),Q.detectSeries=A(Q.eachOfSeries,e,B),Q.detectLimit=A(Q.eachOfLimit,e,B),Q.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}Q.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){return a?c(a):void c(null,l(b.sort(d),function(a){return a.value}))})},Q.auto=function(a,b,c){function e(a){s.unshift(a)}function f(a){var b=p(s,a);b>=0&&s.splice(b,1)}function g(){j--,k(s.slice(0),function(a){a()})}var h,j,l,m,q,s;return"function"==typeof arguments[1]&&(c=b,b=null),c=i(c||d),h=N(a),(j=h.length)?(b||(b=j),l={},m=0,q=!1,s=[],e(function(){j||c(null,l)}),void k(h,function(d){function h(){return b>m&&n(s,function(a,b){return a&&l.hasOwnProperty(b)},!0)&&!l.hasOwnProperty(d)}function i(){h()&&(m++,f(i),j[j.length-1](k,l))}var j,k,s,t,u;if(!q){for(j=L(a[d])?a[d]:[a[d]],k=r(function(a,b){if(m--,b.length<=1&&(b=b[0]),a){var e={};o(l,function(a,b){e[b]=a}),e[d]=b,q=!0,c(a,e)}else l[d]=b,Q.setImmediate(g)}),s=j.slice(0,j.length-1),t=s.length;t--;){if(!(u=a[s[t]]))throw Error("Has nonexistent dependency in "+s.join(", "));if(L(u)&&p(u,d)>=0)throw Error("Has cyclic dependencies")}h()?(m++,j[j.length-1](k,l)):e(i)}})):c(null)},Q.retry=function(a,b,c){function d(a,b){if("number"==typeof b)a.times=parseInt(b,10)||f;else{if("object"!=typeof b)throw Error("Unsupported argument type for 'times': "+typeof b);a.times=parseInt(b.times,10)||f,a.interval=parseInt(b.interval,10)||g}}function e(a,b){function c(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}function d(a){return function(b){setTimeout(function(){b(null)},a)}}for(;i.times;){var e=!(i.times-=1);h.push(c(i.task,e)),!e&&i.interval>0&&h.push(d(i.interval))}Q.series(h,function(b,c){c=c[c.length-1],(a||i.callback)(c.err,c.result)})}var f=5,g=0,h=[],i={times:f,interval:g},j=arguments.length;if(1>j||j>3)throw Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=j&&"function"==typeof a&&(c=b,b=a),"function"!=typeof a&&d(i,a),i.callback=c,i.task=b,i.callback?e():e},Q.waterfall=function(a,b){function c(a){return r(function(d,e){if(d)b.apply(null,[d].concat(e));else{var f=a.next();f?e.push(c(f)):e.push(b),I(a).apply(null,e)}})}if(b=i(b||d),!L(a)){var e=Error("First argument to waterfall must be an array of functions");return b(e)}return a.length?void c(Q.iterator(a))():b()},Q.parallel=function(a,b){C(Q.eachOf,a,b)},Q.parallelLimit=function(a,b,c){C(t(b),a,c)},Q.series=function(a,b){C(Q.eachOfSeries,a,b)},Q.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},Q.apply=r(function(a,b){return r(function(c){return a.apply(null,b.concat(c))})}),Q.concat=u(D),Q.concatSeries=w(D),Q.whilst=function(a,b,c){if(c=c||d,a()){var e=r(function(d,f){d?c(d):a.apply(this,f)?b(e):c.apply(null,[null].concat(f))});b(e)}else c(null)},Q.doWhilst=function(a,b,c){var d=0;return Q.whilst(function(){return++d<=1||b.apply(this,arguments)},a,c)},Q.until=function(a,b,c){return Q.whilst(function(){return!a.apply(this,arguments)},b,c)},Q.doUntil=function(a,b,c){return Q.doWhilst(a,function(){return!b.apply(this,arguments)},c)},Q.during=function(a,b,c){var e,f;c=c||d,e=r(function(b,d){b?c(b):(d.push(f),a.apply(this,d))}),f=function(a,d){a?c(a):d?b(e):c(null)},a(f)},Q.doDuring=function(a,b,c){var d=0;Q.during(function(a){d++<1?a(null,!0):b.apply(this,arguments)},a,c)},Q.queue=function(a,b){var c=E(function(b,c){a(b[0],c)},b,1);return c},Q.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function e(a,b,c){for(var d,e=-1,f=a.length-1;f>e;)d=e+(f-e+1>>>1),c(b,a[d])>=0?e=d:f=d-1;return e}function f(a,b,f,g){if(null!=g&&"function"!=typeof g)throw Error("task callback must be a function");return a.started=!0,L(b)||(b=[b]),0===b.length?Q.setImmediate(function(){a.drain()}):void k(b,function(b){var h={data:b,priority:f,callback:"function"==typeof g?g:d};a.tasks.splice(e(a.tasks,h,c)+1,0,h),a.tasks.length===a.concurrency&&a.saturated(),Q.setImmediate(a.process)})}var g=Q.queue(a,b);return g.push=function(a,b,c){f(g,a,b,c)},delete g.unshift,g},Q.cargo=function(a,b){return E(a,1,b)},Q.log=F("log"),Q.dir=F("dir"),Q.memoize=function(a,b){var c,d={},f={},g=Object.prototype.hasOwnProperty;return b=b||e,c=r(function(c){var e=c.pop(),h=b.apply(null,c);g.call(d,h)?Q.setImmediate(function(){e.apply(null,d[h])}):g.call(f,h)?f[h].push(e):(f[h]=[e],a.apply(null,c.concat([r(function(a){var b,c,e;for(d[h]=a,b=f[h],delete f[h],c=0,e=b.length;e>c;c++)b[c].apply(null,a)})])))}),c.memo=d,c.unmemoized=a,c},Q.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},Q.times=G(Q.map),Q.timesSeries=G(Q.mapSeries),Q.timesLimit=function(a,b,c,d){return Q.mapLimit(m(a),b,c,d)},Q.seq=function(){var a=arguments;return r(function(b){var c=this,e=b[b.length-1];"function"==typeof e?b.pop():e=d,Q.reduce(a,b,function(a,b,d){b.apply(c,a.concat([r(function(a,b){d(a,b)})]))},function(a,b){e.apply(c,[a].concat(b))})})},Q.compose=function(){return Q.seq.apply(null,Array.prototype.reverse.call(arguments))},Q.applyEach=H(Q.eachOf),Q.applyEachSeries=H(Q.eachOfSeries),Q.forever=function(a,b){function c(a){return a?e(a):void f(c)}var e=h(b||d),f=I(a);c()},Q.ensureAsync=I,Q.constant=r(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}}),Q.wrapSync=Q.asyncify=function(a){return r(function(b){var c,d=b.pop();try{c=a.apply(this,b)}catch(e){return d(e)}M(c)&&"function"==typeof c.then?c.then(function(a){d(null,a)})["catch"](function(a){d(a.message?a:Error(a))}):d(null,c)})},"object"==typeof b&&b.exports?b.exports=Q:"function"==typeof define&&define.amd?define([],function(){return Q}):R.async=Q}()}).call(this,a(5),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5}],2:[function(a,b,c){"use strict";function d(a,b,c){var d,f,h,i,j,k,m,n,o,p,q,r;if(c=c||2,d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[],!h)return i;if(d&&(h=l(a,b,h,c)),a.length>80*c){for(j=m=a[0],k=n=a[1],r=c;f>r;r+=c)o=a[r],p=a[r+1],j>o&&(j=o),k>p&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g,h,i=0;for(f=b,g=c-d;c>f;f+=d)i+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;if(e===i>0)for(f=b;c>f;f+=d)h=C(f,a[f],a[f+1],h);else for(f=c-d;f>=b;f-=d)h=C(f,a[f],a[f+1],h);return h}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b,c=a.prev,d=a,e=a.next;if(v(c,d,e)>=0)return!1;for(b=a.next.next;b!==a.prev;){if(t(c.x,c.y,d.x,d.y,e.x,e.y,b.x,b.y)&&v(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function i(a,b,c,d){var e,f,g,h,i,j,k,l=a.prev,m=a,n=a.next;if(v(l,m,n)>=0)return!1;for(e=l.x<m.x?l.x<n.x?l.x:n.x:m.x<n.x?m.x:n.x,f=l.y<m.y?l.y<n.y?l.y:n.y:m.y<n.y?m.y:n.y,g=l.x>m.x?l.x>n.x?l.x:n.x:m.x>n.x?m.x:n.x,h=l.y>m.y?l.y>n.y?l.y:n.y:m.y>n.y?m.y:n.y,i=r(e,f,b,c,d),j=r(g,h,b,c,d),k=a.nextZ;k&&k.z<=j;){if(k!==a.prev&&k!==a.next&&t(l.x,l.y,m.x,m.y,n.x,n.y,k.x,k.y)&&v(k.prev,k,k.next)>=0)return!1;k=k.nextZ}for(k=a.prevZ;k&&k.z>=i;){if(k!==a.prev&&k!==a.next&&t(l.x,l.y,m.x,m.y,n.x,n.y,k.x,k.y)&&v(k.prev,k,k.next)>=0)return!1;k=k.prevZ}return!0}function j(a,b,c){var d,e,f=a;do d=f.prev,e=f.next.next,x(d,f,f.next,e)&&z(d,e)&&z(e,d)&&(b.push(d.i/c),b.push(f.i/c),b.push(e.i/c),D(f),D(f.next),f=a=e),f=f.next;while(f!==a);return f}function k(a,b,c,d,e,h){var i,j,k=a;do{for(i=k.next.next;i!==k.prev;){if(k.i!==i.i&&u(k,i))return j=B(k,i),k=f(k,k.next),j=f(j,j.next),g(k,b,c,d,e,h),void g(j,b,c,d,e,h);i=i.next}k=k.next}while(k!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;h>g;g++)i=b[g]*d,j=h-1>g?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d,e,f,g,h=b,i=a.x,j=a.y,k=-(1/0);do j<=h.y&&j>=h.next.y&&(d=h.x+(j-h.y)*(h.next.x-h.x)/(h.next.y-h.y),i>=d&&d>k&&(k=d,c=h.x<h.next.x?h:h.next)),h=h.next;while(h!==b);if(!c)return null;if(a.x===c.x)return c.prev;for(e=c,f=1/0,h=c.next;h!==e;)i>=h.x&&h.x>=c.x&&t(j<c.y?i:k,j,c.x,c.y,j<c.y?k:i,j,h.x,h.y)&&(g=Math.abs(j-h.y)/(i-h.x),(f>g||g===f&&h.x>c.x)&&z(h,a)&&(c=h,f=g)),h=h.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;j>b&&(h++,d=d.nextZ,d);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return w(a,b)||a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}b.exports=d},{}],3:[function(a,b,c){"use strict";function d(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function e(){}var f="function"!=typeof Object.create?"~":!1;e.prototype._events=void 0,e.prototype.listeners=function(a,b){var c,d,e,g=f?f+a:a,h=this._events&&this._events[g];if(b)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(c=0,d=h.length,e=Array(d);d>c;c++)e[c]=h[c].fn;return e},e.prototype.emit=function(a,b,c,d,e,g){var h,i,j,k,l,m,n=f?f+a:a;if(!this._events||!this._events[n])return!1;if(h=this._events[n],i=arguments.length,"function"==typeof h.fn){switch(h.once&&this.removeListener(a,h.fn,void 0,!0),i){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,b),!0;case 3:return h.fn.call(h.context,b,c),!0;case 4:return h.fn.call(h.context,b,c,d),!0;case 5:return h.fn.call(h.context,b,c,d,e),!0;case 6:return h.fn.call(h.context,b,c,d,e,g),!0}for(k=1,j=Array(i-1);i>k;k++)j[k-1]=arguments[k];h.fn.apply(h.context,j)}else for(l=h.length,k=0;l>k;k++)switch(h[k].once&&this.removeListener(a,h[k].fn,void 0,!0),i){case 1:h[k].fn.call(h[k].context);break;case 2:h[k].fn.call(h[k].context,b);break;case 3:h[k].fn.call(h[k].context,b,c);break;default:if(!j)for(m=1,j=Array(i-1);i>m;m++)j[m-1]=arguments[m];h[k].fn.apply(h[k].context,j)}return!0},e.prototype.on=function(a,b,c){var e=new d(b,c||this),g=f?f+a:a;return this._events||(this._events=f?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):this._events[g]=e,this},e.prototype.once=function(a,b,c){var e=new d(b,c||this,!0),g=f?f+a:a;return this._events||(this._events=f?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],e]:this._events[g].push(e):this._events[g]=e,this},e.prototype.removeListener=function(a,b,c,d){var e,g,h,i,j=f?f+a:a;if(!this._events||!this._events[j])return this;if(e=this._events[j],g=[],b)if(e.fn)(e.fn!==b||d&&!e.once||c&&e.context!==c)&&g.push(e);else for(h=0,i=e.length;i>h;h++)(e[h].fn!==b||d&&!e[h].once||c&&e[h].context!==c)&&g.push(e[h]);return g.length?this._events[j]=1===g.length?g[0]:g:delete this._events[j],this},e.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[f?f+a:a]:this._events=f?{}:Object.create(null),this):this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=f,void 0!==b&&(b.exports=e)},{}],4:[function(a,b,c){},{}],5:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){var a,b;if(!k){for(a=setTimeout(d),k=!0,b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b,c=Array(arguments.length-1);if(arguments.length>1)for(b=1;b<arguments.length;b++)c[b-1]=arguments[b];j.push(new f(a,c)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;b.exports=Object.assign||function(a,b){var c,g,h,i,j,k=d(a);for(h=1;h<arguments.length;h++){c=Object(arguments[h]);for(i in c)e.call(c,i)&&(k[i]=c[i]);if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(c),j=0;j<g.length;j++)f.call(c,g[j])&&(k[g[j]]=c[g[j]])}return k}},{}],7:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a,b,d,e=arguments,f=this.useColors;return e[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+e[0]+(f?"%c ":" ")+"+"+c.humanize(this.diff),f?(a="color: "+this.color,e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1)),b=0,d=0,e[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(b++,"%c"===a&&(d=b))}),e.splice(d,0,a),e):e}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}function h(){var a;try{a=c.storage.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a(8),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{8:8}],8:[function(a,b,c){function d(){return c.colors[j++%c.colors.length]}function e(a){function b(){}function e(){var a,b,f,g=e,h=+new Date,i=h-(k||h);g.diff=i,g.prev=k,g.curr=h,k=h,null==g.useColors&&(g.useColors=c.useColors()),null==g.color&&g.useColors&&(g.color=d()),a=Array.prototype.slice.call(arguments),a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a)),b=0,a[0]=a[0].replace(/%([a-z%])/g,function(d,e){var f,h;return"%%"===d?d:(b++,f=c.formatters[e],"function"==typeof f&&(h=a[b],d=f.call(g,h),a.splice(b,1),b--),d)}),"function"==typeof c.formatArgs&&(a=c.formatArgs.apply(g,a)),f=e.log||c.log||console.log.bind(console),f.apply(g,a)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){var b,d,e;for(c.save(a),b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(RegExp("^"+a.substr(1)+"$")):c.names.push(RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}var j,k;c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a(9),c.names=[],c.skips=[],c.formatters={},j=0},{9:9}],9:[function(a,b,c){function d(a){var b,c,d;if(a=""+a,!(a.length>1e4)&&(b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a)))switch(c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],10:[function(a,b,c){(function(c){function d(a){function b(a){var d,f;if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON());for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a(11);b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11}],11:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],12:[function(a,b,c){function d(a,b){return this instanceof d?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new d(a,b)}var e=a(19),f=a(14),g=a(18),h=a(48),i=a(13),j=a(17),k=a(7)("socket.io-client:manager"),l=a(44),m=a(16),n=Object.prototype.hasOwnProperty;b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)n.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)n.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a){var b,c,d,f,g,h;return k("readyState %s",this.readyState),~this.readyState.indexOf("open")?this:(k("opening %s",this.uri),this.engine=e(this.uri,this.opts),b=this.engine,c=this,this.readyState="opening",this.skipReconnect=!1,d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()}),!1!==this._timeout&&(g=this._timeout,k("connect attempt will timeout after %d",g),h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g),this.subs.push({destroy:function(){clearTimeout(h)}})),this.subs.push(d),this.subs.push(f),this)},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(a,"ping",j(this,"onping"))),this.subs.push(i(a,"pong",j(this,"onpong"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){function b(){~l(c.connecting,d)||c.connecting.push(d)}var c,d=this.nsps[a];return d||(d=new f(this,a),this.nsps[a]=d,c=this,d.on("connecting",b),d.on("connect",function(){d.id=c.engine.id}),this.autoConnect&&b()),d},d.prototype.destroy=function(a){var b=l(this.connecting,a);~b&&this.connecting.splice(b,1),this.connecting.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){k("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){k("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){var a,b,c;return this.reconnecting||this.skipReconnect?this:(a=this,void(this.backoff.attempts>=this._reconnectionAttempts?(k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(b=this.backoff.duration(),k("will wait %dms before reconnect attempt",b),this.reconnecting=!0,c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){
b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b),this.subs.push({destroy:function(){clearTimeout(c)}}))))},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{13:13,14:14,16:16,17:17,18:18,19:19,44:44,48:48,7:7}],13:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],14:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var e,f,g=a(48),h=a(18),i=a(46),j=a(13),k=a(17),l=a(7)("socket.io-client:socket"),m=a(10);b.exports=c=d,e={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=h.prototype.emit,h(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[j(a,"open",k(this,"onopen")),j(a,"packet",k(this,"onpacket")),j(a,"close",k(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var a=i(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){var b,c,d;return e.hasOwnProperty(a)?(f.apply(this,arguments),this):(b=i(arguments),c=g.EVENT,m(b)&&(c=g.BINARY_EVENT),d={type:c,data:b},d.options={},d.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof b[b.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),delete this.flags,this)},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:g.CONNECT})},d.prototype.onclose=function(a){l("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case g.CONNECT:this.onconnect();break;case g.EVENT:this.onevent(a);break;case g.BINARY_EVENT:this.onevent(a);break;case g.ACK:this.onack(a);break;case g.BINARY_ACK:this.onack(a);break;case g.DISCONNECT:this.ondisconnect();break;case g.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];l("emitting event %j",b),null!=a.id&&(l("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?f.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){var d,e;c||(c=!0,d=i(arguments),l("sending ack %j",d),e=m(d)?g.BINARY_ACK:g.ACK,b.packet({type:e,id:a,data:d}))}},d.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(l("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):l("bad ack %s",a.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)f.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(a){return this.flags=this.flags||{},this.flags.compress=a,this}},{10:10,13:13,17:17,18:18,46:46,48:48,7:7}],15:[function(a,b,c){(function(c){function d(a,b){var d,g,h=a;return b=b||c.location,null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a=void 0!==b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),h=e(a)),h.port||(/^(http|ws)$/.test(h.protocol)?h.port="80":/^(http|ws)s$/.test(h.protocol)&&(h.port="443")),h.path=h.path||"/",d=-1!==h.host.indexOf(":"),g=d?"["+h.host+"]":h.host,h.id=h.protocol+"://"+g+":"+h.port,h.href=h.protocol+"://"+g+(b&&b.port==h.port?"":":"+h.port),h}var e=a(45),f=a(7)("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45,7:7}],16:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a,b,c=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(a=Math.random(),b=Math.floor(a*this.jitter*c),c=0==(1&Math.floor(10*a))?c-b:c+b),0|Math.min(c,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],17:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],18:[function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){var c,d,e;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(c=this._callbacks["$"+a],!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){var b,c,d,e;if(this._callbacks=this._callbacks||{},b=[].slice.call(arguments,1),c=this._callbacks["$"+a],c)for(c=c.slice(0),d=0,e=c.length;e>d;++d)c[d].apply(this,b);return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],19:[function(a,b,c){b.exports=a(20)},{20:20}],20:[function(a,b,c){b.exports=a(21),b.exports.parser=a(31)},{21:21,31:31}],21:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);b=b||{},a&&"object"==typeof a&&(b=a,a=null),a?(a=k(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=k(b.host).host),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.perMessageDeflate=!1!==b.perMessageDeflate?b.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=void 0===b.rejectUnauthorized?null:b.rejectUnauthorized;var e="object"==typeof c&&c;e.global===e&&b.extraHeaders&&Object.keys(b.extraHeaders).length>0&&(this.extraHeaders=b.extraHeaders),this.open()}function e(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var f=a(23),g=a(29),h=a(7)("engine.io-client:socket"),i=a(44),j=a(31),k=a(45),l=a(41),m=a(42);b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a(22),d.transports=a(23),d.parser=a(31),d.prototype.createTransport=function(a){var b,c;return h('creating transport "%s"',a),b=e(this.query),b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id),c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},d.prototype.open=function(){var a,b;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length)return b=this,void setTimeout(function(){b.emit("error","No transports available")},0);a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var b=Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b,c){return this.sendPacket("message",a,b,c),this},d.prototype.sendPacket=function(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"!=this.readyState&&"closed"!=this.readyState){c=c||{},c.compress=!1!==c.compress;var e={type:a,data:b,options:c};this.emit("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b),c.writeBuffer=[],c.prevBufferLen=0}},d.prototype.filterUpgrades=function(a){var b,c,d=[];for(b=0,c=a.length;c>b;b++)~i(this.transports,a[b])&&d.push(a[b]);return d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{22:22,23:23,29:29,31:31,41:41,42:42,44:44,45:45,7:7}],22:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders}var e=a(31),f=a(29);b.exports=d,f(d.prototype),d.prototype.onError=function(a,b){var c=Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{29:29,31:31}],23:[function(a,b,c){(function(b){function d(a){var c,d,h,i=!1,j=!1,k=!1!==a.jsonp;if(b.location&&(d="https:"==location.protocol,h=location.port,h||(h=d?443:80),i=a.hostname!=location.hostname||h!=a.port,j=a.secure!=d),a.xdomain=i,a.xscheme=j,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!k)throw Error("JSONP disabled");return new g(a)}var e=a(28),f=a(25),g=a(24),h=a(27);c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{24:24,25:25,27:27,28:28}],24:[function(a,b,c){(function(c){function d(){}function e(a){j.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f,g,h,i,j=a(26),k=a(30);b.exports=e,f=/\n/g,g=/\\n/g,i=0,k(e,j),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),j.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a,b,c=this,d=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),d.async=!0,d.src=this.uri(),d.onerror=function(a){c.onError("jsonp poll error",a)},a=document.getElementsByTagName("script")[0],a?a.parentNode.insertBefore(d,a):(document.head||document.body).appendChild(d),this.script=d,b="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent),b&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(k.iframe)try{k.form.removeChild(k.iframe)}catch(a){k.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+k.iframeId+'">';j=document.createElement(b)}catch(a){j=document.createElement("iframe"),j.name=k.iframeId,j.src="javascript:0"}j.id=k.iframeId,k.form.appendChild(j),k.iframe=j}var e,h,i,j,k=this;this.form||(e=document.createElement("form"),h=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=i,e.method="POST",e.setAttribute("accept-charset","utf-8"),h.name="d",e.appendChild(h),document.body.appendChild(e),this.form=e,this.area=h),this.form.action=this.uri(),d(),a=a.replace(g,"\\\n"),this.area.value=a.replace(f,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==k.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{26:26,30:30}],25:[function(a,b,c){(function(c){function d(){}function e(a){var b,d;i.call(this,a),c.location?(b="https:"==location.protocol,d=location.port,d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b):this.extraHeaders=a.extraHeaders}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a(28),i=a(26),j=a(29),k=a(30),l=a(7)("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.extraHeaders=this.extraHeaders,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){var a,b;l("xhr poll"),a=this.request(),b=this,a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a,b,d,e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,a=this.xhr=new h(e),b=this;try{l("xhr open %s: %s",this.method,this.uri),a.open(this.method,this.uri,this.async);try{if(this.extraHeaders){a.setDisableHeaderCheck(!0);for(d in this.extraHeaders)this.extraHeaders.hasOwnProperty(d)&&a.setRequestHeader(d,this.extraHeaders[d])}}catch(g){}if(this.supportsBinary&&(a.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?a.setRequestHeader("Content-type","application/octet-stream"):a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}"withCredentials"in a&&(a.withCredentials=!0),this.hasXDR()?(a.onload=function(){b.onLoad()},a.onerror=function(){b.onError(a.responseText)}):a.onreadystatechange=function(){4==a.readyState&&(200==a.status||1223==a.status?b.onLoad():setTimeout(function(){b.onError(a.status)},0))},l("xhr data %s",this.data),a.send(this.data)}catch(g){return void setTimeout(function(){b.onError(g)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a,b,c,d,e,f;try{try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(g){}if("application/octet-stream"===b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(g){for(c=new Uint8Array(this.xhr.response),d=[],e=0,f=c.length;f>e;e++)d.push(c[e]);a=String.fromCharCode.apply(null,d)}else a=this.xhr.responseText}catch(g){this.onError(g)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return void 0!==c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{26:26,28:28,29:29,30:30,7:7}],26:[function(a,b,c){function d(a){var b=a&&a.forceBase64;(!e||b)&&(this.supportsBinary=!1),f.call(this,a)}var e,f=a(22),g=a(42),h=a(31),i=a(30),j=a(43),k=a(7)("engine.io-client:polling");b.exports=d,e=function(){var b=a(28),c=new b({xdomain:!1});return null!=c.responseType}(),i(d,f),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){k("paused"),d.readyState="paused",a()}var c,d=this;this.readyState="pausing",this.polling||!this.writable?(c=0,this.polling&&(k("we are currently polling - waiting to pause"),c++,this.once("pollComplete",function(){k("pre-pause polling complete"),--c||b()})),this.writable||(k("we are currently writing - waiting to pause"),c++,this.once("drain",function(){k("pre-pause writing complete"),--c||b()}))):b()},d.prototype.poll=function(){k("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b,c=this;k("polling got data %s",a),b=function(a,b,d){return"opening"==c.readyState&&c.onOpen(),"close"==a.type?(c.onClose(),!1):void c.onPacket(a)},h.decodePayload(a,this.socket.binaryType,b),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():k('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){k("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(k("transport open - closing"),a()):(k("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b,c=this;this.writable=!1,b=function(){c.writable=!0,c.emit("drain")},c=this,h.encodePayload(a,this.supportsBinary,function(a){c.doWrite(a,b)})},d.prototype.uri=function(){var a,b=this.query||{},c=this.secure?"https":"http",d="";return!1!==this.timestampRequests&&(b[this.timestampParam]=j()),this.supportsBinary||b.sid||(b.b64=1),b=g.encode(b),this.port&&("https"==c&&443!=this.port||"http"==c&&80!=this.port)&&(d=":"+this.port),b.length&&(b="?"+b),a=-1!==this.hostname.indexOf(":"),c+"://"+(a?"["+this.hostname+"]":this.hostname)+d+this.path+b}},{22:22,28:28,30:30,31:31,42:42,43:43,7:7}],27:[function(a,b,c){(function(c){function d(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,e.call(this,a)}var e=a(22),f=a(31),g=a(42),h=a(30),i=a(43),j=a(7)("engine.io-client:websocket"),k=c.WebSocket||c.MozWebSocket,l=k;if(!l&&"undefined"==typeof window)try{l=a(4)}catch(m){}b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){var a,b,c,d;this.check()&&(a=this,b=this.uri(),c=void 0,d={agent:this.agent,perMessageDeflate:this.perMessageDeflate},d.pfx=this.pfx,d.key=this.key,d.passphrase=this.passphrase,d.cert=this.cert,d.ca=this.ca,d.ciphers=this.ciphers,d.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(d.headers=this.extraHeaders),this.ws=k?new l(b):new l(b,c,d),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners())},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){h.emit("flush"),setTimeout(function(){h.writable=!0,h.emit("drain")},0)}var d,e,g,h=this;for(this.writable=!1,d=a.length,e=0,g=d;g>e;e++)!function(a){f.encodePacket(a,h.supportsBinary,function(e){var f,g;k||(f={},a.options&&(f.compress=a.options.compress),h.perMessageDeflate&&(g="string"==typeof e?c.Buffer.byteLength(e):e.length,g<h.perMessageDeflate.threshold&&(f.compress=!1)));try{k?h.ws.send(e):h.ws.send(e,f)}catch(i){j("websocket closed before onclose event")}--d||b()})}(a[e])},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var a,b=this.query||{},c=this.secure?"wss":"ws",d="";return this.port&&("wss"==c&&443!=this.port||"ws"==c&&80!=this.port)&&(d=":"+this.port),this.timestampRequests&&(b[this.timestampParam]=i()),this.supportsBinary||(b.b64=1),b=g.encode(b),b.length&&(b="?"+b),a=-1!==this.hostname.indexOf(":"),c+"://"+(a?"["+this.hostname+"]":this.hostname)+d+this.path+b},d.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===d.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{22:22,30:30,31:31,4:4,42:42,43:43,7:7}],28:[function(a,b,c){var d=a(40);b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{40:40}],29:[function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){var c,d,e;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(c=this._callbacks[a],!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){var b,c,d,e;if(this._callbacks=this._callbacks||{},b=[].slice.call(arguments,1),c=this._callbacks[a],c)for(c=c.slice(0),d=0,e=c.length;e>d;++d)c[d].apply(this,b);return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],30:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],31:[function(a,b,c){(function(b){function d(a,b){var d="b"+c.packets[a.type]+a.data.data;return b(d)}function e(a,b,d){var e,f,g,h;if(!b)return c.encodeBase64Packet(a,d);for(e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength),g[0]=i[a.type],h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){var e,g;return b?u?f(a,b,d):(e=new Uint8Array(1),
e[0]=i[a.type],g=new l([e.buffer,a.data]),d(g)):c.encodeBase64Packet(a,d)}function h(a,b,c){var d,e=Array(a.length),f=q(a.length,c),g=function(a,c,d){b(c,function(b,c){e[a]=c,d(b,e)})};for(d=0;d<a.length;d++)g(d,a[d],f)}var i,j,k,l,m=a(32),n=a(37),o=a(34),p=a(35),q=a(33),r=a(39),s=navigator.userAgent.match(/Android/i),t=/PhantomJS/i.test(navigator.userAgent),u=s||t;c.protocol=3,i=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},j=m(i),k={type:"error",data:"parser error"},l=a(36),c.encodePacket=function(a,c,f,h){var j,k;return"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null),j=void 0===a.data?void 0:a.data.buffer||a.data,b.ArrayBuffer&&j instanceof ArrayBuffer?e(a,c,h):l&&j instanceof b.Blob?g(a,c,h):j&&j.base64?d(a,h):(k=i[a.type],void 0!==a.data&&(k+=f?r.encode(a.data+""):a.data+""),h(""+k))},c.encodeBase64Packet=function(a,d){var e,f,g,h,i,j="b"+c.packets[a.type];if(l&&a.data instanceof b.Blob)return e=new FileReader,e.onload=function(){var a=e.result.split(",")[1];d(j+a)},e.readAsDataURL(a.data);try{f=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(k){for(g=new Uint8Array(a.data),h=Array(g.length),i=0;i<g.length;i++)h[i]=g[i];f=String.fromCharCode.apply(null,h)}return j+=b.btoa(f),d(j)},c.decodePacket=function(a,b,d){var e,f,g;if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=r.decode(a)}catch(h){return k}return e=a.charAt(0),+e==e&&j[e]?a.length>1?{type:j[e],data:a.substring(1)}:{type:j[e]}:k}return f=new Uint8Array(a),e=f[0],g=o(a,1),l&&"blob"===b&&(g=new l([g])),{type:j[e],data:g}},c.decodeBase64Packet=function(a,c){var d,e=j[a.charAt(0)];return b.ArrayBuffer?(d=p.decode(a.substr(1)),"blob"===c&&l&&(d=new l([d])),{type:e,data:d}):{type:e,data:{base64:!0,data:a.substr(1)}}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,g?b:!1,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=n(a);return b&&g?l&&!u?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){var e,f,g,h,i,j,l,m;if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);if("function"==typeof b&&(d=b,b=null),""==a)return d(k,0,1);for(f="",i=0,j=a.length;j>i;i++)if(l=a.charAt(i),":"!=l)f+=l;else{if(""==f||f!=(g=+f))return d(k,0,1);if(h=a.substr(i+1,g),f!=h.length)return d(k,0,1);if(h.length){if(e=c.decodePacket(h,b,!0),k.type==e.type&&k.data==e.data)return d(k,0,1);if(m=d(e,i+g,j),!1===m)return}i+=g,f=""}return""!=f?d(k,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+(""+c).length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b,c,d,g="string"==typeof a,h=a;if(g){for(b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);h=b.buffer}for(g?e[f++]=0:e[f++]=1,d=""+h.byteLength,c=0;c<d.length;c++)e[f++]=parseInt(d[c]);for(e[f++]=255,b=new Uint8Array(h),c=0;c<b.length;c++)e[f++]=b[c]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c,d,e,f,g,h,i=new Uint8Array(1);if(i[0]=1,"string"==typeof a){for(c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);a=c.buffer,i[0]=0}for(e=a instanceof ArrayBuffer?a.byteLength:a.size,f=""+e,g=new Uint8Array(f.length+1),d=0;d<f.length;d++)g[d]=parseInt(f[d]);g[f.length]=255,l&&(h=new l([i.buffer,g.buffer,a]),b(null,h))})}h(a,d,function(a,c){return b(new l(c))})},c.decodePayloadAsBinary=function(a,b,d){var e,f,g,h,i,j,l,m,n,p;for("function"==typeof b&&(d=b,b=null),e=a,f=[],g=!1;e.byteLength>0;){for(h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(k,0,1);if(e=o(e,2+j.length),j=parseInt(j),m=o(e,0,j),i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(q){for(n=new Uint8Array(m),m="",l=0;l<n.length;l++)m+=String.fromCharCode(n[l])}f.push(m),e=o(e,j)}p=f.length,f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{32:32,33:33,34:34,35:35,36:36,37:37,39:39}],32:[function(a,b,c){b.exports=Object.keys||function(a){var b,c=[],d=Object.prototype.hasOwnProperty;for(b in a)d.call(a,b)&&c.push(b);return c}},{}],33:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],34:[function(a,b,c){b.exports=function(a,b,c){var d,e,f,g,h=a.byteLength;if(b=b||0,c=c||h,a.slice)return a.slice(b,c);if(0>b&&(b+=h),0>c&&(c+=h),c>h&&(c=h),b>=h||b>=c||0===h)return new ArrayBuffer(0);for(d=new Uint8Array(a),e=new Uint8Array(c-b),f=b,g=0;c>f;f++,g++)e[g]=d[f];return e.buffer}},{}],35:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h,i,j=.75*b.length,k=b.length,l=0;for("="===b[b.length-1]&&(j--,"="===b[b.length-2]&&j--),h=new ArrayBuffer(j),i=new Uint8Array(h),c=0;k>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),i[l++]=d<<2|e>>4,i[l++]=(15&e)<<4|f>>2,i[l++]=(3&f)<<6|63&g;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],36:[function(a,b,c){(function(a){function c(a){var b,c,d,e;for(b=0;b<a.length;b++)c=a[b],c.buffer instanceof ArrayBuffer&&(d=c.buffer,c.byteLength!==d.byteLength&&(e=new Uint8Array(c.byteLength),e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer),a[b]=d)}function d(a,b){var d,e;for(b=b||{},d=new f,c(a),e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(b){return!1}}(),h=g&&function(){try{var a=new Blob([new Uint8Array([1,2])]);return 2===a.size}catch(b){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(a,b,c){(function(c){function d(a){function b(a){var d,f;if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a(38);b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{38:38}],38:[function(a,b,c){arguments[4][11][0].apply(c,arguments)},{11:11}],39:[function(a,b,c){(function(a){!function(d){function e(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=n(b>>>10&1023|55296),b=56320|1023&b),e+=n(b);return e}function g(a){if(a>=55296&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}function h(a,b){return n(a>>b&63|128)}function i(a){if(0==(4294967168&a))return n(a);var b="";return 0==(4294965248&a)?b=n(a>>6&31|192):0==(4294901760&a)?(g(a),b=n(a>>12&15|224),b+=h(a,6)):0==(4292870144&a)&&(b=n(a>>18&7|240),b+=h(a,12),b+=h(a,6)),b+=n(63&a|128)}function j(a){for(var b,c=e(a),d=c.length,f=-1,g="";++f<d;)b=c[f],g+=i(b);return g}function k(){if(q>=p)throw Error("Invalid byte index");var a=255&o[q];if(q++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function l(){var a,b,c,d,e;if(q>p)throw Error("Invalid byte index");if(q==p)return!1;if(a=255&o[q],q++,0==(128&a))return a;if(192==(224&a)){if(b=k(),e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=k(),c=k(),e=(15&a)<<12|b<<6|c,e>=2048)return g(e),e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=k(),c=k(),d=k(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function m(a){var b,c;for(o=e(a),p=o.length,q=0,b=[];(c=l())!==!1;)b.push(c);return f(b)}var n,o,p,q,r,s,t,u,v="object"==typeof c&&c,w="object"==typeof b&&b&&b.exports==v&&b,x="object"==typeof a&&a;if((x.global===x||x.window===x)&&(d=x),n=String.fromCharCode,r={version:"2.0.0",encode:j,decode:m},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return r});else if(v&&!v.nodeType)if(w)w.exports=r;else{s={},t=s.hasOwnProperty;for(u in r)t.call(r,u)&&(v[u]=r[u])}else d.utf8=r}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(a,b,c){try{b.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(d){b.exports=!1}},{}],41:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(a,b,c){c.encode=function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c.length&&(c+="&"),c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c},c.decode=function(a){var b,c,d,e={},f=a.split("&");for(b=0,c=f.length;c>b;b++)d=f[b].split("="),e[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return e}},{}],43:[function(a,b,c){"use strict";function d(a){var b="";do b=h[a%i]+b,a=Math.floor(a/i);while(a>0);return b}function e(a){var b=0;for(l=0;l<a.length;l++)b=b*i+j[a.charAt(l)];return b}function f(){var a=d(+new Date);return a!==g?(k=0,g=a):a+"."+d(k++)}for(var g,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,j={},k=0,l=0;i>l;l++)j[h[l]]=l;f.encode=d,f.decode=e,b.exports=f},{}],44:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],45:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b,c,f,g=a,h=a.indexOf("["),i=a.indexOf("]");for(-1!=h&&-1!=i&&(a=a.substring(0,h)+a.substring(h,i).replace(/:/g,";")+a.substring(i,a.length)),b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return-1!=h&&-1!=i&&(c.source=g,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c}},{}],46:[function(a,b,c){function d(a,b){var c,d=[];for(b=b||0,c=b||0;c<a.length;c++)d[c-b]=a[c];return d}b.exports=d},{}],47:[function(a,b,c){(function(b){var d=a(51),e=a(49);c.deconstructPacket=function(a){function b(a){var f,g,h,i;if(!a)return a;if(e(a))return f={_placeholder:!0,num:c.length},c.push(a),f;if(d(a)){for(g=Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){var e,f,g;if(a&&a._placeholder)return e=b[a.num];if(d(a)){for(f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){var k,l,m;if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File)g++,k=new FileReader,k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a);else if(d(a))for(l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{49:49,51:51}],48:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)&&(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b,d,e,f={},g=0;if(f.type=+a.charAt(0),null==c.types[f.type])return j();if(c.BINARY_EVENT==f.type||c.BINARY_ACK==f.type){for(b="";"-"!=a.charAt(++g)&&(b+=a.charAt(g),g!=a.length););if(b!=+b||"-"!=a.charAt(g))throw Error("Illegal attachments");f.attachments=+b}if("/"==a.charAt(g+1))for(f.nsp="";++g&&(d=a.charAt(g),","!=d)&&(f.nsp+=d,g!=a.length););else f.nsp="/";if(e=a.charAt(g+1),""!==e&&+e==e){for(f.id="";++g;){if(d=a.charAt(g),null==d||+d!=d){--g;break}if(f.id+=a.charAt(g),g==a.length)break}f.id=+f.id}if(a.charAt(++g))try{f.data=l.parse(a.substr(g))}catch(h){return j()}return k("decoded %s as %j",a,f),f}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a(7)("socket.io-parser"),l=a(52),m=(a(51),a(50)),n=a(47),o=a(49);c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw Error("Unknown type: "+a);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{47:47,49:49,50:50,51:51,52:52,7:7}],49:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],50:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{29:29}],51:[function(a,b,c){arguments[4][11][0].apply(c,arguments)},{11:11}],52:[function(a,b,c){(function(a){(function(){function d(a,b){function c(a){var d,g,i,j,k,l,m;if(c[a]!==s)return c[a];if("bug-string-char-index"==a)d="a"!="a"[0];else if("json"==a)d=c("json-stringify")&&c("json-parse");else{if(i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',"json-stringify"==a){if(j=b.stringify,k="function"==typeof j&&t){(g=function(){return 1}).toJSON=g;try{k="0"===j(0)&&"0"===j(new e)&&'""'==j(new f)&&j(p)===s&&j(s)===s&&j()===s&&"1"===j(g)&&"[1]"==j([g])&&"[null]"==j([s])&&"null"==j(null)&&"[null,null,null]"==j([s,p,null])&&j({a:[g,!0,!1,null,"\x00\b\n\f\r	"]})==i&&"1"===j(null,g)&&"[\n 1,\n 2\n]"==j([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==j(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==j(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==j(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==j(new h(-1))}catch(n){k=!1}}d=k}if("json-parse"==a){if(l=b.parse,"function"==typeof l)try{if(0===l("0")&&!l(!1)&&(g=l(i),m=5==g.a.length&&1===g.a[0])){try{m=!l('"	"')}catch(n){}if(m)try{m=1!==l("01")}catch(n){}if(m)try{m=1!==l("1.")}catch(n){}}}catch(n){m=!1}d=m}}return c[a]=!!d}var e,f,g,h,i,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;a||(a=l.Object()),b||(b=l.Object()),e=a.Number||l.Number,f=a.String||l.String,g=a.Object||l.Object,h=a.Date||l.Date,i=a.SyntaxError||l.SyntaxError,k=a.TypeError||l.TypeError,m=a.Math||l.Math,n=a.JSON||l.JSON,"object"==typeof n&&n&&(b.stringify=n.stringify,b.parse=n.parse),o=g.prototype,p=o.toString,t=new h(-0xc782b5b800cec);try{t=-109252==t.getUTCFullYear()&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(T){}return c("json")||(u="[object Function]",v="[object Date]",w="[object Number]",x="[object String]",y="[object Array]",z="[object Boolean]",A=c("bug-string-char-index"),t||(B=m.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(a,b){return C[b]+365*(a-1970)+B((a-1969+(b=+(b>1)))/4)-B((a-1901+b)/100)+B((a-1601+b)/400)}),(q=o.hasOwnProperty)||(q=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=p?q=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,q=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,q.call(this,a)}),r=function(a,b){var c,d,e,f=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(e in d)q.call(d,e)&&f++;return c=d=null,f?r=2==f?function(a,b){var c,d={},e=p.call(a)==u;for(c in a)e&&"prototype"==c||q.call(d,c)||!(d[c]=1)||!q.call(a,c)||b(c)}:function(a,b){var c,d,e=p.call(a)==u;for(c in a)e&&"prototype"==c||!q.call(a,c)||(d="constructor"===c)||b(c);(d||q.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(a,b){var c,e,f=p.call(a)==u,g=!f&&"function"!=typeof a.constructor&&j[typeof a.hasOwnProperty]&&a.hasOwnProperty||q;for(c in a)f&&"prototype"==c||!g.call(a,c)||b(c);for(e=d.length;c=d[--e];g.call(a,c)&&b(c));}),r(a,b)},c("json-stringify")||(E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},F="000000",G=function(a,b){return(F+(b||0)).slice(-a)},H="\\u00",I=function(a){for(var b,c='"',d=0,e=a.length,f=!A||e>10,g=f&&(A?a.split(""):a);e>d;d++)switch(b=a.charCodeAt(d)){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=E[b];break;default:if(32>b){c+=H+G(2,b.toString(16));break}c+=f?g[d]:a.charAt(d)}return c+'"'},J=function(a,b,c,d,e,f,g){var h,i,j,l,m,n,o,t,u,A,C,E,F,H,K,L;try{h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=p.call(h),i!=v||q.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=w&&i!=x&&i!=y||q.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&1/0>h){if(D){for(m=B(h/864e5),j=B(m/365.2425)+1970-1;D(j+1,0)<=m;j++);for(l=B((m-D(j,0))/30.42);D(j,l+1)<=m;l++);m=1+m-D(j,l),n=(h%864e5+864e5)%864e5,o=B(n/36e5)%24,t=B(n/6e4)%60,u=B(n/1e3)%60,A=n%1e3}else j=h.getUTCFullYear(),l=h.getUTCMonth(),m=h.getUTCDate(),o=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),A=h.getUTCMilliseconds();h=(0>=j||j>=1e4?(0>j?"-":"+")+G(6,0>j?-j:j):G(4,j))+"-"+G(2,l+1)+"-"+G(2,m)+"T"+G(2,o)+":"+G(2,t)+":"+G(2,u)+"."+G(3,A)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if(i=p.call(h),i==z)return""+h;if(i==w)return h>-1/0&&1/0>h?""+h:"null";if(i==x)return I(""+h);if("object"==typeof h){for(H=g.length;H--;)if(g[H]===h)throw k();if(g.push(h),C=[],K=f,f+=e,i==y){for(F=0,H=h.length;H>F;F++)E=J(F,h,c,d,e,f,g),C.push(E===s?"null":E);L=C.length?e?"[\n"+f+C.join(",\n"+f)+"\n"+K+"]":"["+C.join(",")+"]":"[]"}else r(d||h,function(a){var b=J(a,h,c,d,e,f,g);b!==s&&C.push(I(a)+":"+(e?" ":"")+b)}),L=C.length?e?"{\n"+f+C.join(",\n"+f)+"\n"+K+"}":"{"+C.join(",")+"}":"{}";return g.pop(),L}},b.stringify=function(a,b,c){var d,e,f,g,h,i,k;if(j[typeof b]&&b)if((g=p.call(b))==u)e=b;else if(g==y)for(f={},h=0,i=b.length;i>h;k=b[h++],g=p.call(k),(g==x||g==w)&&(f[k]=1));if(c)if((g=p.call(c))==w){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else g==x&&(d=c.length<=10?c:c.slice(0,10));return J("",(k={},k[""]=a,k),e,f,d,"",[])}),c("json-parse")||(K=f.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},O=function(){throw M=N=null,i()},P=function(){for(var a,b,c,d,e,f=N,g=f.length;g>M;)switch(e=f.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=A?f.charAt(M):f[M],M++,a;case 34:for(a="@",M++;g>M;)if(e=f.charCodeAt(M),32>e)O();else if(92==e)switch(e=f.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=L[e],M++;break;case 117:for(b=++M,c=M+4;c>M;M++)e=f.charCodeAt(M),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||O();a+=K("0x"+f.slice(b,M));break;default:O()}else{if(34==e)break;for(e=f.charCodeAt(M),b=M;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++M);a+=f.slice(b,M)}if(34==f.charCodeAt(M))return M++,a;O();default:if(b=M,45==e&&(d=!0,e=f.charCodeAt(++M)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(M+1),e>=48&&57>=e)&&O(),d=!1;g>M&&(e=f.charCodeAt(M),e>=48&&57>=e);M++);if(46==f.charCodeAt(M)){for(c=++M;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==M&&O(),M=c}if(e=f.charCodeAt(M),101==e||69==e){for(e=f.charCodeAt(++M),(43==e||45==e)&&M++,c=M;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==M&&O(),M=c}return+f.slice(b,M)}if(d&&O(),"true"==f.slice(M,M+4))return M+=4,!0;if("false"==f.slice(M,M+5))return M+=5,!1;if("null"==f.slice(M,M+4))return M+=4,null;O()}return"$"},Q=function(a){var b,c;if("$"==a&&O(),"string"==typeof a){if("@"==(A?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=P(),"]"!=a;c||(c=!0))c&&(","==a?(a=P(),"]"==a&&O()):O()),","==a&&O(),b.push(Q(a));return b}if("{"==a){for(b={};a=P(),"}"!=a;c||(c=!0))c&&(","==a?(a=P(),"}"==a&&O()):O()),(","==a||"string"!=typeof a||"@"!=(A?a.charAt(0):a[0])||":"!=P())&&O(),b[a.slice(1)]=Q(P());return b}O()}return a},R=function(a,b,c){var d=S(a,b,c);d===s?delete a[b]:a[b]=d},S=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(p.call(e)==y)for(d=e.length;d--;)R(e,d,c);else r(e,function(a){R(e,a,c)});return c.call(a,b,e)},b.parse=function(a,b){var c,d;return M=0,N=""+a,c=Q(P()),"$"!=P()&&O(),M=N=null,b&&p.call(b)==u?S((d={},d[""]=c,d),"",b):c})),b.runInContext=d,b}var e,f,g,h,i="function"==typeof define&&define.amd,j={"function":!0,object:!0},k=j[typeof c]&&c&&!c.nodeType&&c,l=j[typeof window]&&window||this,m=k&&j[typeof b]&&b&&!b.nodeType&&"object"==typeof a&&a;!m||m.global!==m&&m.window!==m&&m.self!==m||(l=m),k&&!i?d(l,k):(e=l.JSON,f=l.JSON3,g=!1,h=d(l,l.JSON3={noConflict:function(){return g||(g=!0,l.JSON=e,l.JSON3=f,e=f=null),h}}),l.JSON={parse:h.parse,stringify:h.stringify}),i&&define(function(){return h})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(a,b,c){(function(a){"undefined"!=typeof window?b.exports=window:void 0!==a?b.exports=a:"undefined"!=typeof self?b.exports=self:b.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(a,b,c){function d(a){var b=e.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=d;var e=Object.prototype.toString},{}],55:[function(a,b,c){function d(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}b.exports=d,d.proto=d(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return d(this)},configurable:!0})})},{}],56:[function(a,b,c){function d(a,b,c){if(!j(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===h.call(a)?e(a,b,c):"string"==typeof a?f(a,b,c):g(a,b,c)}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)i.call(a,d)&&b.call(c,a[d],d,a)}function f(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a.charAt(d),d,a)}function g(a,b,c){for(var d in a)i.call(a,d)&&b.call(c,a[d],d,a)}var h,i,j=a(54);b.exports=d,h=Object.prototype.toString,i=Object.prototype.hasOwnProperty},{54:54}],57:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],58:[function(a,b,c){var d=a(57),e=a(56),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return e(d(a).split("\n"),function(a){var c=a.indexOf(":"),e=d(a.slice(0,c)).toLowerCase(),g=d(a.slice(c+1));void 0===b[e]?b[e]=g:f(b[e])?b[e].push(g):b[e]=[b[e],g]}),b}},{56:56,57:57}],59:[function(a,b,c){function d(){var a,b,c,d={};for(a=0;a<arguments.length;a++){b=arguments[a];for(c in b)e.call(b,c)&&(d[c]=b[c])}return d}b.exports=d;var e=Object.prototype.hasOwnProperty},{}],60:[function(a,b,c){b.exports={"private":!0,name:"solarcrusaders",version:"0.1.2",description:"A multiplayer strategy game featuring 4X gameplay, sandbox universe, and simulated virtual economy.",author:"Oliver J Dyla",contributors:[],dependencies:{colors:"1.1.x",minimist:"1.2.x",nconf:"0.8.x",daemon:"1.1.x",async:"1.5.x",winston:"2.1.x","logrotate-stream":"0.2.x",validator:"4.5.x",passport:"0.3.x","passport-local":"1.0.x",bcryptjs:"2.3.0",xregexp:"3.0.x",uuid:"2.0.x",caminte:"0.2.x",morgan:"1.6.x",express:"4.13.x","express-session":"1.13.x","cookie-parser":"1.4.x",compression:"1.6.x","serve-favicon":"2.3.x","body-parser":"1.14.x",jade:"1.11.x",redis:"2.4.x","connect-redis":"3.0.x","socket.io":"1.4.x","socket.io-express-session":"0.1.x","socket.io-events":"0.4.x",stripe:"4.3.x",earcut:"2.0.x","resource-loader":"1.6.x","object-assign":"4.0.x",eventemitter3:"1.1.x",xhr:"2.2.x"},devDependencies:{grunt:"0.4.x","grunt-develop":"0.4.x","grunt-browserify":"4.0.x","grunt-node-inspector":"0.4.x","grunt-contrib-concat":"0.5.x","grunt-contrib-watch":"0.6.x","grunt-contrib-uglify":"0.11.x","grunt-contrib-compress":"0.14.x",brfs:"1.4.x","browserify-versionify":"1.0.x","bundle-collapser":"1.2.x"}}},{}],61:[function(a,b,c){function d(a,b,c,d,f,g,h){void 0===h&&(h=!1),this.game=a,this.name=c,this.parent=b,this._frameData=d,this._frames=[],this._frames=this._frames.concat(f),this.delay=1e3/g,this.loop=h,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.game.on("game/pause",this.onPause,this),this.game.on("game/resume",this.onResume,this),e.call(this)}var e=a(3);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.play=function(a,b,c){return"number"==typeof a&&(this.delay=1e3/a),"boolean"==typeof b&&(this.loop=b),void 0!==c&&(this.killOnComplete=c),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.updateCurrentFrame(!0),this.emit("start",this.parent,this),this.parent.emit("animationStart",this),this.parent.animations.currentAnim=this,this.parent.animations.currentFrame=this.currentFrame,this},d.prototype.restart=function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.parent.setFrame(this.currentFrame),this.emit("start",this.parent,this),this.parent.emit("animationStart",this),this.parent.animations.currentAnim=this,this.parent.animations.currentFrame=this.currentFrame},d.prototype.setFrame=function(a,b){var c,d;if(void 0===b&&(b=!1),"string"==typeof a)for(d=0;d<this._frames.length;d++)this._frameData.getFrame(this._frames[d]).name===a&&(c=d);else if("number"==typeof a)if(b)c=a;else for(d=0;d<this._frames.length;d++)this._frames[d]===c&&(c=d);c&&(this._frameIndex=c-1,this._timeNextFrame=this.game.clock.time,this.update())},d.prototype.stop=function(a,b){void 0===a&&(a=!1),void 0===b&&(b=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,a&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this.parent.setFrame(this.currentFrame)),b&&(this.parent.emit("animationComplete",this),this.emit("complete",this.parent,this))},d.prototype.onPause=function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.clock.time)},d.prototype.onResume=function(){this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this._frameDiff)},d.prototype.update=function(){return this.isPaused?!1:this.isPlaying&&this.game.clock.time>=this._timeNextFrame?(this._frameSkip=1,this._frameDiff=this.game.clock.time-this._timeNextFrame,this._timeLastFrame=this.game.clock.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.clock.time+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.loop?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this.parent.setFrame(this.currentFrame),this.loopCount++,!0):(this.complete(),!1):this.updateCurrentFrame()):!1},d.prototype.updateCurrentFrame=function(a){if(void 0===a&&(a=!1),!this._frameData)return!1;var b=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(a||!a&&b!==this.currentFrame.index)&&this.parent.setFrame(this.currentFrame),!0},d.prototype.next=function(a){void 0===a&&(a=1);var b=this._frameIndex+a;b>=this._frames.length&&(this.loop?b%=this._frames.length:b=this._frames.length-1),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame())},d.prototype.previous=function(a){void 0===a&&(a=1);var b=this._frameIndex-a;0>b&&(this.loop?b=this._frames.length+b:b++),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame())},d.prototype.updateFrameData=function(a){this._frameData=a,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},d.prototype.destroy=function(){this._frameData&&(this.game=null,this.parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.removeAllListeners())},d.prototype.complete=function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this.parent.on("animationComplete",this),this.on("complete",this.parent,this),this.killOnComplete&&this.parent.kill()},Object.defineProperty(d.prototype,"paused",{
get:function(){return this.isPaused},set:function(a){this.isPaused=a,a?this._pauseStartTime=this.game.clock.time:this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this.delay)}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(d.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(a){this.currentFrame=this._frameData.getFrame(this._frames[a]),null!==this.currentFrame&&(this._frameIndex=a,this.parent.setFrame(this.currentFrame))}}),Object.defineProperty(d.prototype,"speed",{get:function(){return Math.round(1e3/this.delay)},set:function(a){a>=1&&(this.delay=1e3/a)}}),d.generateFrameNames=function(a,b,c,d){var e,f,g;if(void 0===d&&(d=""),e=[],f="",c>b)for(g=b;c>=g;g++)f=a+(""+g)+d,e.push(f);else for(g=b;g>=c;g--)f=a+(""+g)+d,e.push(f);return e},b.exports=d},{3:3}],62:[function(a,b,c){function d(a){this.sprite=a,this.game=a.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]}var e=a(61);d.prototype={loadFrameData:function(a,b){if(void 0===a)return!1;if(this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(a);return this._frameData=a,void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},copyFrameData:function(a,b){if(this._frameData=a.clone(),this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(this._frameData);return void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},add:function(a,b,c,d,f){return b=b||[],c=c||60,void 0===d&&(d=!1),void 0===f&&(f=b&&"number"==typeof b[0]?!0:!1),this._outputFrames=[],this._frameData.getFrameIndexes(b,f,this._outputFrames),this._anims[a]=new e(this.game,this.sprite,a,this._frameData,this._outputFrames,c,d),this.currentAnim=this._anims[a],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[a]},validateFrames:function(a,b){void 0===b&&(b=!0);for(var c=0;c<a.length;c++)if(b===!0){if(a[c]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(a[c])===!1)return!1;return!0},play:function(a,b,c,d){return this._anims[a]?this.currentAnim===this._anims[a]?this.currentAnim.isPlaying===!1?(this.currentAnim.paused=!1,this.currentAnim.play(b,c,d)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[a],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(b,c,d)):void 0},stop:function(a,b){void 0===b&&(b=!1),!this.currentAnim||"string"==typeof a&&a!==this.currentAnim.name||this.currentAnim.stop(b)},update:function(){return this.updateIfVisible&&!this.sprite.visible?!1:this.currentAnim&&this.currentAnim.update()?(this.currentFrame=this.currentAnim.currentFrame,!0):!1},next:function(a){this.currentAnim&&(this.currentAnim.next(a),this.currentFrame=this.currentAnim.currentFrame)},previous:function(a){this.currentAnim&&(this.currentAnim.previous(a),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(a){return"string"==typeof a&&this._anims[a]?this._anims[a]:null},refreshFrame:function(){console.warn("refreshFrame is not implemented, see engine/animation/AnimationManager")},destroy:function(){var a=null;for(a in this._anims)this._anims.hasOwnProperty(a)&&this._anims[a].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(d.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(a){this.currentAnim.paused=a}}),Object.defineProperty(d.prototype,"name",{get:function(){return this.currentAnim?this.currentAnim.name:void 0}}),Object.defineProperty(d.prototype,"frame",{get:function(){return this.currentFrame?this.currentFrame.index:void 0},set:function(a){"number"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrame(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame)),"string"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(d.prototype,"frameName",{get:function(){return this.currentFrame?this.currentFrame.name:void 0},set:function(a){"string"==typeof a&&this._frameData&&null!==this._frameData.getFrameByName(a)?(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame))):console.warn("Cannot set frameName: "+a)}}),b.exports=d},{61:61}],63:[function(a,b,c){var d=a(64),e=a(65);AnimationParser={spriteSheet:function(a,b,c,f,g,h,i){var j,k,l,m,n,o,p,q,r,s=b;if("string"==typeof b&&(s=a.cache.getImage(b)),null===s)return null;if(j=s.width,k=s.height,0>=c&&(c=Math.floor(-j/Math.min(-1,c))),0>=f&&(f=Math.floor(-k/Math.min(-1,f))),l=Math.floor((j-h)/(c+i)),m=Math.floor((k-h)/(f+i)),n=l*m,-1!==g&&(n=g),0===j||0===k||c>j||f>k||0===n)return console.warn("AnimationParser.spriteSheet: '"+b+"'s width/height zero or width/height < given frameWidth/frameHeight"),null;for(o=new e,p=h,q=h,r=0;n>r;r++)o.addFrame(new d(r,p,q,c,f,"")),p+=c+i,p+c>j&&(p=h,q+=f+i);return o},JSONData:function(a,b){var c,f,g,h;if(!b.frames)return console.warn("AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),void console.log(b);for(c=new e,f=b.frames,h=0;h<f.length;h++)g=c.addFrame(new d(h,f[h].frame.x,f[h].frame.y,f[h].frame.w,f[h].frame.h,f[h].filename)),f[h].trimmed&&g.setTrim(f[h].trimmed,f[h].sourceSize.w,f[h].sourceSize.h,f[h].spriteSourceSize.x,f[h].spriteSourceSize.y,f[h].spriteSourceSize.w,f[h].spriteSourceSize.h);return c},JSONDataHash:function(a,b){var c,f,g,h,i;if(!b.frames)return console.warn("AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),void console.log(b);c=new e,f=b.frames,h=0;for(i in f)g=c.addFrame(new d(h,f[i].frame.x,f[i].frame.y,f[i].frame.w,f[i].frame.h,i)),f[i].trimmed&&g.setTrim(f[i].trimmed,f[i].sourceSize.w,f[i].sourceSize.h,f[i].spriteSourceSize.x,f[i].spriteSourceSize.y,f[i].spriteSourceSize.w,f[i].spriteSourceSize.h),h++;return c}},b.exports=AnimationParser},{64:64,65:65}],64:[function(a,b,c){(function(c){function d(a,b,d,e,g,h){this.index=a,this.x=b,this.y=d,this.width=e,this.height=g,this.name=h,this.centerX=c.Math.floor(e/2),this.centerY=c.Math.floor(g/2),this.distance=f.distance(0,0,e,g),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=e,this.sourceSizeH=g,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height}var e=a(103),f=a(136);d.prototype={resize:function(a,b){this.width=a,this.height=b,this.centerX=c.Math.floor(a/2),this.centerY=c.Math.floor(b/2),this.distance=f.distance(0,0,a,b),this.sourceSizeW=a,this.sourceSizeH=b,this.right=this.x+a,this.bottom=this.y+b},setTrim:function(a,b,d,e,f,g,h){this.trimmed=a,a&&(this.sourceSizeW=b,this.sourceSizeH=d,this.centerX=c.Math.floor(b/2),this.centerY=c.Math.floor(d/2),this.spriteSourceSizeX=e,this.spriteSourceSizeY=f,this.spriteSourceSizeW=g,this.spriteSourceSizeH=h)},clone:function(){var a,b=new d(this.index,this.x,this.y,this.width,this.height,this.name);for(a in this)this.hasOwnProperty(a)&&(b[a]=this[a]);return b},getRect:function(a){return void 0===a?a=new e(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a}},d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{103:103,136:136}],65:[function(a,b,c){function d(){this._frames=[],this._frameNames=[]}d.prototype={addFrame:function(a){return a.index=this._frames.length,this._frames.push(a),""!==a.name&&(this._frameNames[a.name]=a.index),a},getFrame:function(a){return a>=this._frames.length&&(a=0),this._frames[a]},getFrameByName:function(a){return"number"==typeof this._frameNames[a]?this._frames[this._frameNames[a]]:null},checkFrameName:function(a){return null==this._frameNames[a]?!1:!0},clone:function(){var a,b,c=new d;for(a=0;a<this._frames.length;a++)c._frames.push(this._frames[a].clone());for(b in this._frameNames)this._frameNames.hasOwnProperty(b)&&c._frameNames.push(this._frameNames[b]);return c},getFrameRange:function(a,b,c){void 0===c&&(c=[]);for(var d=a;b>=d;d++)c.push(this._frames[d]);return c},getFrames:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d]);else for(d=0;d<a.length;d++)b?c.push(this.getFrame(a[d])):c.push(this.getFrameByName(a[d]));return c},getFrameIndexes:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d].index);else for(d=0;d<a.length;d++)b?c.push(this._frames[a[d]].index):this.getFrameByName(a[d])&&c.push(this.getFrameByName(a[d]).index);return c}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"total",{get:function(){return this._frames.length}}),b.exports=d},{}],66:[function(a,b,c){var d={VERSION:a(60).version,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,TILEMAPSPRITE:27,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,STRIP:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,Loader:{TEXTURE_ATLAS_JSON_ARRAY:0,TEXTURE_ATLAS_JSON_HASH:1,TEXTURE_ATLAS_XML_STARLING:2},BlendMode:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16}};b.exports=d},{60:60}],67:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0}d.prototype={start:function(a,b){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},stop:function(a,b){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},reset:function(){this.timeDown=this.game.clock.time,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.parent=null,this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),b.exports=d},{}],68:[function(a,b,c){function d(a){this.game=a,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.pollRate=1,this.enabled=!0,this.multiInputOverride=d.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.minPriorityID=0,this.resetLocked=!1,this.interactiveItems=new k,this._pollCounter=0,this._oldPosition=null,this._localPoint=new j,this._x=0,this._y=0,g.call(this)}var e=a("pixi"),f=a(73),g=a(3),h=a(72),i=a(71),j=a(102),k=a(132);d.MOUSE_OVERRIDES_TOUCH=0,d.TOUCH_OVERRIDES_MOUSE=1,d.MOUSE_TOUCH_COMBINE=2,d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.mousePointer=new f(this.game,0,f.MODE.CURSOR),this.mouse=new h(this.game),this.keyboard=new i(this.game),this.keyboard.addCallbacks(this,function(a,b){this.emit("keydown",a,b)},function(a,b){this.emit("keyup",a,b)},function(a,b){this.emit("keypress",a,b)}),this.scale=new j(1,1),this.speed=new j,this.position=new j,this._oldPosition=new j,this.activePointer=this.mousePointer,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.mousePointer.active=!0,this.keyboard.start();var a=this;this._onClickTrampoline=function(b){a.onClickTrampoline(b)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},d.prototype.destroy=function(){this.mouse.stop(),this.keyboard.stop(),this.moveCallbacks=[],this.game.canvas.removeEventListener("click",this._onClickTrampoline)},d.prototype.addMoveCallback=function(a,b){this.moveCallbacks.push({callback:a,context:b})},d.prototype.deleteMoveCallback=function(a,b){for(var c=this.moveCallbacks.length;c--;)if(this.moveCallbacks[c].callback===a&&this.moveCallbacks[c].context===b)return void this.moveCallbacks.splice(c,1)},d.prototype.update=function(){return this.keyboard.update(),this.pollRate>0&&this._pollCounter<this.pollRate?void this._pollCounter++:(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),void(this._pollCounter=0))},d.prototype.reset=function(a){this.game.isBooted&&!this.resetLocked&&(void 0===a&&(a=!1),this.mousePointer.reset(),this.keyboard.reset(a),"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),a&&(this.removeAllListeners(),this.moveCallbacks=[]),this._pollCounter=0)},d.prototype.resetSpeed=function(a,b){this._oldPosition.setTo(a,b),this.speed.setTo(0,0)},d.prototype.getLocalPosition=function(a,b,c){var d,e;return void 0===c&&(c=new j),d=a.worldTransform,e=1/(d.a*d.d+d.c*-d.b),c.setTo(d.d*e*b.x+-d.c*e*b.y+(d.ty*d.c-d.tx*d.d)*e,d.a*e*b.y+-d.b*e*b.x+(-d.ty*d.a+d.tx*d.b)*e)},d.prototype.hitTest=function(a,b,c){var d,f,g,h,i,j,k;if(!a.worldVisible)return!1;if(this.getLocalPosition(a,b,this._localPoint),c.copyFrom(this._localPoint),a.hitArea&&a.hitArea.contains)return a.hitArea.contains(this._localPoint.x,this._localPoint.y);if(a instanceof e.Sprite){if(d=a.texture.frame.width,f=a.texture.frame.height,g=-d*a.anchor.x,this._localPoint.x>=g&&this._localPoint.x<g+d&&(h=-f*a.anchor.y,this._localPoint.y>=h&&this._localPoint.y<h+f))return!0}else if(a instanceof e.Graphics)for(i=0;i<a.graphicsData.length;i++)if(j=a.graphicsData[i],j.fill&&j.shape&&j.shape.contains(this._localPoint.x,this._localPoint.y))return!0;for(i=0,k=a.children.length;k>i;i++)if(this.hitTest(a.children[i],b,c))return!0;return!1},d.prototype.onClickTrampoline=function(){this.activePointer.processClickTrampolines()},Object.defineProperty(d.prototype,"x",{get:function(){return this._x},set:function(a){this._x=Math.floor(a)}}),Object.defineProperty(d.prototype,"y",{get:function(){return this._y},set:function(a){this._y=Math.floor(a)}}),Object.defineProperty(d.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(d.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(d.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),b.exports=d},{102:102,132:132,3:3,71:71,72:72,73:73,pixi:"pixi"}],69:[function(a,b,c){function d(a){this.sprite=a,this.game=a.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.scaleLayer=!1,this.dragFromCenter=!1,this.dragStartPoint=new e,this.dragOffset=new e,this.snapPoint=new e,this._dragPoint=new e,this._tempPoint=new e,this._dragPhase=!1,this._wasEnabled=!1,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})}var e=a(102);d.prototype={start:function(a,b){if(void 0===b&&(b=!1),a=a||0,this.enabled===!1){this.game.input.interactiveItems.add(this),this.useHandCursor=b,this.priorityID=a;for(var c=0;1>c;c++)this._pointerData[c]={id:c,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new e,this.enabled=!0,this._wasEnabled=!0}return this.flagged=!1,this.sprite},reset:function(){this.enabled=!1,this.flagged=!1;for(var a=0;1>a;a++)this._pointerData[a]={id:a,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(a,b,c){return void 0===c&&(c=!0),!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID?!1:(c||!this.pixelPerfectClick&&!this.pixelPerfectOver)&&(this.priorityID>a||this.priorityID===a&&this.sprite.renderOrderID<b)?!0:!1},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(a){return a=a||0,this._pointerData[a].x},pointerY:function(a){return a=a||0,this._pointerData[a].y},pointerDown:function(a){return a=a||0,this._pointerData[a].isDown},pointerUp:function(a){return a=a||0,this._pointerData[a].isUp},pointerTimeDown:function(a){return a=a||0,this._pointerData[a].timeDown},pointerTimeUp:function(a){return a=a||0,this._pointerData[a].timeUp},pointerOver:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOver;for(var b=0;1>b;b++)if(this._pointerData[b].isOver)return!0}return!1},pointerOut:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOut;for(var b=0;1>b;b++)if(this._pointerData[b].isOut)return!0}return!1},pointerTimeOver:function(a){return a=a||0,this._pointerData[a].timeOver},pointerTimeOut:function(a){return a=a||0,this._pointerData[a].timeOut},pointerDragged:function(a){return a=a||0,this._pointerData[a].isDragged},checkPointerDown:function(a,b){return a.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,a,this._tempPoint)?(void 0===b&&(b=!1),!b&&this.pixelPerfectClick?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0):!1},checkPointerOver:function(a,b){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,a,this._tempPoint)?(void 0===b&&(b=!1),!b&&this.pixelPerfectOver?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0):!1},checkPixel:function(a,b,c){var d;if(this.sprite.texture.baseTexture.source){if(null===a&&null===b&&(this.game.input.getLocalPosition(this.sprite,c,this._tempPoint),a=this._tempPoint.x,b=this._tempPoint.y),0!==this.sprite.anchor.x&&(a-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(b-=-this.sprite.texture.frame.height*this.sprite.anchor.y),a+=this.sprite.texture.frame.x,b+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(a-=this.sprite.texture.trim.x,b-=this.sprite.texture.trim.y,a<this.sprite.texture.crop.x||a>this.sprite.texture.crop.right||b<this.sprite.texture.crop.y||b>this.sprite.texture.crop.bottom))return this._dx=a,this._dy=b,!1;if(this._dx=a,this._dy=b,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,a,b,1,1,0,0,1,1),d=this.game.input.hitContext.getImageData(0,0,1,1),d.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(a){return null!==this.sprite&&void 0!==this.sprite.parent?this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this.draggable&&this._draggedPointerID===a.id?this.updateDrag(a):this._pointerData[a.id].isOver?this.checkPointerOver(a)?(this._pointerData[a.id].x=a.x-this.sprite.x,this._pointerData[a.id].y=a.y-this.sprite.y,!0):(this._pointerOutHandler(a),!1):void 0:(this._pointerOutHandler(a),!1):void 0},_pointerOverHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];(b.isOver===!1||a.dirty)&&(b.isOver=!0,b.isOut=!1,b.timeOver=this.game.clock.time,b.x=a.x-this.sprite.x,b.y=a.y-this.sprite.y,this.useHandCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),this.sprite&&this.sprite.emit("inputOver",this.sprite,a))}},_pointerOutHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];b.isOver=!1,b.isOut=!0,b.timeOut=this.game.clock.time,this.useHandCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),this.sprite&&this.sprite.emit("inputOut",this.sprite,a)}},_touchedHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];if(!b.isDown&&b.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,a))return;b.isDown=!0,b.isUp=!1,b.timeDown=this.game.clock.time,this.sprite&&this.sprite.emit("inputDown",this.sprite,a),a.dirty=!0,this.draggable&&this.isDragged===!1&&this.startDrag(a),this.bringToTop&&this.sprite.bringToTop()}}},_releasedHandler:function(a){var b,c;null!==this.sprite&&(b=this._pointerData[a.id],b.isDown&&a.isUp&&(b.isDown=!1,b.isUp=!0,b.timeUp=this.game.clock.time,b.downDuration=b.timeUp-b.timeDown,c=this.checkPointerOver(a),this.sprite&&(this.sprite.emit("inputUp",this.sprite,a,c),c&&(c=this.checkPointerOver(a))),b.isOver=c,!c&&this.useHandCursor&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),a.dirty=!0,this.draggable&&this.isDragged&&this._draggedPointerID===a.id&&this.stopDrag(a)))},updateDrag:function(a){var b,c;return a.isUp?(this.stopDrag(a),!1):(b=this.globalToLocalX(a.x)+this._dragPoint.x+this.dragOffset.x,c=this.globalToLocalY(a.y)+this._dragPoint.y+this.dragOffset.y,this.sprite.fixedToCamera?(this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=b),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y))):(this.allowHorizontalDrag&&(this.sprite.x=b),this.allowVerticalDrag&&(this.sprite.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))),this.sprite.emit("dragUpdate",this.sprite,a,b,c,this.snapPoint),!0)},justOver:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOver&&this.overDuration(a)<b},justOut:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOut&&this.game.clock.time-this._pointerData[a].timeOut<b},justPressed:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isDown&&this.downDuration(a)<b},justReleased:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isUp&&this.game.clock.time-this._pointerData[a].timeUp<b},overDuration:function(a){return a=a||0,this._pointerData[a].isOver?this.game.clock.time-this._pointerData[a].timeOver:-1},downDuration:function(a){return a=a||0,this._pointerData[a].isDown?this.game.clock.time-this._pointerData[a].timeDown:-1},enableDrag:function(a,b,c,d,f,g){void 0===a&&(a=!1),void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=255),void 0===f&&(f=null),void 0===g&&(g=null),this._dragPoint=new e,this.draggable=!0,this.bringToTop=b,this.dragOffset=new e,this.dragFromCenter=a,this.pixelPerfectClick=c,this.pixelPerfectAlpha=d,f&&(this.boundsRect=f),g&&(this.boundsSprite=g)},disableDrag:function(){if(this._pointerData)for(var a=0;1>a;a++)this._pointerData[a].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(a){var b,c=this.sprite.x,d=this.sprite.y;this.isDragged=!0,this._draggedPointerID=a.id,this._pointerData[a.id].isDragged=!0,this.sprite.fixedToCamera?this.dragFromCenter?(this.sprite.centerOn(a.x,a.y),this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y)):this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y):(this.dragFromCenter&&(b=this.sprite.getBounds(),this.sprite.x=this.globalToLocalX(a.x)+(this.sprite.x-b.centerX),this.sprite.y=this.globalToLocalY(a.y)+(this.sprite.y-b.centerY)),this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(a.x),this.sprite.y-this.globalToLocalY(a.y))),this.updateDrag(a),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(c,d),this.sprite.emit("dragStart",this.sprite,a,c,d)},globalToLocalX:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.x,a*=this.game.scale.grid.scaleFluidInversed.x),a},globalToLocalY:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.y,a*=this.game.scale.grid.scaleFluidInversed.y),a},stopDrag:function(a){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[a.id].isDragged=!1,this._dragPhase=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.emit("dragStop",this.sprite,a),this.checkPointerOver(a)===!1&&this._pointerOutHandler(a)},setDragLock:function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!0),this.allowHorizontalDrag=a,this.allowVerticalDrag=b},enableSnap:function(a,b,c,d,e,f){void 0===c&&(c=!0),void 0===d&&(d=!1),void 0===e&&(e=0),void 0===f&&(f=0),this.snapX=a,this.snapY=b,this.snapOffsetX=e,this.snapOffsetY=f,this.snapOnDrag=c,this.snapOnRelease=d},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},d.prototype.constructor=d,b.exports=d},{102:102}],70:[function(a,b,c){function d(a,b){this.game=a,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=b,this.onHoldCallback=null,this.onHoldContext=null,this._justDown=!1,this._justUp=!1}d.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.clock.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(a){this._enabled&&(this.event=a,this.isDown||(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.duration=0,this.repeats=0,this._justDown=!0))},processKeyUp:function(a){this._enabled&&(this.event=a,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=this.game.clock.time-this.timeDown,this._justUp=!0))},reset:function(a){void 0===a&&(a=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,a&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(a){return void 0===a&&(a=50),this.isDown&&this.duration<a},upDuration:function(a){return void 0===a&&(a=50),!this.isDown&&this.game.clock.time-this.timeUp<a}},Object.defineProperty(d.prototype,"justDown",{get:function(){var a=this._justDown;return this._justDown=!1,a}}),Object.defineProperty(d.prototype,"justUp",{get:function(){var a=this._justUp;return this._justUp=!1,a}}),Object.defineProperty(d.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a=!!a,a!==this._enabled&&(a||this.reset(!1),this._enabled=a)}}),d.prototype.constructor=d,b.exports=d},{}],71:[function(a,b,c){(function(c){function d(a){this.game=a,this.enabled=!0,this.event=null,this.pressEvent=null,this.callbackContext=this,this.onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0}var e=a(70);d.prototype={addCallbacks:function(a,b,c,d){this.callbackContext=a,void 0!==b&&null!==b&&(this.onDownCallback=b),void 0!==c&&null!==c&&(this.onUpCallback=c),void 0!==d&&null!==d&&(this.onPressCallback=d)},addKey:function(a){return this._keys[a]||(this._keys[a]=new e(this.game,a),this.addKeyCapture(a)),this._keys[a];
},addKeys:function(a){var b,c={};for(b in a)c[b]=this.addKey(a[b]);return c},removeKey:function(a){this._keys[a]&&(this._keys[a]=null,this.removeKeyCapture(a))},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT})},start:function(){if(null===this._onKeyDown){var a=this;this._onKeyDown=function(b){return a.processKeyDown(b)},this._onKeyUp=function(b){return a.processKeyUp(b)},this._onKeyPress=function(b){return a.processKeyPress(b)},c.addEventListener("keydown",this._onKeyDown,!1),c.addEventListener("keyup",this._onKeyUp,!1),c.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){c.removeEventListener("keydown",this._onKeyDown),c.removeEventListener("keyup",this._onKeyUp),c.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(a){if("object"==typeof a)for(var b in a)this._capture[a[b]]=!0;else this._capture[a]=!0},removeKeyCapture:function(a){delete this._capture[a]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyDown(a),this._k=a.keyCode,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,a))},processKeyPress:function(a){this.pressEvent=a,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(a.charCode),a)},processKeyUp:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyUp(a),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,a))},reset:function(a){void 0===a&&(a=!0),this.event=null;for(var b=this._keys.length;b--;)this._keys[b]&&this._keys[b].reset(a)},downDuration:function(a,b){return this._keys[a]?this._keys[a].downDuration(b):null},upDuration:function(a,b){return this._keys[a]?this._keys[a].upDuration(b):null},isDown:function(a){return this._keys[a]?this._keys[a].isDown:null}},Object.defineProperty(d.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(d.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),d.prototype.constructor=d,d.A="A".charCodeAt(0),d.B="B".charCodeAt(0),d.C="C".charCodeAt(0),d.D="D".charCodeAt(0),d.E="E".charCodeAt(0),d.F="F".charCodeAt(0),d.G="G".charCodeAt(0),d.H="H".charCodeAt(0),d.I="I".charCodeAt(0),d.J="J".charCodeAt(0),d.K="K".charCodeAt(0),d.L="L".charCodeAt(0),d.M="M".charCodeAt(0),d.N="N".charCodeAt(0),d.O="O".charCodeAt(0),d.P="P".charCodeAt(0),d.Q="Q".charCodeAt(0),d.R="R".charCodeAt(0),d.S="S".charCodeAt(0),d.T="T".charCodeAt(0),d.U="U".charCodeAt(0),d.V="V".charCodeAt(0),d.W="W".charCodeAt(0),d.X="X".charCodeAt(0),d.Y="Y".charCodeAt(0),d.Z="Z".charCodeAt(0),d.ZERO="0".charCodeAt(0),d.ONE="1".charCodeAt(0),d.TWO="2".charCodeAt(0),d.THREE="3".charCodeAt(0),d.FOUR="4".charCodeAt(0),d.FIVE="5".charCodeAt(0),d.SIX="6".charCodeAt(0),d.SEVEN="7".charCodeAt(0),d.EIGHT="8".charCodeAt(0),d.NINE="9".charCodeAt(0),d.NUMPAD_0=96,d.NUMPAD_1=97,d.NUMPAD_2=98,d.NUMPAD_3=99,d.NUMPAD_4=100,d.NUMPAD_5=101,d.NUMPAD_6=102,d.NUMPAD_7=103,d.NUMPAD_8=104,d.NUMPAD_9=105,d.NUMPAD_MULTIPLY=106,d.NUMPAD_ADD=107,d.NUMPAD_ENTER=108,d.NUMPAD_SUBTRACT=109,d.NUMPAD_DECIMAL=110,d.NUMPAD_DIVIDE=111,d.F1=112,d.F2=113,d.F3=114,d.F4=115,d.F5=116,d.F6=117,d.F7=118,d.F8=119,d.F9=120,d.F10=121,d.F11=122,d.F12=123,d.F13=124,d.F14=125,d.F15=126,d.COLON=186,d.EQUALS=187,d.COMMA=188,d.UNDERSCORE=189,d.PERIOD=190,d.QUESTION_MARK=191,d.TILDE=192,d.OPEN_BRACKET=219,d.BACKWARD_SLASH=220,d.CLOSED_BRACKET=221,d.QUOTES=222,d.BACKSPACE=8,d.TAB=9,d.CLEAR=12,d.ENTER=13,d.SHIFT=16,d.CONTROL=17,d.ALT=18,d.CAPS_LOCK=20,d.ESC=27,d.SPACEBAR=32,d.PAGE_UP=33,d.PAGE_DOWN=34,d.END=35,d.HOME=36,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.PLUS=43,d.MINUS=44,d.INSERT=45,d.DELETE=46,d.HELP=47,d.NUM_LOCK=144,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{70:70}],72:[function(a,b,c){(function(c){function d(a){this.game=a,this.input=a.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null}function e(a,b){this._scaleFactor=a,this._deltaMode=b,this.originalEvent=null}var f=a(116),g=a(136);d.NO_BUTTON=-1,d.LEFT_BUTTON=0,d.MIDDLE_BUTTON=1,d.RIGHT_BUTTON=2,d.BACK_BUTTON=3,d.FORWARD_BUTTON=4,d.WHEEL_UP=1,d.WHEEL_DOWN=-1,d.prototype={start:function(){var a,b,d;f.android&&f.chrome===!1||null===this._onMouseDown&&(a=this,this._onMouseDown=function(b){return a.onMouseDown(b)},this._onMouseMove=function(b){return a.onMouseMove(b)},this._onMouseUp=function(b){return a.onMouseUp(b)},this._onMouseUpGlobal=function(b){return a.onMouseUpGlobal(b)},this._onMouseOut=function(b){return a.onMouseOut(b)},this._onMouseOver=function(b){return a.onMouseOver(b)},this._onMouseWheel=function(b){return a.onMouseWheel(b)},b=this.game.canvas,b.addEventListener("mousedown",this._onMouseDown,!0),b.addEventListener("mousemove",this._onMouseMove,!0),b.addEventListener("mouseup",this._onMouseUp,!0),c.addEventListener("mouseup",this._onMouseUpGlobal,!0),b.addEventListener("mouseover",this._onMouseOver,!0),b.addEventListener("mouseout",this._onMouseOut,!0),d=f.wheelEvent,d&&(b.addEventListener(d,this._onMouseWheel,!0),"mousewheel"===d?this._wheelEvent=new e(-1/40,1):"DOMMouseScroll"===d&&(this._wheelEvent=new e(1,1))))},onMouseDown:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.start(a))},onMouseMove:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.move(a))},onMouseUp:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseUpGlobal:function(a){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),a.identifier=0,this.input.mousePointer.stop(a))},onMouseOut:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseOver:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,a)},onMouseWheel:function(a){this._wheelEvent&&(a=this._wheelEvent.bindEvent(a)),this.event=a,this.capture&&a.preventDefault(),this.wheelDelta=g.clamp(-a.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,a)},stop:function(){var a,b=this.game.canvas;b.removeEventListener("mousedown",this._onMouseDown,!0),b.removeEventListener("mousemove",this._onMouseMove,!0),b.removeEventListener("mouseup",this._onMouseUp,!0),b.removeEventListener("mouseover",this._onMouseOver,!0),b.removeEventListener("mouseout",this._onMouseOut,!0),a=f.wheelEvent,a&&b.removeEventListener(a,this._onMouseWheel,!0),c.removeEventListener("mouseup",this._onMouseUpGlobal,!0)}},d.prototype.constructor=d,e.prototype={},e.prototype.constructor=e,e.prototype.bindEvent=function(a){var b,c;if(!e._stubsGenerated&&a){b=function(a){return function(){var b=this.originalEvent[a];return"function"!=typeof b?b:b.bind(this.originalEvent)}};for(c in a)c in e.prototype||Object.defineProperty(e.prototype,c,{get:b(c)});e._stubsGenerated=!0}return this.originalEvent=a,this},Object.defineProperties(e.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{116:116,136:136}],73:[function(a,b,c){(function(c){function d(a,b,h){this.game=a,this.id=b,this.type=e.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.target=null,this.button=null,this.mode=h||d.MODE.CURSOR,this.leftButton=new f(this,d.LEFT_BUTTON),this.middleButton=new f(this,d.MIDDLE_BUTTON),this.rightButton=new f(this,d.RIGHT_BUTTON),this.backButton=new f(this,d.BACK_BUTTON),this.forwardButton=new f(this,d.FORWARD_BUTTON),this.eraserButton=new f(this,d.ERASER_BUTTON),this._holdSent=!1,this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===b,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=c.Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.dirty=!1,this.position=new g,this.positionDown=new g,this.positionUp=new g,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null}var e=a(66),f=a(67),g=a(102),h=a(72);d.NO_BUTTON=0,d.LEFT_BUTTON=1,d.RIGHT_BUTTON=2,d.MIDDLE_BUTTON=4,d.BACK_BUTTON=8,d.FORWARD_BUTTON=16,d.ERASER_BUTTON=32,d.MODE={CURSOR:1,CONTACT:2},d.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(a,b){d.LEFT_BUTTON&a&&this.leftButton.start(b),d.RIGHT_BUTTON&a&&this.rightButton.start(b),d.MIDDLE_BUTTON&a&&this.middleButton.start(b),d.BACK_BUTTON&a&&this.backButton.start(b),d.FORWARD_BUTTON&a&&this.forwardButton.start(b),d.ERASER_BUTTON&a&&this.eraserButton.start(b)},processButtonsUp:function(a,b){a===h.LEFT_BUTTON&&this.leftButton.stop(b),a===h.RIGHT_BUTTON&&this.rightButton.stop(b),a===h.MIDDLE_BUTTON&&this.middleButton.stop(b),a===h.BACK_BUTTON&&this.backButton.stop(b),a===h.FORWARD_BUTTON&&this.forwardButton.stop(b),5===a&&this.eraserButton.stop(b)},updateButtons:function(a){this.button=a.button;var b="down"===a.type.toLowerCase().substr(-4);void 0!==a.buttons?b?this.processButtonsDown(a.buttons,a):this.processButtonsUp(a.button,a):b?this.leftButton.start(a):(this.leftButton.stop(a),this.rightButton.stop(a)),a.ctrlKey&&this.leftButton.isDown&&this.rightButton.start(a),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(b){b.pointerId&&(this.pointerId=b.pointerId),this.identifier=b.identifier,this.target=b.target,this.isMouse?this.updateButtons(b):(this.isDown=!0,this.isUp=!1),this._history=[],this.active=!0,this.withinGame=!0,this.dirty=!1,this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.clock.time-this.timeDown,this.timeDown=this.game.clock.time,this._holdSent=!1,this.move(b,!0),this.positionDown.setTo(this.x,this.y);var c=this.game.input,d=a(68);return(c.multiInputOverride===d.MOUSE_OVERRIDES_TOUCH||c.multiInputOverride===d.MOUSE_TOUCH_COMBINE||c.multiInputOverride===d.TOUCH_OVERRIDES_MOUSE&&0===c.totalActivePointers)&&(c.x=this.x,c.y=this.y,c.position.setTo(this.x,this.y),c.emit("onDown",this,b),c.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var b,c;this.active&&(b=this.game.input,this.dirty&&(b.interactiveItems.total>0&&this.processInteractiveObjects(!1),this.dirty=!1),c=a(68),this._holdSent===!1&&this.duration>=b.holdRate&&((b.multiInputOverride===c.MOUSE_OVERRIDES_TOUCH||b.multiInputOverride===c.MOUSE_TOUCH_COMBINE||b.multiInputOverride===c.TOUCH_OVERRIDES_MOUSE&&0===b.totalActivePointers)&&b.emit("onHold",this),this._holdSent=!0),b.recordPointerHistory&&this.game.clock.time>=this._nextDrop&&(this._nextDrop=this.game.clock.time+b.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>b.recordLimit&&this._history.shift()))},move:function(b,c){var d,e,f=this.game.input;if(!f.pollLocked){if(void 0===c&&(c=!1),void 0!==b.button&&(this.button=b.button),c&&this.isMouse&&this.updateButtons(b),this.clientX=b.clientX,this.clientY=b.clientY,this.pageX=b.pageX,this.pageY=b.pageY,this.screenX=b.screenX,this.screenY=b.screenY,this.isMouse&&f.mouse.locked&&!c&&(this.rawMovementX=b.movementX||b.mozMovementX||b.webkitMovementX||0,this.rawMovementY=b.movementY||b.mozMovementY||b.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-0)*f.scale.x,this.y=(this.pageY-0)*f.scale.y,this.position.setTo(this.x,this.y),e=a(68),(f.multiInputOverride===e.MOUSE_OVERRIDES_TOUCH||f.multiInputOverride===e.MOUSE_TOUCH_COMBINE||f.multiInputOverride===e.TOUCH_OVERRIDES_MOUSE&&0===f.totalActivePointers)&&(f.activePointer=this,f.x=this.x,f.y=this.y,f.position.setTo(f.x,f.y)),this.withinGame=!0,this.game.paused)return this;for(d=f.moveCallbacks.length;d--;)f.moveCallbacks[d].callback.call(f.moveCallbacks[d].context,this,this.x,this.y,c);return null!==this.targetObject&&this.targetObject.isDragged===!0?this.targetObject.update(this)===!1&&(this.targetObject=null):f.interactiveItems.total>0&&this.processInteractiveObjects(c),this}},processInteractiveObjects:function(a){for(var b=c.Number.MAX_VALUE,d=-1,e=null,f=this.game.input,g=f.interactiveItems.first;g;)g.checked=!1,g.validForInput(d,b,!1)&&(g.checked=!0,(a&&g.checkPointerDown(this,!0)||!a&&g.checkPointerOver(this,!0))&&(b=g.sprite.renderOrderID,d=g.priorityID,e=g)),g=f.interactiveItems.next;for(g=f.interactiveItems.first;g;)!g.checked&&g.validForInput(d,b,!0)&&(a&&g.checkPointerDown(this,!1)||!a&&g.checkPointerOver(this,!1))&&(b=g.sprite.renderOrderID,d=g.priorityID,e=g),g=f.interactiveItems.next;return null===e?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null===this.targetObject?(this.targetObject=e,e._pointerOverHandler(this)):this.targetObject===e?e.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=e,this.targetObject._pointerOverHandler(this)),null!==this.targetObject},leave:function(a){this.withinGame=!1,this.move(a,!1)},stop:function(b){var c,d=this.game,e=d.input;return this._stateReset&&this.withinGame?void b.preventDefault():(this.timeUp=d.clock.time,c=a(68),(e.multiInputOverride===c.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===c.MOUSE_TOUCH_COMBINE||e.multiInputOverride===c.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&(e.emit("onUp",this,b),this.duration>=0&&this.duration<=e.tapRate&&(this.timeUp-this.previousTapTime<e.doubleTapRate?e.emit("onTap",this,!0):e.emit("onTap",this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(b):(this.isDown=!1,this.isUp=!0),this.id>0&&(this.active=!1),this.withinGame=d.scale.bounds.contains(b.pageX,b.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),this.isMouse===!1&&e.currentPointers--,e.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this)},justPressed:function(a){return a=a||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+a>this.game.clock.time},justReleased:function(a){return a=a||this.game.input.justReleasedRate,this.isUp&&this.timeUp+a>this.game.clock.time},addClickTrampoline:function(a,b,c,d){var e,f;if(this.isDown){for(e=this._clickTrampolines=this._clickTrampolines||[],f=0;f<e.length;f++)if(e[f].name===a){e.splice(f,1);break}e.push({name:a,targetObject:this.targetObject,callback:b,callbackContext:c,callbackArgs:d})}},processClickTrampolines:function(){var a,b,c=this._clickTrampolines;if(c){for(b=0;b<c.length;b++)a=c[b],a.targetObject===this._trampolineTargetObject&&a.callback.apply(a.callbackContext,a.callbackArgs);this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){this.isMouse===!1&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),Object.defineProperty(d.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(d.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,66:66,67:67,68:68,72:72}],74:[function(a,b,c){function d(a,b,c,d){e.ParticleContainer.call(this,b,c,d),this.game=a}var e=a("pixi");a(77);d.prototype=Object.create(e.ParticleContainer.prototype),d.prototype.constructor=d,d.prototype.update=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var a=this.children.length;a--;)this.children[a].update()},d.prototype.destroy=function(a,b){null===this.game||this.ignoreDestroy||(void 0===a&&(a=!0),void 0===b&&(b=!1),this.removeAll(a),this.removeAllListeners(),this.filters=null,this.pendingDestroy=!1,b||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},b.exports=d},{77:77,pixi:"pixi"}],75:[function(a,b,c){(function(c){function d(a,b,c,d,g){this.game=a,this.world=a.world,this.target=null,this.deadzone=null,this.view=new e(b,c,d,g),this.bounds=new e(b,c,d,g),this.smooth=!1,this.smoothSpeed=.1,this.smoothThreshhold=64,this.roundPx=!1,this.atLimit={x:!1,y:!1},this.totalInView=0,this._smooth=!1,this._shaking=0,this._smoothSpeed=null,this._position=new f,this._smoothPosition=new f,this._targetPosition=new f}var e=a(103),f=a(102),g=a(128);d.FOLLOW_LOCKON=0,d.FOLLOW_SMOOTH=1,d.FOLLOW_TOPDOWN=2,d.FOLLOW_TOPDOWN_TIGHT=3,d.prototype.constructor=d,d.prototype.shake=function(a){a=a||500,this._shaking=0,this.shakeTween&&this.shakeTween.stop(),this.shakeTween=this.game.tweens.create(this),this.shakeTween.to({_shaking:1},a/2),this.shakeTween.yoyo(!0),this.shakeTween.start()},d.prototype.follow=function(a,b){void 0===b&&(b=d.FOLLOW_SMOOTH),this.target=a;var f;switch(b){case d.FOLLOW_TOPDOWN:f=c.Math.max(this.width,this.height)/4,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_TOPDOWN_TIGHT:f=c.Math.max(this.width,this.height)/8,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_SMOOTH:this.smooth=!0,this.deadzone=null;break;case d.FOLLOW_LOCKON:default:this.deadzone=null}},d.prototype.update=function(){var a=this.view,b=this.displayObject,d=c.Math;this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.roundPx&&a.floor(),this._shaking&&(a.x+=(10*d.random()-5)*this._shaking,a.y+=(10*d.random()-5)*this._shaking),b.pivot.x=a.x+a.halfWidth,b.pivot.y=a.y+a.halfHeight},d.prototype.updateTarget=function(){var a,b,c=this._smoothPosition,d=this._targetPosition;d.copyFrom(this.target),this.deadzone?(this._edge=d.x-this.view.x,this._edge<this.deadzone.left?a=d.x-this.deadzone.left:this._edge>this.deadzone.right&&(a=d.x-this.deadzone.right),this._edge=d.y-this.view.y,this._edge<this.deadzone.top?b=d.y-this.deadzone.top:this._edge>this.deadzone.bottom&&(b=d.y-this.deadzone.bottom)):(a=d.x,b=d.y),this.smooth&&(!this._smooth&&d.distance(this.position)>this.smoothThreshhold&&(this._smooth=!0,this._smoothSpeed=0,this._smoothTween&&this._smoothTween.stop(),this._smoothTween=this.game.tweens.create(this),this._smoothTween.to({_smoothSpeed:1},1e3,g.Default,!0),this._smoothTween.once("complete",function(){this._smooth=!1},this)),this._smooth&&(c=f.interpolate(this.position,{x:a,y:b},this._smoothSpeed,c),a=c.x,b=c.y)),this.setPosition(a,b)},d.prototype.unfollow=function(){this.target=null},d.prototype.focusOn=function(a){this.setPosition(a.x,a.y)},d.prototype.focusOnXY=function(a,b){this.setPosition(a,b)},d.prototype.setBoundsToWorld=function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},d.prototype.checkBounds=function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<=this.bounds.x&&(this.atLimit.x=!0),this.view.right>=this.bounds.right&&(this.atLimit.x=!0),this.view.y<=this.bounds.top&&(this.atLimit.y=!0),this.view.bottom>=this.bounds.bottom&&(this.atLimit.y=!0)},d.prototype.setPosition=function(a,b){var c=this.view;c.x=a-c.halfWidth,c.y=b-c.halfHeight,this.bounds&&this.checkBounds()},d.prototype.pan=function(a,b){var c=this.view;c.x-=a,c.y-=b},d.prototype.setSize=function(a,b){var c=this.view,d=this.displayObject;c.width=a,c.height=b,d.x=c.halfWidth,d.y=c.halfHeight},d.prototype.reset=function(){this.view.x=0,this.view.y=0},Object.defineProperty(d.prototype,"x",{get:function(){return this.view.x},set:function(a){this.view.x=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.view.y},set:function(a){this.view.y=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"shaking",{get:function(){return this._shaking}}),Object.defineProperty(d.prototype,"position",{get:function(){return this._position.set(this.view.centerX,this.view.centerY),this._position},set:function(a){void 0!==a.x&&(this.view.x=a.x),void 0!==a.y&&(this.view.y=a.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"width",{get:function(){return this.view.width},set:function(a){this.view.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.view.height},set:function(a){this.view.height=a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,103:103,128:128}],76:[function(a,b,c){(function(c){function d(a){a||(a={}),this.config=a,this.width=a.width||800,this.height=a.height||600,this.enableDebug=a.enableDebug||!0,this.parent=a.parent||"",this.canvasID=a.canvasID||null,this.transparent=a.transparent||!1,this.autoResize=a.autoResize||!1,this.antialias=a.antialias||!1,this.forceFXAA=a.forceFXAA||!1,this.resolution=a.resolution||1,this.clearBeforeRender=a.clearBeforeRender||!0,this.preserveDrawingBuffer=a.preserveDrawingBuffer||!1,this.isBooted=!1,this.forceSingleUpdate=!1,this.currentUpdateID=0,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this._nextFpsNotification=0,this._paused=!1,this._codePaused=!1,this.rnd=new p([""+c.Date.now()*c.Math.random()]),this.state=new q(this,new r),g.whenReady(this.boot,this),f.call(this)}var e=a("pixi"),f=a(3),g=a(116),h=a(115),i=a(117),j=a(125),k=a(105),l=a(104),m=a(68),n=a(79),o=a(82),p=a(137),q=a(81),r=a(80),s=a(78),t=a(131),u=a(109),v=a(114),w=a(107);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.isBooted||(this.isBooted=!0,this.scale=new s(this,this.width,this.height),this.stage=new n(this),this.setupRenderer(),this.world=new o(this),this.cache=new l(this),this.load=new k(this),this.clock=new j(this),this.tweens=new t(this),this.input=new m(this),this.sound=new v(this),this.particles=new u(this),this.net=new w(this),this.clock.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.net.boot(),this.raf=new i(this,!1),this._kickstart=!0,this.raf.start())},d.prototype.setupRenderer=function(){if(this.canvas=h.create(this.width,this.height,this.canvasID),g.webGL!==!0)throw Error("WebGL support required");this.renderer=new e.WebGLRenderer(this.width,this.height,{view:this.canvas,transparent:this.transparent,autoResize:this.autoResize,resolution:this.resolution,antialias:this.antialias,clearBeforeRender:this.clearBeforeRender,preserveDrawingBuffer:this.preserveDrawingBuffer}),h.addToDOM(this.canvas,this.parent,!1),h.setUserSelect(this.canvas,"none"),h.setTouchAction(this.canvas,"none"),h.setContextMenu(this.canvas,!1),h.setSmoothingEnabled(this.canvas,!1)},d.prototype.update=function(a){if(this.clock.update(a),this._kickstart)return this.updateLogic(this.clock.desiredFpsMult),this.updateRender(this.clock.slowMotion*this.clock.desiredFps),void(this._kickstart=!1);if(this._spiraling>1&&!this.forceSingleUpdate)this.clock.time>this._nextFpsNotification&&(this._nextFpsNotification=this.clock.time+1e4,this.emit("spiraling")),this._deltaTime=0,this._spiraling=0,this.updateRender(this.clock.slowMotion*this.clock.desiredFps);else{var b=0,d=1e3*this.clock.slowMotion/this.clock.desiredFps;for(this._deltaTime+=c.Math.max(c.Math.min(3*d,this.clock.elapsed),0),this.updatesThisFrame=c.Math.floor(this._deltaTime/d),this.forceSingleUpdate&&(this.updatesThisFrame=c.Math.min(1,this.updatesThisFrame));this._deltaTime>=d&&(this._deltaTime-=d,this.currentUpdateID=b,this.updateLogic(this.clock.desiredFpsMult),b++,!this.forceSingleUpdate||1!==b);)this.clock.refresh();b>this._lastCount?this._spiraling++:b<this._lastCount&&(this._spiraling=0),this._lastCount=b,this.updateRender(this._deltaTime/d)}},d.prototype.updateLogic=function(a){this._paused?(this.scale.pauseUpdate(),this.state.pauseUpdate()):(this.scale.preUpdate(),this.state.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.input.update(),this.sound.update(),this.particles.update())},d.prototype.updateRender=function(a){this.state.preRender(a),this.renderer.render(this.stage)},d.prototype.destroy=function(){this.raf.stop(),this.state.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.sound.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.clock=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1)},d.prototype.gamePaused=function(a){this._paused||(this._paused=!0,this.clock.gamePaused(),this.sound.setMute(),this.emit("game/pause",a))},d.prototype.gameResumed=function(a){this._paused&&!this._codePaused&&(this._paused=!1,this.clock.gameResumed(),this.input.reset(),this.sound.unsetMute(),this.emit("game/resume",a))},d.prototype.focusLoss=function(a){this.emit("game/blur",a),this.stage.disableVisibilityChange||this.gamePaused(a)},d.prototype.focusGain=function(a){this.emit("game/focus",a),this.stage.disableVisibilityChange||this.gameResumed(a)},Object.defineProperty(d.prototype,"paused",{get:function(){return this._paused},set:function(a){a===!0?(this._paused===!1&&(this._paused=!0,this.sound.setMute(),this.clock.gamePaused(),this.emit("pause",event)),this._codePaused=!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.clock.gameResumed(),this.emit("resume",event)),this._codePaused=!1)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{104:104,105:105,107:107,109:109,114:114,115:115,116:116,117:117,125:125,131:131,137:137,3:3,68:68,78:78,79:79,80:80,81:81,82:82,pixi:"pixi"}],77:[function(a,b,c){function d(a,b){void 0===typeof b&&(b=a.world),e.Container.call(this),this.game=a,this.z=0,this.type=f.GROUP,this.pendingDestroy=!1,this.exists=!0,b&&(this.z=b.children.length,b.addChild(this))}var e=a("pixi"),f=a(66),g=a(132);d.RETURN_NONE=0,d.RETURN_TOTAL=1,d.RETURN_CHILD=2,d.SORT_ASCENDING=-1,d.SORT_DESCENDING=1,d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.add=function(a,b){return void 0===b&&(b=!1),a.parent!==this&&(this.addChild(a),a.z=this.children.length),a},d.prototype.addAt=function(a,b,c){return void 0===c&&(c=!1),a.parent!==this&&this.addChildAt(a,b),a},d.prototype.getFirstExists=function(a){return"boolean"!=typeof a&&(a=!0),this.iterate("exists",a,d.RETURN_CHILD)},d.prototype.iterate=function(a,b,c,e,f,g){var h,i;if(c===d.RETURN_TOTAL&&0===this.children.length)return 0;for(h=0,i=0;i<this.children.length;i++)if(this.children[i][a]===b&&(h++,e&&(g?(g[0]=this.children[i],e.apply(f,g)):e.call(f,this.children[i])),c===d.RETURN_CHILD))return this.children[i];return c===d.RETURN_TOTAL?h:null},d.prototype.filter=function(a,b){for(var c,d=-1,e=this.children.length,f=[];++d<e;)c=this.children[d],(!b||b&&c.exists)&&a(c,d,this.children)&&f.push(c);return new g(f)},d.prototype.forEach=function(a,b,c){var d,e;if(void 0===c&&(c=!1),arguments.length<=3)for(d=0;d<this.children.length;d++)(!c||c&&this.children[d].exists)&&a.call(b,this.children[d]);else{for(e=[null],d=3;d<arguments.length;d++)e.push(arguments[d]);for(d=0;d<this.children.length;d++)(!c||c&&this.children[d].exists)&&(e[0]=this.children[d],a.apply(b,e))}},d.prototype.swap=function(a,b){this.swapChildren(a,b)},d.prototype.remove=function(a,b,c){if(0===this.children.length||-1===this.children.indexOf(a))return!1;void 0===b&&(b=!1),void 0===c&&(c=!1);var d=this.removeChild(a);return b&&d&&d.destroy(!0),!0},d.prototype.removeAll=function(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=!1),0!==this.children.length){var c;do c=this.removeChild(this.children[0]),a&&c&&c.destroy(!0);while(this.children.length>0)}},d.prototype.update=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var a=this.children.length;a--;)this.children[a].update()},d.prototype.destroy=function(a,b){null===this.game||this.ignoreDestroy||(void 0===a&&(a=!0),void 0===b&&(b=!1),this.removeAll(a),this.removeAllListeners(),this.filters=null,this.pendingDestroy=!1,b||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},b.exports=d},{132:132,66:66,pixi:"pixi"}],78:[function(a,b,c){(function(c){function d(a,b,g){this.game=a,this.dom={getScreenOrientation:function(){},getOffset:function(){},visualBounds:{width:c.Math.max(c.innerWidth,c.document.documentElement.clientWidth),height:c.Math.max(c.innerHeight,c.document.documentElement.clientHeight)}},this.dom.layoutBounds=this.dom.visualBounds,this.width=0,this.height=0,this.event=null,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.sourceAspectRatio=0,this.aspectRatio=0,this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new f,this.offset=new e,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.screenOrientation=this.dom.getScreenOrientation(),this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.scaleFactor=new e(1,1),this.scaleFactorInversed=new e(1,1),this.windowConstraints={right:"",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=d.RESIZE,
this._fullScreenScaleMode=d.RESIZE,this.trackParentInterval=2e3,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new e(1,1),this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new f,this._userScaleFactor=new e(1,1),this._userScaleTrim=new e(0,0),this._booted=!1,this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._resolutionLow=1024,this._resolutionMedium=1280,this._resolutionMaximum=1366,this._resolutionMode="auto",this._parentBounds=new f,this._tempBounds=new f,this._lastReportedCanvasSize=new f,this._lastReportedGameSize=new f,a.config&&this.parseConfig(a.config),this.setupScale(b,g),this.game.on("fpsProblem",function(){this.resolutionMode="low",this.scaleMode=d.EXACT_FIT,this.fullScreenScaleMode=d.EXACT_FIT,this.refresh()},this)}var e=a(102),f=a(103),g=a(116),h=a(136),i=a(66);d.EXACT_FIT=0,d.NO_SCALE=1,d.SHOW_ALL=2,d.RESIZE=3,d.USER_SCALE=4,d.prototype={boot:function(){var a,b=this.compatibility;b.supportsFullScreen=g.fullscreen,g.desktop?(b.orientationFallback="screen",b.clickTrampoline="when-not-mouse"):(b.orientationFallback="",b.clickTrampoline=""),a=this,this._orientationChange=function(b){return a.orientationChange(b)},this._windowResize=function(b){return a.windowResize(b)},c.addEventListener("orientationchange",this._orientationChange,!1),c.addEventListener("resize",this._windowResize,!1),b.supportsFullScreen&&(this._fullScreenChange=function(b){return a.fullScreenChange(b)},this._fullScreenError=function(b){return a.fullScreenError(b)},c.document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.addEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this._booted=!0,this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(a){a.scaleMode&&(this._booted?this.scaleMode=a.scaleMode:this._pendingScaleMode=a.scaleMode),a.fullScreenScaleMode&&(this.fullScreenScaleMode=a.fullScreenScaleMode),a.fullScreenTarget&&(this.fullScreenTarget=a.fullScreenTarget)},setupScale:function(a,b){var d,e,g,h=new f;""!==this.game.parent&&("string"==typeof this.game.parent?d=c.document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(d=this.game.parent)),d?(this.parentNode=d,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),h.width=this._parentBounds.width,h.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,h.width=this.dom.visualBounds.width,h.height=this.dom.visualBounds.height,this.offset.set(0,0)),e=0,g=0,"number"==typeof a?e=a:(this.parentScaleFactor.x=parseInt(a,10)/100,e=h.width*this.parentScaleFactor.x),"number"==typeof b?g=b:(this.parentScaleFactor.y=parseInt(b,10)/100,g=h.height*this.parentScaleFactor.y),this._gameSize.setTo(0,0,e,g),this.updateDimensions(e,g,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(a,b,c){this._gameSize.setTo(0,0,a,b),this.updateDimensions(a,b,!0),c||this.queueUpdate(!0)},setUserScale:function(a,b,c,d){this._userScaleFactor.setTo(a,b),this._userScaleTrim.setTo(0|c,0|d),this.queueUpdate(!0)},setResizeCallback:function(a,b){this.onResize=a,this.onResizeContext=b},signalSizeChange:function(){var a,b;f.sameDimensions(this,this._lastReportedCanvasSize)&&f.sameDimensions(this.game,this._lastReportedGameSize)||(a=this.width,b=this.height,this._lastReportedCanvasSize.setTo(0,0,a,b),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.game.state.resize(this.game.width,this.game.height))},setMinMax:function(a,b,c,d){this.minWidth=a,this.minHeight=b,void 0!==c&&(this.maxWidth=c),void 0!==d&&(this.maxHeight=d)},preUpdate:function(){var a,b,d,e,f,g,i;this.game.clock.time<this._lastUpdate+this._updateThrottle||(a=this._updateThrottle,this._updateThrottleReset=a>=400?0:100,this.dom.getOffset(this.game.canvas,this.offset),b=this._parentBounds.width,d=this._parentBounds.height,e=this.getParentBounds(this._parentBounds),f=e.width!==b||e.height!==d,g=this.updateOrientationState(),(f||g)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,e),this.updateLayout(),this.signalSizeChange()),i=2*this._updateThrottle,this._updateThrottle<a&&(i=c.Math.min(a,this._updateThrottleReset)),this._updateThrottle=h.clamp(i,25,this.trackParentInterval),this._lastUpdate=this.game.clock.time)},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(a,b,c){this.width=a*this.parentScaleFactor.x,this.height=b*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),c&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(a,b){void 0===b&&(b=!1),this.forceLandscape=a,this.forcePortrait=b,this.queueUpdate(!0)},classifyOrientation:function(a){return"portrait-primary"===a||"portrait-secondary"===a?"portrait":"landscape-primary"===a||"landscape-secondary"===a?"landscape":null},updateOrientationState:function(){var a,b,c=this.screenOrientation,d=this.incorrectOrientation;return this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait,a=c!==this.screenOrientation,b=d!==this.incorrectOrientation,b&&this.incorrectOrientation,a||b},orientationChange:function(a){this.event=a,this.queueUpdate(!0)},windowResize:function(a){this.event=a,this.queueUpdate(!0)},refresh:function(){this.queueUpdate(!0)},updateLayout:function(){var a,b=this.currentScaleMode;return b===d.RESIZE?void this.reflowGame():(this.compatibility.forceMinimumDocumentHeight&&(c.document.documentElement.style.minHeight=c.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():b===d.EXACT_FIT?this.setExactFit():b===d.SHOW_ALL?!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent?(this.setShowAll(!0),this.resetCanvas(),this.setShowAll()):this.setShowAll():b===d.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):b===d.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),this.compatibility.canExpandParent||b!==d.SHOW_ALL&&b!==d.USER_SCALE||(a=this.getParentBounds(this._tempBounds),this.width=c.Math.min(this.width,a.width),this.height=c.Math.min(this.height,a.height)),this.width=0|this.width,this.height=0|this.height,void this.reflowCanvas())},getParentBounds:function(a){var b,d,e,g,h=a||new f,i=this.boundingParent,j=this.dom.visualBounds,k=this.dom.layoutBounds;return i?(b=i.getBoundingClientRect(),d=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect(),h.setTo(b.left-d.left,b.top-d.top,b.width,b.height),e=this.windowConstraints,e.right&&(g="layout"===e.right?k:j,h.right=c.Math.min(h.right,g.width)),e.bottom&&(g="layout"===e.bottom?k:j,h.bottom=c.Math.min(h.bottom,g.height))):h.setTo(0,0,j.width,j.height),h.setTo(c.Math.round(h.x),c.Math.round(h.y),c.Math.round(h.width),c.Math.round(h.height)),h},alignCanvas:function(a,b){var d,e,f,g,h=this.getParentBounds(this._tempBounds),i=this.game.canvas,j=this.margin;a&&(j.left=j.right=0,d=i.getBoundingClientRect(),this.width<h.width&&!this.incorrectOrientation&&(e=d.left-h.x,f=h.width/2-this.width/2,f=c.Math.max(f,0),g=f-e,j.left=c.Math.round(g)),i.style.marginLeft=j.left+"px",0!==j.left&&(j.right=-(h.width-d.width-j.left),i.style.marginRight=j.right+"px")),b&&(j.top=j.bottom=0,d=i.getBoundingClientRect(),this.height<h.height&&!this.incorrectOrientation&&(e=d.top-h.y,f=h.height/2-this.height/2,f=c.Math.max(f,0),g=f-e,j.top=c.Math.round(g)),i.style.marginTop=j.top+"px",0!==j.top&&(j.bottom=-(h.height-d.height-j.top),i.style.marginBottom=j.bottom+"px")),j.x=j.left,j.y=j.top},reflowGame:function(){var a=this.getParentBounds(this._tempBounds),b=a.width,c=a.height,d=this._resolutionMaximum;d>b?(this.resetCanvas("",""),this.updateDimensions(b,c,!0)):(this.setExactFit(),this.reflowCanvas())},reflowCanvas:function(){this.incorrectOrientation||(this.width=h.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=h.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(a,b){void 0===a&&(a=this.width+"px"),void 0===b&&(b=this.height+"px");var c=this.game.canvas;this.compatibility.noMargins||(c.style.marginLeft="",c.style.marginTop="",c.style.marginRight="",c.style.marginBottom=""),c.style.width=a,c.style.height=b},queueUpdate:function(a){a&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(a){},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(a){var b,d=this.getParentBounds(this._tempBounds),e=d.width,f=d.height;b=a?c.Math.max(f/this.game.height,e/this.game.width):c.Math.min(f/this.game.height,e/this.game.width),this.width=c.Math.round(this.game.width*b),this.height=c.Math.round(this.game.height*b)},setExactFit:function(){var a=this.getParentBounds(this._tempBounds),b=a.width,d=a.height,e=this.resolution,f=this.resolution*(d/b);this.setGameSize(e,f,!0),this.width=b,this.height=d,this.isFullScreen||(this.maxWidth&&(this.width=c.Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=c.Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var a=c.document.createElement("div");return a.style.margin="0",a.style.padding="0",a.style.background="#000",a},startFullScreen:function(a,b){var c,d,e,f,h,j;return this.isFullScreen?!1:this.compatibility.supportsFullScreen?"when-not-mouse"===this.compatibility.clickTrampoline&&(d=this.game.input,d.activePointer&&d.activePointer!==d.mousePointer&&(b||b!==!1))?void d.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[a,!1]):(void 0!==a&&this.game.renderType===i.CANVAS&&(this.game.stage.smoothed=a),e=this.fullScreenTarget,e||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),e=this._createdFullScreenTarget),f={targetElement:e},this._createdFullScreenTarget&&(h=this.game.canvas,j=h.parentNode,j.insertBefore(e,h),e.appendChild(h)),g.fullscreenKeyboard?e[g.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):e[g.requestFullscreen](),!0):(c=this,void setTimeout(function(){c.fullScreenError()},10))},stopFullScreen:function(){return this.isFullScreen&&this.compatibility.supportsFullScreen?(c.document[g.cancelFullscreen](),!0):!1},cleanupCreatedTarget:function(){var a,b=this._createdFullScreenTarget;b&&b.parentNode&&(a=b.parentNode,a.insertBefore(this.game.canvas,b),a.removeChild(b)),this._createdFullScreenTarget=null},prepScreenMode:function(a){var b=!!this._createdFullScreenTarget,c=this._createdFullScreenTarget||this.fullScreenTarget;a?(b||this.fullScreenScaleMode===d.EXACT_FIT)&&c!==this.game.canvas&&(this._fullScreenRestore={targetWidth:c.style.width,targetHeight:c.style.height},c.style.width="100%",c.style.height="100%"):(this._fullScreenRestore&&(c.style.width=this._fullScreenRestore.targetWidth,c.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(a){this.event=a,this.isFullScreen?(this.prepScreenMode(!0),this.updateLayout(),this.queueUpdate(!0)):(this.prepScreenMode(!1),this.cleanupCreatedTarget(),this.updateLayout(),this.queueUpdate(!0))},fullScreenError:function(a){this.event=a,this.cleanupCreatedTarget(),console.warn("ScaleManager: requestFullscreen failed or device does not support the Fullscreen API")},scaleSprite:function(a,b,d,e){var f,g,h,i,j;return void 0===b&&(b=this.width),void 0===d&&(d=this.height),void 0===e&&(e=!1),a&&a.scale?(a.scale.x=1,a.scale.y=1,a.width<=0||a.height<=0||0>=b||0>=d?a:(f=b,g=a.height*b/a.width,h=a.width*d/a.height,i=d,j=h>b,j=j?e:!e,j?(a.width=c.Math.floor(f),a.height=c.Math.floor(g)):(a.width=c.Math.floor(h),a.height=c.Math.floor(i)),a)):a},destroy:function(){this.game.onResume.remove(this._gameResumed,this),c.removeEventListener("orientationchange",this._orientationChange,!1),c.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(c.document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(d.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){return a!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=a),this._scaleMode}}),Object.defineProperty(d.prototype,"resolutionMode",{get:function(){return this._resolutionMode},set:function(a){this._resolutionMode=a}}),Object.defineProperty(d.prototype,"resolution",{get:function(){switch(this._resolutionMode){case"max":return this._resolutionMaximum;case"medium":return this._resolutionMedium;case"low":return this._resolutionLow;default:return this._resolutionMaximum}}}),Object.defineProperty(d.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(a){return a!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=a,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=a),this._fullScreenScaleMode}}),Object.defineProperty(d.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(d.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(a){a!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(a){a!==this._pageAlignVertically&&(this._pageAlignVertically=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"isFullScreen",{get:function(){return!!(c.document.fullscreenElement||c.document.webkitFullscreenElement||c.document.mozFullScreenElement||c.document.msFullscreenElement)}}),Object.defineProperty(d.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(d.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,103:103,116:116,136:136,66:66}],79:[function(a,b,c){(function(c){function d(a){e.Container.call(this),this.game=a,this.exists=!0,this.disableVisibilityChange=!1,this.currentRenderOrderID=0,this._onChange=null,this._hiddenVar=null}var e=a("pixi");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.checkVisibility()},d.prototype.update=function(){this.currentRenderOrderID=0;for(var a=this.children.length;a--;)this.children[a].update();this.game.world.camera.update()},d.prototype.checkVisibility=function(){void 0!==c.document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==c.document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==c.document.msHidden?this._hiddenVar="msvisibilitychange":void 0!==c.document.hidden?this._hiddenVar="visibilitychange":this._hiddenVar=null;var a=this;this._onChange=function(b){return a.visibilityChange(b)},this._hiddenVar&&c.document.addEventListener(this._hiddenVar,this._onChange,!1),c.onblur=this._onChange,c.onfocus=this._onChange,c.onpagehide=this._onChange,c.onpageshow=this._onChange},d.prototype.visibilityChange=function(a){return"pagehide"===a.type||"blur"===a.type||"pageshow"===a.type||"focus"===a.type?void("pagehide"===a.type||"blur"===a.type?this.game.focusLoss(a):("pageshow"===a.type||"focus"===a.type)&&this.game.focusGain(a)):void(this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===a.type?this.game.gamePaused(a):this.game.gameResumed(a)))},d.prototype.destroy=function(){e.Container.prototype.destroy.call(this)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{pixi:"pixi"}],80:[function(a,b,c){function d(){this.game=null,this.key=""}d.prototype={init:function(a){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},d.prototype.constructor=d,b.exports=d},{}],81:[function(a,b,c){function d(a,b){this.game=a,this.states={},this.backgroundStates={},this._current="",this._pendingBackgroundStates=[],this._pendingState=b||null,this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.callbackContext=null,this.backgroundStateContext=null,e.call(this)}var e=a(3);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.boot=function(){null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},d.prototype.add=function(a,b,c,d){return c=c||!1,d=d||!1,d===!1?this.states[a]=b:this.backgroundStates[a]=b,c&&(d?this._pendingBackgroundStates.push(a):this.game.isBooted?this.start(a):this._pendingState=a),b},d.prototype.remove=function(a){this._current===a&&(this.callbackContext=null),delete this.states[a]},d.prototype.checkState=function(a){return this.states[a]?!0:(console.warn("StateManager - No state found with the key: "+a),!1)},d.prototype.start=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!1),this.checkState(a)&&(this._pendingState=a,this._clearWorld=b,this._clearCache=c,arguments.length>3&&(this._args=Array.prototype.splice.call(arguments,3)))},d.prototype.restart=function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!1),this._pendingState=this._current,this._clearWorld=a,this._clearCache=b,arguments.length>2&&(this._args=Array.prototype.slice.call(arguments,2))},d.prototype.clearCurrentState=function(){this._current&&(this.callbackContext.shutdown&&this.callbackContext.shutdown(),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.clock.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache===!0&&this.game.cache.destroy()))},d.prototype.clearBackgroundStates=function(){var a,b=this.backgroundStates;for(a in b)b[a].shutdown()},d.prototype.setCurrentBackgroundState=function(a){this.backgroundStateContext=this.backgroundStates[a],this.backgroundStateContext.game=this.game,this.backgroundStateContext.init(),this.game._kickstart=!0},d.prototype.setCurrentState=function(a){this._current=a,this._created=!1,this.callbackContext=this.states[a],this.states[a].game=this.game,this.callbackContext.init&&this.callbackContext.init(this._args),a===this._pendingState&&(this._args=[]),this.game._kickstart=!0},d.prototype.getBackgroundState=function(a){return this.backgroundStates[a]},d.prototype.preUpdate=function(){if(!this.backgroundStateContext)if(this._pendingBackgroundStates.length>0)this.setCurrentBackgroundState(this._pendingBackgroundStates.pop()),this.backgroundStateContext.preload?(this.backgroundStateContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.backgroundLoadComplete():this.game.load.start()):this.backgroundLoadComplete();else if(this._pendingState&&this.game.isBooted){var a=this._current;if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.emit("stateChange",this._current,a),this._current!==this._pendingState)return;this._pendingState=null,this.callbackContext.preload?(this.game.load.reset(!0),this.callbackContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},d.prototype.loadComplete=function(){this._created===!1&&(this._created=!0,this.callbackContext.create&&this.callbackContext.create())},d.prototype.backgroundLoadComplete=function(){this.backgroundStateContext.create(),this.backgroundStateContext=null},d.prototype.pause=function(){this._created&&this.callbackContext.paused&&this.callbackContext.paused()},d.prototype.resume=function(){this._created&&this.callbackContext.resumed&&this.callbackContext.resumed()},d.prototype.update=function(){this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete()),this._created?this.callbackContext.update&&this.callbackContext.update():this.callbackContext&&(this.callbackContext.loadUpdate&&!this.game.load.hasLoaded?this.callbackContext.loadUpdate():this.game.load.hasLoaded&&this.loadComplete())},d.prototype.pauseUpdate=function(){this._created?this.callbackContext.pauseUpdate&&this.callbackContext.pauseUpdate():this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete())},d.prototype.preRender=function(a){this._created&&this.callbackContext.preRender&&this.callbackContext.preRender(a)},d.prototype.resize=function(a,b){this._created&&this.callbackContext.resize&&this.callbackContext.resize(a,b);for(var c in this.backgroundStates)this.backgroundStates[c].resize(a,b)},d.prototype.render=function(){this._created?this.callbackContext.render&&this.callbackContext.render():this.callbackContext.loadRender&&this.callbackContext.loadRender()},d.prototype.destroy=function(){this.clearCurrentState(),this.clearBackgroundStates(),this.callbackContext=null,this.game=null,this.states={},this.backgroundStates={},this._current="",this._pendingState=null},Object.defineProperty(d.prototype,"current",{get:function(){return this.states[this._current]}}),Object.defineProperty(d.prototype,"hasPendingState",{get:function(){return null!==this._pendingState||this._pendingBackgroundStates.length>0}}),Object.defineProperty(d.prototype,"pendingLength",{get:function(){return this._pendingBackgroundStates.length+(null!==this._pendingState?1:0)}}),b.exports=d},{3:3}],82:[function(a,b,c){(function(c){function d(a){f.call(this,a,null),this.game=a,this.camera=null,this.bounds=new e(0,0,a.width,a.height),this._definedSize=!1,this.game.on("state/change",this.stateChange,this)}var e=a(103),f=a(77),g=a(75);a(102);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.background=new f(this.game,this.game.stage),this.foreground=new f(this.game,this.game.stage),this.camera=new g(this.game,0,0,this.game.width,this.game.height),this.camera.displayObject=this,this.game.camera=this.camera,this.game.stage.addChild(this)},d.prototype.setBounds=function(a,b,d,e){this._definedSize=!0,this._width=d,this._height=e,this.bounds.setTo(a,b,d,e),this.camera.bounds&&this.camera.bounds.setTo(a,b,c.Math.max(d,this.game.width),c.Math.max(e,this.game.height))},d.prototype.update=function(){var a=this.background,b=this.foreground;this.camera.view;a.x=this.x,a.y=this.y,a.pivot.x=this.pivot.x/6,a.pivot.y=this.pivot.y/6,a.scale.x=this.scale.x/3+.5,a.scale.y=this.scale.y/3+.5,b.x=this.x,b.y=this.y,b.pivot.x=this.pivot.x/4,b.pivot.y=this.pivot.y/4,b.scale.x=this.scale.x/2+.5,b.scale.y=this.scale.y/2+.5,f.prototype.update.call(this)},d.prototype.resize=function(a,b){},d.prototype.stateChange=function(){this.camera.reset()},d.prototype.shutdown=function(){this.destroy(!0,!0)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,103:103,75:75,77:77}],83:[function(a,b,c){function d(a){this.type=f.GRAPHICS,this.objectRenderer="graphics",e.Graphics.call(this),g.init.call(this,a,"",null)}var e=a("pixi"),f=a(66),g=a(91),h=a(92),j=a(94),k=a(102),l=a(93);d.prototype=Object.create(e.Graphics.prototype),d.prototype.constructor=d,g.install.call(d.prototype,["Mixin","AutoCull","Bounds","Destroy","FixedToCamera","InWorld","InputEnabled","Overlap"]),d.prototype.preUpdateInWorld=j.preUpdate,d.prototype.preUpdateCore=g.preUpdate,d.prototype.preUpdateFixedToCamera=l.preUpdate,d.prototype.update=function(){this.preUpdateInWorld(),this.preUpdateCore(),this.preUpdateFixedToCamera()},d.prototype.destroy=function(a){this.clear(),h.prototype.destroy.call(this,a)},d.prototype.drawTriangle=function(a,b){var c,d,e,f,g;void 0===b&&(b=!1),c=new Polygon(a),b?(d=new k(this.game.camera.x-a[0].x,this.game.camera.y-a[0].y),e=new k(a[1].x-a[0].x,a[1].y-a[0].y),f=new k(a[1].x-a[2].x,a[1].y-a[2].y),g=f.cross(e),d.dot(g)>0&&this.drawPolygon(c)):this.drawPolygon(c)},d.prototype.drawTriangles=function(a,b,c){void 0===c&&(c=!1);var d=new k;if(point2=new k,point3=new k,points=[],i,b)if(a[0]instanceof k)for(i=0;i<b.length/3;i++)points.push(a[b[3*i]]),points.push(a[b[3*i+1]]),points.push(a[b[3*i+2]]),3===points.length&&(this.drawTriangle(points,c),points=[]);else for(i=0;i<b.length;i++)d.x=a[2*b[i]],d.y=a[2*b[i]+1],points.push(d.copyTo({})),3===points.length&&(this.drawTriangle(points,c),points=[]);else if(a[0]instanceof k)for(i=0;i<a.length/3;i++)this.drawTriangle([a[3*i],a[3*i+1],a[3*i+2]],c);else for(i=0;i<a.length/6;i++)d.x=a[6*i+0],d.y=a[6*i+1],point2.x=a[6*i+2],point2.y=a[6*i+3],point3.x=a[6*i+4],point3.y=a[6*i+5],this.drawTriangle([d,point2,point3],c)},d.prototype._renderWebGL=function(a){this.glDirty&&(this.dirty=!0,this.glDirty=!1),a.setObjectRenderer(a.plugins[this.objectRenderer]),a.plugins[this.objectRenderer].render(this)},b.exports=d},{102:102,66:66,91:91,92:92,93:93,94:94,pixi:"pixi"}],84:[function(a,b,c){(function(c){function d(a,b,d){e.call(this,a,b,d),this.position=new f(0,0),this.vector=new f(0,0),this.velocity=new f(0,0),this.drag=new f(0,0),this.angularVelocity=0,this.angularDrag=0,this.autoScale=!1,this.autoAlpha=!1,this.scaleData=null,this.alphaData=null,this.tintData=null,this._s=0,this._a=0,this._t=0,this.rotation=c.Math.random()*c.Math.PI}var e=a(86),f=a(102);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.game.clock.elapsedMS/1e3;this.rotation+=this.angularVelocity*a,this.position.add(this.velocity.x*this.vector.x*a,this.velocity.y*this.vector.y*a),this.autoScale||this.autoAlpha||this.autoTint||(this.exists=!1),this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1),this.autoTint&&(this._t--,this._t?this.tint=this.tintData[this._t].color:this.autoTint=!1)},d.prototype.onEmit=function(){},d.prototype.setAlphaData=function(a){this.alphaData=a,this._a=a.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},d.prototype.setScaleData=function(a){this.scaleData=a,this._s=a.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},d.prototype.setTintData=function(a){this.tintData=a,this._t=a.length-1,this.tint=this.tintData[this._t].color,this.autoTint=!0},d.prototype.reset=function(a,b){return this.position.set(a,b),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,86:86}],85:[function(a,b,c){function d(a,b,c){return a.cache.checkImageKey(b)?(void 0===c&&(c={}),void 0===c.chars&&(c.chars=d.TEXT_SET),this.type=f.RETROFONT,this.align="left",this.currentText="",this.grabData=[],this.image=a.cache.getImage(b,!0),this.characterWidth=c.characterWidth||this.image.data.width/c.chars.length,this.characterHeight=c.characterHeight||this.image.data.height,this.characterSpacingX=c.xSpacing||0,this.characterSpacingY=c.ySpacing||0,this.characterPerRow=c.charsPerRow||this.image.data.width/this.characterWidth,this.offsetX=c.xOffset||0,this.offsetY=c.yOffset||0,this.multiLine=!1,this.autoUpperCase=!0,this.fixedWidth=0,this.customSpacingX=0,this.customSpacingY=0,this.frameData=new i,this.stamp=new g(a,b),this.generateFrameData(c.chars),void e.RenderTexture.call(this,a.renderer,100,100,e.SCALE_MODES.NEAREST)):(console.warn("RetroFont - Can't find font:"+b),!1)}var e=a("pixi"),f=a(66),g=a(86),h=a(64),i=a(65);d.prototype=Object.create(e.RenderTexture.prototype),d.prototype.constructor=d,d.ALIGN_LEFT="left",d.ALIGN_RIGHT="right",d.ALIGN_CENTER="center",d.TEXT_SET="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-.%+/",d.prototype.setFixedWidth=function(a,b){void 0===b&&(b="left"),this.fixedWidth=a,this.align=b},d.prototype.setText=function(a,b,c,d,e,f){this.multiLine=b||!1,this.customSpacingX=c||0,this.customSpacingY=d||0,this.align=e||"left",f?this.autoUpperCase=!1:this.autoUpperCase=!0,a.length>0&&(this.text=a)},d.prototype.buildRetroFontText=function(){var a,b,c=0,e=0;if(this.clear(),this.multiLine)for(a=this.currentText.split("\n"),this.fixedWidth>0?this.resize(this.fixedWidth,a.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),a.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0),
b=0;b<a.length;b++)c=0,this.align===d.ALIGN_RIGHT?c=this.width-a[b].length*(this.characterWidth+this.customSpacingX):this.align===d.ALIGN_CENTER&&(c=this.width/2-a[b].length*(this.characterWidth+this.customSpacingX)/2,c+=this.customSpacingX/2),0>c&&(c=0),this.pasteLine(a[b],c,e,this.customSpacingX),e+=this.characterHeight+this.customSpacingY;else this.fixedWidth>0?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this.currentText.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),c=0,this.align===d.ALIGN_RIGHT?c=this.width-this.currentText.length*(this.characterWidth+this.customSpacingX):this.align===d.ALIGN_CENTER&&(c=this.width/2-this.currentText.length*(this.characterWidth+this.customSpacingX)/2,c+=this.customSpacingX/2),0>c&&(c=0),this.pasteLine(this.currentText,c,0,this.customSpacingX);this.requiresReTint=!0},d.prototype.pasteLine=function(a,b,c,d){var f,g=new e.Matrix;for(f=0;f<a.length;f++)if(" "===a.charAt(f))b+=this.characterWidth+d;else if(this.grabData[a.charCodeAt(f)]>=0&&(g.tx=b,g.ty=c,this.stamp.setFrame(this.frameData.getFrame(this.grabData[a.charCodeAt(f)])),this.render(this.stamp,g,!1,!1),b+=this.characterWidth+d,b>this.width))break},d.prototype.getLongestLine=function(){var a,b,c=0;if(this.currentText.length>0)for(a=this.currentText.split("\n"),b=0;b<a.length;b++)a[b].length>c&&(c=a[b].length);return c},d.prototype.removeUnsupportedCharacters=function(a){var b,c,d,e="";for(b=0;b<this.currentText.length;b++)c=this.currentText[b],d=c.charCodeAt(0),(this.grabData[d]>=0||!a&&"\n"===c)&&(e=e.concat(c));return e},d.prototype.generateFrameData=function(a){var b,c,d=0,e=this.offsetX,f=this.offsetY;for(c=0;c<a.length;c++)b=this.frameData.addFrame(new h(c,e,f,this.characterWidth,this.characterHeight)),this.grabData[a.charCodeAt(c)]=b.index,d++,d===this.characterPerRow?(d=0,e=this.offsetX,f+=this.characterHeight+this.characterSpacingY):e+=this.characterWidth+this.characterSpacingX},Object.defineProperty(d.prototype,"text",{get:function(){return this.currentText},set:function(a){var b;b=this.autoUpperCase?a.toUpperCase():a,b!==this.currentText&&(this.currentText=b,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())}}),Object.defineProperty(d.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(a){this.stamp.smoothed=a,this.buildRetroFontText()}}),b.exports=d},{64:64,65:65,66:66,86:86,pixi:"pixi"}],86:[function(a,b,c){function d(a,b,c){b=b||null,c=c||null,this.type=f.SPRITE,e.Sprite.call(this),h.init.call(this,a,b,c)}var e=a("pixi"),f=a(66),g=(a(102),a(103)),h=a(91),i=a(94),j=a(93);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,h.install.call(d.prototype,["Mixin","Animation","AutoCull","Bounds","Destroy","FixedToCamera","LoadTexture","InWorld","InputEnabled","Overlap"]),d.prototype.preUpdateCore=h.preUpdate,d.prototype.preUpdateInWorld=i.preUpdate,d.prototype.preUpdateFixedToCamera=j.preUpdate,d.prototype.update=function(){this.preUpdateInWorld(),this.preUpdateCore(),this.preUpdateFixedToCamera()},d.prototype.getBounds=function(a){return this._currentBounds||(this._currentBounds=(new g).copyFrom(e.Sprite.prototype.getBounds.call(this,a))),this._currentBounds},b.exports=d},{102:102,103:103,66:66,91:91,93:93,94:94,pixi:"pixi"}],87:[function(a,b,c){function d(a,b,c){b=b||null,c=c||[],this.points=[],this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,this.type=f.STRIP,e.mesh.Rope.call(this,a.cache.getItem("__default",g.TEXTURE).texture,c),h.init.call(this,a,b)}var e=a("pixi"),f=a(66),g=a(104),h=a(91);d.prototype=Object.create(e.mesh.Rope.prototype),d.prototype.constructor=d,h.install.call(d.prototype,["Mixin","Bounds","Destroy","LoadTexture"]),d.prototype.preUpdateCore=h.preUpdate,d.prototype.update=function(){this.preUpdateCore(),this._hasUpdateAnimation&&this.updateAnimation.call(this)},Object.defineProperty(d.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(a){a&&"function"==typeof a?(this._hasUpdateAnimation=!0,this._updateAnimation=a):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),b.exports=d},{104:104,66:66,91:91,pixi:"pixi"}],88:[function(a,b,c){function d(){}d.prototype={play:function(a,b,c,d){return this.animations?this.animations.play(a,b,c,d):void 0}},b.exports=d},{}],89:[function(a,b,c){function d(){}d.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},b.exports=d},{}],90:[function(a,b,c){function d(){}d.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},left:{get:function(){return this.x-this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX}},top:{get:function(){return this.y-this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY}}},b.exports=d},{}],91:[function(a,b,c){function d(){}var e=a(134),f=a(102),g=(a(103),a(62)),h=a(97),i=a(88),j=a(96),k=a(89),l=a(94),m=a(90),n=a(95),o=a(93),p=a(92),q=a(98);d.modules={Mixin:h,Animation:i,LoadTexture:j,AutoCull:k,InWorld:l,Bounds:m,InputEnabled:n,FixedToCamera:o,Destroy:p,Overlap:q},d.install=function(a){var b,c,f;for(e.mixinPrototype(this,d.prototype),this.components={},f=0;f<a.length;f++)b=a[f],c="Destroy"===b?!0:!1,e.mixinPrototype(this,d.modules[b].prototype,c),this.components[b]=!0},d.init=function(a,b,c){this.game=a,this.key=b,this.components.Animation&&(this.animations=new g(this)),this.components.LoadTexture&&null!==b&&this.loadTexture(b,c),this.components.FixedToCamera&&(this.cameraOffset=new f(this.x,this.y))},d.preUpdate=function(){return this.pendingDestroy?void this.destroy():this.exists&&this.parent.exists?(this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),!0):(this.renderOrderID=-1,!1)},d.prototype={game:null,name:"",components:{},z:0,animations:void 0,key:"",debug:!1,renderOrderID:0,pendingDestroy:!1,_exists:!0,exists:{get:function(){return this._exists},set:function(a){a?(this._exists=!0,this.visible=!0):(this._exists=!1,this.visible=!1)}},update:function(){}},b.exports=d},{102:102,103:103,134:134,62:62,88:88,89:89,90:90,92:92,93:93,94:94,95:95,96:96,97:97,98:98}],92:[function(a,b,c){function d(){}var e=a("pixi"),f=a(77);d.prototype={destroyPhase:!1,destroy:function(a){if(null!==this.game&&!this.destroyPhase){void 0===a&&(a=!0),this.destroyPhase=!0,this.parent&&(this.parent instanceof f?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy();var b=this.children.length;if(a)for(;b--;)this.children[b].destroy(a);else for(;b--;)this.removeChild(this.children[b]);this._frame&&(this._frame=null),this.alive=!1,this.exists=!1,this.visible=!1,this.game=null,this.renderable=!1,e.Sprite.prototype.destroy.call(this),this.destroyPhase=!1,this.pendingDestroy=!1}}},b.exports=d},{77:77,pixi:"pixi"}],93:[function(a,b,c){function d(){}var e=a(102);d.preUpdate=function(){var a=this.game;this.fixedToCamera&&(this.position.x=a.camera.x,this.position.y=a.camera.y)},d.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(a){a?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new e},b.exports=d},{102:102}],94:[function(a,b,c){function d(){}var e=a(103);d.preUpdate=function(){var a,b=this.game;(this.autoCull||this.checkWorldBounds)&&(this.autoCullBounds.copyFrom(this.getBounds()),this.autoCullBounds.x+=b.camera.view.x,this.autoCullBounds.y+=b.camera.view.y,this.autoCull&&(a=b.world.camera.view.intersects(this.autoCullBounds),this.autoCullFired&&a?(this.autoCullFired=!1,this.renderable=!0,b.world.camera.totalInView++):this.autoCullFired||a||(this.autoCullFired=!0,this.renderable=!1,b.world.camera.totalInView--)),this.checkWorldBounds&&(this.outOfBoundsFired&&a?(this.outOfBoundsFired=!1,this.emit("enterBounds",this)):this.outOfBoundsFired||a||(this.outOfBoundsFired=!0,this.emit("exitBounds",this))))},d.prototype={autoCullBounds:new e,autoCullFired:!0,checkWorldBounds:!1,outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},b.exports=d},{103:103}],95:[function(a,b,c){function d(){}var e=a(69);d.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(a){a?null===this.input?(this.input=new e(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},b.exports=d},{69:69}],96:[function(a,b,c){function d(){}var e=a("pixi"),f=a(103);d.prototype={customRender:!1,_frame:null,loadTexture:function(a,b,c){(c||void 0===c)&&this.animations&&this.animations.stop(),this.key=a,this.customRender=!1;var d=!0,g=!this.texture.baseTexture.scaleMode;a instanceof e.RenderTexture||a instanceof e.Texture?this.texture=a:(img=this.game.cache.getImage(a,!0),this.key=img.key,this.texture=new e.Texture(img.base),this.animations&&(d=!this.animations.loadFrameData(img.frameData,b||0))),d&&(this._frame=f.clone(this.texture.frame)),g||(this.texture.baseTexture.scaleMode=1),img.base.isPowerOfTwo&&(img.base.mipmap=!0)},setFrame:function(a){this._frame=a,this.texture.frame.x=a.x,this.texture.frame.y=a.y,this.texture.frame.width=a.width,this.texture.frame.height=a.height,this.texture.crop.x=a.x,this.texture.crop.y=a.y,this.texture.crop.width=a.width,this.texture.crop.height=a.height,a.trimmed?(this.texture.trim?(this.texture.trim.x=a.spriteSourceSizeX,this.texture.trim.y=a.spriteSourceSizeY,this.texture.trim.width=a.sourceSizeW,this.texture.trim.height=a.sourceSizeH):this.texture.trim={x:a.spriteSourceSizeX,y:a.spriteSourceSizeY,width:a.sourceSizeW,height:a.sourceSizeH},this.texture.width=a.sourceSizeW,this.texture.height=a.sourceSizeH,this.texture.frame.width=a.sourceSizeW,this.texture.frame.height=a.sourceSizeH):!a.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(a,b,c){this.texture.frame.resize(b,c),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(a){this.animations.frame=a}}},b.exports=d},{103:103,pixi:"pixi"}],97:[function(a,b,c){function d(){}var e=a(134);d.prototype={mixinPrototype:function(a){e.mixinPrototype(this,a,!0)}},b.exports=d},{134:134}],98:[function(a,b,c){function d(){}var e=a(103);d.prototype={overlap:function(a){return e.intersects(this.getBounds(),a)}},b.exports=d},{103:103}],99:[function(a,b,c){(function(c){function d(a,b,c){a=a||0,b=b||0,c=c||0,this.x=a,this.y=b,this._radius=c,c>0?this._diameter=2*c:this._diameter=0,this.type=e.CIRCLE}var e=a(66),f=a(102),g=a(103),h=a(136);d.prototype={circumference:function(){return 2*(h.PI*this._radius)},random:function(a,b){var d,e,g,h,i;return void 0===a&&(a=!1),void 0===b&&(b=new f),d=2*c.Math.PI*c.Math.random(),e=c.Math.random()+c.Math.random(),g=e>1?2-e:e,h=g*c.Math.cos(d),i=g*c.Math.sin(d),a?(b.x=h*this.radius,b.y=i*this.radius):(b.x=this.x+h*this.radius,b.y=this.y+i*this.radius),b},getBounds:function(){return new g(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(a,b,c){return this.x=a,this.y=b,this._radius=c,this._diameter=2*c,this},copyFrom:function(a){return this.setTo(a.x,a.y,a.diameter)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.radius=this._radius,a},distance:function(a,b){var d=h.distance(this.x,this.y,a.x,a.y);return b?c.Math.round(d):d},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.diameter):a.setTo(this.x,this.y,this.diameter),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},circumferenceAngle:function(a){return d.circumferenceAngle(this,a)},offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},toString:function(){return"[{Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"diameter",{get:function(){return this._diameter},set:function(a){a>0&&(this._diameter=a,this._radius=.5*a)}}),Object.defineProperty(d.prototype,"radius",{get:function(){return this._radius},set:function(a){a>0&&(this._radius=a,this._diameter=2*a)}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x-this._radius},set:function(a){a>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this._radius},set:function(a){a<this.x?(this._radius=0,this._diameter=0):this.radius=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y-this._radius},set:function(a){a>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(a){a<this.y?(this._radius=0,this._diameter=0):this.radius=a-this.y}}),Object.defineProperty(d.prototype,"area",{get:function(){return this._radius>0?c.Math.PI*this._radius*this._radius:0}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this._diameter},set:function(a){a===!0&&this.setTo(0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.radius>0&&b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom?(d=(a.x-b)*(a.x-b),e=(a.y-c)*(a.y-c),d+e<=a.radius*a.radius):!1},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.diameter==b.diameter},d.intersects=function(a,b){return h.distance(a.x,a.y,b.x,b.y)<=a.radius+b.radius},d.circumferencePoint=function(a,b,d,e,g){return void 0===d&&(d=!1),void 0===e&&(e=!1),void 0===g&&(g=new f),d===!0&&(b=h.degToRad(b)),e?(g.x=a.radius*c.Math.cos(b),g.y=a.radius*c.Math.sin(b)):(g.x=a.x+a.radius*c.Math.cos(b),g.y=a.y+a.radius*c.Math.sin(b)),g},d.circumferenceAngle=function(a,b){return c.Math.atan2(b.y-a.y,b.x-a.x)},d.intersectsRectangle=function(a,b){var d,e,f,g,h,i,j,k=c.Math.abs(a.x-b.x-b.halfWidth),l=b.halfWidth+a.radius;return k>l?!1:(d=c.Math.abs(a.y-b.y-b.halfHeight),e=b.halfHeight+a.radius,d>e?!1:k<=b.halfWidth||d<=b.halfHeight?!0:(f=k-b.halfWidth,g=d-b.halfHeight,h=f*f,i=g*g,j=a.radius*a.radius,j>=h+i))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,103:103,136:136,66:66}],100:[function(a,b,c){(function(c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=e.ELLIPSE}var e=a(66),f=a(103),g=a(102);d.prototype={setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},getBounds:function(){return new f(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},random:function(a){var b,d;return void 0===a&&(a=new g),b=c.Math.random()*c.Math.PI*2,d=c.Math.random(),a.x=c.Math.sqrt(d)*c.Math.cos(b),a.y=c.Math.sqrt(d)*c.Math.sin(b),a.x=this.x+a.x*this.width/2,a.y=this.y+a.y*this.height/2,a},toString:function(){return"[{Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){this.y=a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.width<=0||a.height<=0?!1:(d=(b-a.x)/a.width-.5,e=(c-a.y)/a.height-.5,d*=d,e*=e,.25>d+e)},d.circumferencePoint=function(a,b,d,e){return void 0===d&&(d=!1),void 0===e&&(e=new g),d===!0&&(b=c.Math.degToRad(b)),e.x=a.x+a.width*c.Math.cos(b),e.y=a.y+a.height*c.Math.sin(b),e},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,103:103,66:66}],101:[function(a,b,c){(function(c){function d(a,b,c,d){4===arguments.length?(a=a||0,b=b||0,c=c||0,d=d||0,this.start=new f(a,b),this.end=new f(c,d)):(this.start=(new f).copyFrom(a),this.end=(new f).copyFrom(b)),this.type=e.LINE}var e=a(66),f=a(102),g=a(136);d.prototype={setTo:function(a,b,c,d){return this.start.setTo(a,b),this.end.setTo(c,d),this},fromSprite:function(a,b,c){return void 0===c&&(c=!1),c?this.setTo(a.center.x,a.center.y,b.center.x,b.center.y):this.setTo(a.x,a.y,b.x,b.y)},fromAngle:function(a,b,d,e){return this.start.setTo(a,b),this.end.setTo(a+c.Math.cos(d)*e,b+c.Math.sin(d)*e),this},rotate:function(a,b){var c=(this.start.x+this.end.x)/2,d=(this.start.y+this.end.y)/2;return this.start.rotate(c,d,a,b),this.end.rotate(c,d,a,b),this},rotateAround:function(a,b,c,d){return this.start.rotate(a,b,c,d),this.end.rotate(a,b,c,d),this},intersects:function(a,b,c){return d.intersectsPoints(this.start,this.end,a.start,a.end,b,c)},reflect:function(a){return d.reflect(this,a)},midPoint:function(a){return void 0===a&&(a=new f),a.x=(this.start.x+this.end.x)/2,a.y=(this.start.y+this.end.y)/2,a},centerOn:function(a,b){var c=(this.start.x+this.end.x)/2,d=(this.start.y+this.end.y)/2,e=a-c,f=b-d;return this.start.add(e,f),this.end.add(e,f),this},pointOnLine:function(a,b){return(a-this.start.x)*(this.end.y-this.start.y)===(this.end.x-this.start.x)*(b-this.start.y)},pointOnSegment:function(a,b){var d=c.Math.min(this.start.x,this.end.x),e=c.Math.max(this.start.x,this.end.x),f=c.Math.min(this.start.y,this.end.y),g=c.Math.max(this.start.y,this.end.y);return this.pointOnLine(a,b)&&a>=d&&e>=a&&b>=f&&g>=b},pointAtDistance:function(a,b){return d.pointAtDistance(this.start,this.end,a,b)},random:function(a){void 0===a&&(a=new f);var b=c.Math.random();return a.x=this.start.x+b*(this.end.x-this.start.x),a.y=this.start.y+b*(this.end.y-this.start.y),a},coordinatesOnLine:function(a,b){var d,e,f,g,h,i,j,k,l,m,n;for(void 0===a&&(a=1),void 0===b&&(b=[]),d=c.Math.round(this.start.x),e=c.Math.round(this.start.y),f=c.Math.round(this.end.x),g=c.Math.round(this.end.y),h=c.Math.abs(f-d),i=c.Math.abs(g-e),j=f>d?1:-1,k=g>e?1:-1,l=h-i,b.push([d,e]),m=1;d!=f||e!=g;)n=l<<1,n>-i&&(l-=i,d+=j),h>n&&(l+=h,e+=k),m%a===0&&b.push([d,e]),m++;return b},clone:function(a){return void 0===a||null===a?a=new d(this.start.x,this.start.y,this.end.x,this.end.y):a.setTo(this.start.x,this.start.y,this.end.x,this.end.y),a}},Object.defineProperty(d.prototype,"length",{get:function(){return c.Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(d.prototype,"angle",{get:function(){return c.Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(d.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(d.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))}}),Object.defineProperty(d.prototype,"vector",{get:function(){return new f(this.end.x-this.start.x,this.end.y-this.start.y)}}),Object.defineProperty(d.prototype,"x",{get:function(){return c.Math.min(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"y",{get:function(){return c.Math.min(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.min(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.max(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.min(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.max(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"width",{get:function(){return c.Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(d.prototype,"height",{get:function(){return c.Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(d.prototype,"normalX",{get:function(){return c.Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(d.prototype,"normalY",{get:function(){return c.Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(d.prototype,"normalAngle",{get:function(){return g.wrap(this.angle-1.5707963267948966,-c.Math.PI,c.Math.PI)}}),d.pointAtDistance=function(a,b,c,d){return void 0===d&&(d=new f),d.setTo(b.x-a.x,b.y-a.y),d.normalize(),d.multiply(c,c),d.x=a.x+d.x,d.y=a.y+d.y,d},d.intersectsPoints=function(a,b,c,d,e,g){var h,i,j,k,l,m,n,o,p,q;return void 0===e&&(e=!0),void 0===g&&(g=new f),h=b.y-a.y,i=d.y-c.y,j=a.x-b.x,k=c.x-d.x,l=b.x*a.y-a.x*b.y,m=d.x*c.y-c.x*d.y,n=h*k-i*j,0===n?null:(g.x=(j*m-k*l)/n,g.y=(i*l-h*m)/n,e?(o=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y),p=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/o,q=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/o,p>=0&&1>=p&&q>=0&&1>=q?g:null):g)},d.intersects=function(a,b,c,e){return d.intersectsPoints(a.start,a.end,b.start,b.end,c,e)},d.reflect=function(a,b){return 2*b.normalAngle-3.141592653589793-a.angle},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,136:136,66:66}],102:[function(a,b,c){(function(c){function d(a,b){a=a||0,b=b||0,this.x=a,this.y=b,this.type=e.POINT}var e=a(66),f=a(136);d.prototype={copyFrom:function(a){return this.setTo(a.x,a.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},set:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},add:function(a,b){return this.x+=a,this.y+=b,this},subtract:function(a,b){return this.x-=a,this.y-=b,this},multiply:function(a,b){return this.x*=a,this.y*=b,this},divide:function(a,b){return this.x/=a,this.y/=b,this},clampX:function(a,b){return this.x=f.clamp(this.x,a,b),this},clampY:function(a,b){return this.y=f.clamp(this.y,a,b),this},clamp:function(a,b){return this.x=f.clamp(this.x,a,b),this.y=f.clamp(this.y,a,b),this},toFixed:function(a){return a=a||2,this.x=f.roundTo(this.x,a),this.y=f.roundTo(this.y,a),this},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y):a.setTo(this.x,this.y),a},copyTo:function(a){return a.x=this.x,a.y=this.y,a},distance:function(a,b){return d.distance(this,a,b)},equals:function(a){return a.x===this.x&&a.y===this.y},angle:function(a,b){return void 0===b&&(b=!1),b?f.radToDeg(c.Math.atan2(a.y-this.y,a.x-this.x)):c.Math.atan2(a.y-this.y,a.x-this.x)},rotate:function(a,b,c,e,f){return d.rotate(this,a,b,c,e,f)},getMagnitude:function(){return c.Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(a){return this.normalize().multiply(a,a)},normalize:function(){if(!this.isZero()){var a=this.getMagnitude();this.x/=a,this.y/=a}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},interpolate:function(a,b,c){return d.interpolate(this,a,b,c)},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(c.Math.floor(this.x),c.Math.floor(this.y))},ceil:function(){return this.setTo(c.Math.ceil(this.x),c.Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},d.prototype.constructor=d,d.add=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x+b.x,c.y=a.y+b.y,c},d.subtract=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x-b.x,c.y=a.y-b.y,c},d.multiply=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x*b.x,c.y=a.y*b.y,c},d.divide=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x/b.x,c.y=a.y/b.y,c},d.equals=function(a,b){return a.x===b.x&&a.y===b.y},d.angle=function(a,b){var d=c.Math.atan2(a.y-b.y,a.x-b.x);return 0>d&&(d+=2*c.Math.PI),d},d.negative=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.x,-a.y)},d.multiplyAdd=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+b.x*c,a.y+b.y*c)},d.interpolate=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+(b.x-a.x)*c,a.y+(b.y-a.y)*c)},d.perp=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.y,a.x)},d.rperp=function(a,b){return void 0===b&&(b=new d),b.setTo(a.y,-a.x)},d.distance=function(a,b,d){var e=f.distance(a.x,a.y,b.x,b.y);return d?c.Math.round(e):e},d.project=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b)/b.getMagnitudeSq();return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.projectUnit=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b);return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.normalRightHand=function(a,b){return void 0===b&&(b=new d),b.setTo(-1*a.y,a.x)},d.normalize=function(a,b){void 0===b&&(b=new d);var c=a.getMagnitude();return 0!==c&&b.setTo(a.x/c,a.y/c),b},d.rotate=function(a,b,d,e,g,h){var i,j,k,l,m;return g&&(e=f.degToRad(e)),void 0===h?(a.subtract(b,d),i=c.Math.sin(e),j=c.Math.cos(e),k=j*a.x-i*a.y,l=i*a.x+j*a.y,a.x=k+b,a.y=l+d):(m=e+c.Math.atan2(a.y-d,a.x-b),a.x=b+h*c.Math.cos(m),a.y=d+h*c.Math.sin(m)),a},d.centroid=function(a,b){var c,e;if(void 0===b&&(b=new d),"[object Array]"!==Object.prototype.toString.call(a))throw Error("Point. Parameter 'points' must be an array");if(c=a.length,1>c)throw Error("Point. Parameter 'points' array must not be empty");if(1===c)return b.copyFrom(a[0]),b;for(e=0;c>e;e++)d.add(b,a[e],b);return b.divide(c,c),b},d.parse=function(a,b,c){b=b||"x",c=c||"y";var e=new d;return a[b]&&(e.x=parseInt(a[b],10)),a[c]&&(e.y=parseInt(a[c],10)),e},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{136:136,66:66}],103:[function(a,b,c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=e.RECTANGLE}var e=a(66),f=a(102);d.prototype={offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},scale:function(a,b){return void 0===b&&(b=a),this.width*=a,this.height*=b,this},centerOn:function(a,b){return this.centerX=a,this.centerY=b,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},inflate:function(a,b){return d.inflate(this,a,b)},size:function(a){return d.size(this,a)},resize:function(a,b){return this.width=a,this.height=b,this},clone:function(a){return d.clone(this,a)},contains:function(a,b){return d.contains(this,a,b)},containsRect:function(a){return d.containsRect(a,this)},equals:function(a){return d.equals(this,a)},intersection:function(a,b){return d.intersection(this,a,b)},intersects:function(a){return d.intersects(this,a)},intersectsRaw:function(a,b,c,e,f){return d.intersectsRaw(this,a,b,c,e,f)},union:function(a,b){return d.union(this,a,b)},random:function(a){return void 0===a&&(a=new f),a.x=this.randomX,a.y=this.randomY,a},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(d.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"bottomLeft",{get:function(){return new f(this.x,this.bottom)},set:function(a){this.x=a.x,this.bottom=a.y}}),Object.defineProperty(d.prototype,"bottomRight",{get:function(){return new f(this.right,this.bottom)},set:function(a){this.right=a.x,this.bottom=a.y}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(d.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(d.prototype,"center",{get:function(){return new f(this.centerX,this.centerY)}}),Object.defineProperty(d.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(a){this.x=a-this.halfWidth}}),Object.defineProperty(d.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(a){this.y=a-this.halfHeight}}),Object.defineProperty(d.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(d.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){a>=this.bottom?(this.height=0,this.y=a):this.height=this.bottom-a}}),Object.defineProperty(d.prototype,"topLeft",{get:function(){return new f(this.x,this.y)},set:function(a){this.x=a.x,this.y=a.y}}),Object.defineProperty(d.prototype,"topRight",{get:function(){return new f(this.x+this.width,this.y)},set:function(a){this.right=a.x,this.y=a.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.inflate=function(a,b,c){return a.x-=b,a.width+=2*b,a.y-=c,a.height+=2*c,a},d.inflatePoint=function(a,b){return d.inflate(a,b.x,b.y)},d.size=function(a,b){return void 0===b||null===b?b=new f(a.width,a.height):b.setTo(a.width,a.height),b},d.clone=function(a,b){return void 0===b||null===b?b=new d(a.x,a.y,a.width,a.height):b.setTo(a.x,a.y,a.width,a.height),b},d.contains=function(a,b,c){return a.width<=0||a.height<=0?!1:b>=a.x&&b<a.right&&c>=a.y&&c<a.bottom},d.containsRaw=function(a,b,c,d,e,f){return e>=a&&a+c>e&&f>=b&&b+d>f},d.containsPoint=function(a,b){return d.contains(a,b.x,b.y)},d.containsRect=function(a,b){return a.volume>b.volume?!1:a.x>=b.x&&a.y>=b.y&&a.right<b.right&&a.bottom<b.bottom},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.width==b.width&&a.height==b.height},d.sameDimensions=function(a,b){return a.width===b.width&&a.height===b.height},d.intersection=function(a,b,c){return void 0===c&&(c=new d),d.intersects(a,b)&&(c.x=Math.max(a.x,b.x),c.y=Math.max(a.y,b.y),c.width=Math.min(a.right,b.right)-c.x,c.height=Math.min(a.bottom,b.bottom)-c.y),c},d.intersects=function(a,b){return a.width<=0||a.height<=0||b.width<=0||b.height<=0?!1:!(a.right<b.x||a.bottom<b.y||a.x>b.right||a.y>b.bottom);
},d.intersectsRaw=function(a,b,c,d,e,f){return void 0===f&&(f=0),!(b>a.right+f||c<a.left-f||d>a.bottom+f||e<a.top-f)},d.union=function(a,b,c){return void 0===c&&(c=new d),c.setTo(Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.right,b.right)-Math.min(a.left,b.left),Math.max(a.bottom,b.bottom)-Math.min(a.top,b.top))},d.aabb=function(a,b){void 0===b&&(b=new d);var c=Number.MIN_VALUE,e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE;return a.forEach(function(a){a.x>c&&(c=a.x),a.x<e&&(e=a.x),a.y>f&&(f=a.y),a.y<g&&(g=a.y)}),b.setTo(e,g,c-e,f-g),b},b.exports=d},{102:102,66:66}],104:[function(a,b,c){function d(a){this.game=a,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this._cacheMap=[],this._cacheMap[d.CANVAS]=this._cache.canvas,this._cacheMap[d.IMAGE]=this._cache.image,this._cacheMap[d.TEXTURE]=this._cache.texture,this._cacheMap[d.SOUND]=this._cache.sound,this._cacheMap[d.TEXT]=this._cache.text,this._cacheMap[d.PHYSICS]=this._cache.physics,this._cacheMap[d.TILEMAP]=this._cache.tilemap,this._cacheMap[d.BINARY]=this._cache.binary,this._cacheMap[d.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[d.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[d.JSON]=this._cache.json,this._cacheMap[d.XML]=this._cache.xml,this._cacheMap[d.VIDEO]=this._cache.video,this._cacheMap[d.SHADER]=this._cache.shader,this._cacheMap[d.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addDefaultTexture(),this.addMissingImage()}var e=a("pixi"),f=a(105),g=a(64),h=a(65),i=a(63),j=a(134);d.CANVAS=1,d.IMAGE=2,d.TEXTURE=3,d.SOUND=4,d.TEXT=5,d.PHYSICS=6,d.TILEMAP=7,d.BINARY=8,d.BITMAPDATA=9,d.BITMAPFONT=10,d.JSON=11,d.XML=12,d.VIDEO=13,d.SHADER=14,d.RENDER_TEXTURE=15,d.prototype={addCanvas:function(a,b,c){void 0===c&&(c=b.getContext("2d")),this._cache.canvas[a]={canvas:b,context:c}},addImage:function(a,b,c){this.checkImageKey(a)&&this.removeImage(a);var d=new e.BaseTexture(c),f={key:a,url:b,data:c,base:d,frame:new g(0,0,0,c.width,c.height,a),frameData:new h};f.frameData.addFrame(new g(0,0,0,c.width,c.height,b)),this._cache.image[a]=f,this._resolveURL(b,f),e.utils.BaseTextureCache[a]=d,d.resolution=e.utils.getResolutionOfUrl(b)},addDefaultImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this.addImage("__default",null,a)},addMissingImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this.addImage("__missing",null,a)},addDefaultTexture:function(){var a=this.getImage("__default",!0).base,b=new e.Texture(a);this.addTexture("__default",b)},addSound:function(a,b,c,d,e){void 0===d&&(d=!0,e=!1),void 0===e&&(d=!1,e=!0);var f=!1;e&&(f=!0),this._cache.sound[a]={url:b,data:c,isDecoding:!1,decoded:f,webAudio:d,audioTag:e,locked:this.game.sound.touchLocked},this._resolveURL(b,this._cache.sound[a])},addText:function(a,b,c){this._cache.text[a]={url:b,data:c},this._resolveURL(b,this._cache.text[a])},addTilemap:function(a,b,c){this._cache.tilemap[a]={url:b,data:c},this._resolveURL(b,this._cache.tilemap[a])},addBinary:function(a,b){this._cache.binary[a]=b},addBitmapData:function(a,b,c){return b.key=a,void 0===c&&(c=new h,c.addFrame(b.textureFrame)),this._cache.bitmapData[a]={data:b,frameData:c},b},addJSON:function(a,b,c){this._cache.json[a]={url:b,data:c},this._resolveURL(b,this._cache.json[a])},addXML:function(a,b,c){this._cache.xml[a]={url:b,data:c},this._resolveURL(b,this._cache.xml[a])},addShader:function(a,b,c){this._cache.shader[a]={url:b,data:c},this._resolveURL(b,this._cache.shader[a])},addRenderTexture:function(a,b){this._cache.renderTexture[a]={texture:b,frame:new g(0,0,0,b.width,b.height,"","")}},addTexture:function(a,b){this._cache.texture[a]={texture:b}},addSpriteSheet:function(a,b,c,d,f,g,h,j){void 0===g&&(g=-1),void 0===h&&(h=0),void 0===j&&(j=0);var k={key:a,url:b,data:c,frameWidth:d,frameHeight:f,margin:h,spacing:j,base:new e.BaseTexture(c),frameData:i.spriteSheet(this.game,c,d,f,g,h,j)};this._cache.image[a]=k,this._resolveURL(b,k)},addTextureAtlas:function(a,b,c,d,g){var h={key:a,url:b,data:c,base:new e.BaseTexture(c)};g===f.TEXTURE_ATLAS_JSON_PYXEL?h.frameData=i.JSONDataPyxel(this.game,d,a):Array.isArray(d.frames)?h.frameData=i.JSONData(this.game,d,a):h.frameData=i.JSONDataHash(this.game,d,a),this._cache.image[a]=h,this._resolveURL(b,h)},reloadSound:function(a){var b=this,c=this.getSound(a);c&&(c.data.src=c.url,c.data.addEventListener("canplaythrough",function(){return b.reloadSoundComplete(a)},!1),c.data.load())},reloadSoundComplete:function(a){var b=this.getSound(a);b&&(b.locked=!1,this.onSoundUnlock.dispatch(a))},updateSound:function(a,b,c){var d=this.getSound(a);d&&(d[b]=c)},decodedSound:function(a,b){var c=this.getSound(a);c.data=b,c.decoded=!0,c.isDecoding=!1},isSoundDecoded:function(a){var b=this.getItem(a,d.SOUND,"isSoundDecoded");return b?b.decoded:void 0},isSoundReady:function(a){var b=this.getItem(a,d.SOUND,"isSoundDecoded");return b?b.decoded&&!this.game.sound.touchLocked:void 0},checkKey:function(a,b){return this._cacheMap[a][b]?!0:!1},checkURL:function(a){return this._urlMap[this._resolveURL(a)]?!0:!1},checkCanvasKey:function(a){return this.checkKey(d.CANVAS,a)},checkImageKey:function(a){return this.checkKey(d.IMAGE,a)},checkTextureKey:function(a){return this.checkKey(d.TEXTURE,a)},checkSoundKey:function(a){return this.checkKey(d.SOUND,a)},checkTextKey:function(a){return this.checkKey(d.TEXT,a)},checkTilemapKey:function(a){return this.checkKey(d.TILEMAP,a)},checkBinaryKey:function(a){return this.checkKey(d.BINARY,a)},checkBitmapDataKey:function(a){return this.checkKey(d.BITMAPDATA,a)},checkJSONKey:function(a){return this.checkKey(d.JSON,a)},checkXMLKey:function(a){return this.checkKey(d.XML,a)},checkShaderKey:function(a){return this.checkKey(d.SHADER,a)},checkRenderTextureKey:function(a){return this.checkKey(d.RENDER_TEXTURE,a)},getItem:function(a,b,c,d){return this.checkKey(b,a)?void 0===d?this._cacheMap[b][a]:this._cacheMap[b][a][d]:(c&&console.warn("Cache."+c+': Key "'+a+'" not found in Cache.'),null)},getCanvas:function(a){return this.getItem(a,d.CANVAS,"getCanvas","canvas")},getImage:function(a,b){(void 0===a||null===a)&&(a="__default"),void 0===b&&(b=!1);var c=this.getItem(a,d.IMAGE,"getImage");return null===c&&(c=this.getItem("__missing",d.IMAGE,"getImage")),b?c:c.data},getTextureFrame:function(a){return this.getItem(a,d.TEXTURE,"getTextureFrame","frame")},getSound:function(a){return this.getItem(a,d.SOUND,"getSound")},getSoundData:function(a){return this.getItem(a,d.SOUND,"getSoundData","data")},getText:function(a){return this.getItem(a,d.TEXT,"getText","data")},getTilemapData:function(a){return this.getItem(a,d.TILEMAP,"getTilemapData")},getBinary:function(a){return this.getItem(a,d.BINARY,"getBinary")},getBitmapData:function(a){return this.getItem(a,d.BITMAPDATA,"getBitmapData","data")},getJSON:function(a,b){var c=this.getItem(a,d.JSON,"getJSON","data");return c?b?j.extend(!0,c):c:null},getXML:function(a){return this.getItem(a,d.XML,"getXML","data")},getShader:function(a){return this.getItem(a,d.SHADER,"getShader","data")},getRenderTexture:function(a){return this.getItem(a,d.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getBaseTexture","base")},getFrame:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getFrame","frame")},getFrameCount:function(a,b){var c=this.getFrameData(a,b);return c?c.total:0},getFrameData:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getFrameData","frameData")},hasFrameData:function(a,b){return void 0===b&&(b=d.IMAGE),null!==this.getItem(a,b,"","frameData")},updateFrameData:function(a,b,c){void 0===c&&(c=d.IMAGE),this._cacheMap[c][a]&&(this._cacheMap[c][a].frameData=b)},getFrameByIndex:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrame(b):null},getFrameByName:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrameByName(b):null},getPixiTexture:function(a){return e.TextureCache[a]?e.TextureCache[a]:(console.warn('Cache.getPixiTexture: Invalid key: "'+a+'"'),null)},getPixiBaseTexture:function(a){return e.BaseTextureCache[a]?e.BaseTextureCache[a]:(console.warn('Cache.getPixiBaseTexture: Invalid key: "'+a+'"'),null)},getURL:function(a){var a=this._resolveURL(a);return a?this._urlMap[a]:(console.warn('Cache.getUrl: Invalid url: "'+a+'" or Cache.autoResolveURL was false'),null)},getKeys:function(a){var b,c;if(void 0===a&&(a=d.IMAGE),b=[],this._cacheMap[a])for(c in this._cacheMap[a])"__default"!==c&&"__missing"!==c&&b.push(c);return b},removeCanvas:function(a){delete this._cache.canvas[a]},removeImage:function(a){var b=this.getImage(a,!0);b.base.destroy(),delete this._cache.image[a]},removeSound:function(a){delete this._cache.sound[a]},removeText:function(a){delete this._cache.text[a]},removeTilemap:function(a){delete this._cache.tilemap[a]},removeBinary:function(a){delete this._cache.binary[a]},removeBitmapData:function(a){delete this._cache.bitmapData[a]},removeJSON:function(a){delete this._cache.json[a]},removeXML:function(a){delete this._cache.xml[a]},removeShader:function(a){delete this._cache.shader[a]},removeRenderTexture:function(a){delete this._cache.renderTexture[a]},removeSpriteSheet:function(a){delete this._cache.spriteSheet[a]},removeTextureAtlas:function(a){delete this._cache.atlas[a]},_resolveURL:function(a,b){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+a,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",b&&(this._urlMap[this._urlTemp]=b),this._urlTemp):null},destroy:function(){var a,b,c;for(a=0;a<this._cacheMap.length;a++){b=this._cacheMap[a];for(c in b)"__default"!==c&&"__missing"!==c&&(b[c].destroy&&b[c].destroy(),delete b[c])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},d.prototype.constructor=d,b.exports=d},{105:105,134:134,63:63,64:64,65:65,pixi:"pixi"}],105:[function(a,b,c){(function(c){function d(a){this.game=a,this.cache=a.cache,this.isLoading=!1,this.hasLoaded=!1,this.resetLocked=!1,this.crossOrigin=!1,this.baseURL="",this.path="",this.useXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=6,this._withSyncPointDepth=0,this._warnedAboutXDomainRequest=!1,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0,g.call(this)}var e=(a(66),a(136)),f=(a(119),a(116)),g=a(3);d.TEXTURE_ATLAS_JSON_ARRAY=0,d.TEXTURE_ATLAS_JSON_HASH=1,d.TEXTURE_ATLAS_JSON_PYXEL=2,d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.checkKeyExists=function(a,b){return this.getAssetIndex(a,b)>-1},d.prototype.getAssetIndex=function(a,b){var c,d,e=-1;for(c=0;c<this._fileList.length&&(d=this._fileList[c],d.type!==a||d.key!==b||(e=c,d.loaded||d.loading));c++);return e},d.prototype.getAsset=function(a,b){var c=this.getAssetIndex(a,b);return c>-1?{index:c,file:this._fileList[c]}:!1},d.prototype.reset=function(a,b){void 0===b&&(b=!1),this.resetLocked||(this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,b&&this.removeAllListeners())},d.prototype.addToFileList=function(a,b,c,d,e,f){var g,h,i,j;if(void 0===e&&(e=!1),void 0===b||""===b)return console.warn("Loader: Invalid or no key given of type "+a),this;if(void 0===c||null===c){if(!f)return console.warn("Loader: No URL given for file type: "+a+" key: "+b),this;c=b+f}if(g={type:a,key:b,path:this.path,url:c,syncPoint:this._withSyncPointDepth>0,data:null,loading:!1,loaded:!1,error:!1},d)for(h in d)g[h]=d[h];return i=this.getAssetIndex(a,b),e&&i>-1?(j=this._fileList[i],j.loading||j.loaded?(this._fileList.push(g),this._totalFileCount++):this._fileList[i]=g):-1===i&&(this._fileList.push(g),this._totalFileCount++),this},d.prototype.replaceInFileList=function(a,b,c,d){return this.addToFileList(a,b,c,d,!0)},d.prototype.image=function(a,b,c){return this.addToFileList("image",a,b,void 0,c,".png")},d.prototype.text=function(a,b,c){return this.addToFileList("text",a,b,void 0,c,".txt")},d.prototype.json=function(a,b,c){return this.addToFileList("json",a,b,void 0,c,".json")},d.prototype.shader=function(a,b,c){return this.addToFileList("shader",a,b,void 0,c,".frag")},d.prototype.xml=function(a,b,c){return this.addToFileList("xml",a,b,void 0,c,".xml")},d.prototype.script=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("script",a,b,{syncPoint:!0,callback:c,callbackContext:d},!1,".js")},d.prototype.binary=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("binary",a,b,{callback:c,callbackContext:d},!1,".bin")},d.prototype.spritesheet=function(a,b,c,d,e,f,g){return void 0===e&&(e=-1),void 0===f&&(f=0),void 0===g&&(g=0),this.addToFileList("spritesheet",a,b,{frameWidth:c,frameHeight:d,frameMax:e,margin:f,spacing:g},!1,".png")},d.prototype.audio=function(a,b,c){return this.game.sound.noAudio?this:(void 0===c&&(c=!0),"string"==typeof b&&(b=[b]),this.addToFileList("audio",a,b,{buffer:null,autoDecode:c}))},d.prototype.audiosprite=function(a,b,c,d,e){return this.game.sound.noAudio?this:(void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0),this.audio(a,b,e),c?this.json(a+"-audioatlas",c):d?("string"==typeof d&&(d=JSON.parse(d)),this.cache.addJSON(a+"-audioatlas","",d)):console.warn("Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"),this)},d.prototype.tilemap=function(a,b,c){return void 0===b&&(b=null),void 0===c&&(c=null),b||c||(b=a+".json"),c?(c=JSON.parse(c),this.cache.addTilemap(a,null,c)):this.addToFileList("tilemap",a,b),this},d.prototype.atlasJSONArray=function(a,b,c,e){return this.atlas(a,b,c,e,d.TEXTURE_ATLAS_JSON_ARRAY)},d.prototype.atlasJSONHash=function(a,b,c,e){return this.atlas(a,b,c,e,d.TEXTURE_ATLAS_JSON_HASH)},d.prototype.atlas=function(a,b,c,e,f){if((void 0===b||null===b)&&(b=a+".png"),void 0===c&&(c=null),void 0===e&&(e=null),void 0===f&&(f=d.TEXTURE_ATLAS_JSON_ARRAY),c||e||(c=a+".json"),c)this.addToFileList("textureatlas",a,b,{atlasURL:c,format:f});else{switch(f){case d.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof e&&(e=JSON.parse(e))}this.addToFileList("textureatlas",a,b,{atlasURL:null,atlasData:e,format:f})}return this},d.prototype.withSyncPoint=function(a,b){this._withSyncPointDepth++;try{a.call(b||this,this)}finally{this._withSyncPointDepth--}return this},d.prototype.addSyncPoint=function(a,b){var c=this.getAsset(a,b);return c&&(c.file.syncPoint=!0),this},d.prototype.removeFile=function(a,b){var c=this.getAsset(a,b);c&&(c.loaded||c.loading||this._fileList.splice(c.index,1))},d.prototype.removeAll=function(){this._fileList.length=0,this._flightQueue.length=0},d.prototype.start=function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},d.prototype.processLoadQueue=function(){var a,b,c,d,f;if(!this.isLoading)return console.warn("Loader - active loading canceled / reset"),void this.finishedLoading(!0);for(a=0;a<this._flightQueue.length;a++)b=this._flightQueue[a],(b.loaded||b.error)&&(this._flightQueue.splice(a,1),a--,b.loading=!1,b.requestUrl=null,b.requestObject=null,b.error&&this.emit("fileerror",b.key,b),this._loadedFileCount++,this.emit("filecomplete",this.progress,b.key,!b.error,this._loadedFileCount,this._totalFileCount));for(c=!1,d=this.enableParallel?e.clamp(this.maxParallelDownloads,1,12):1,a=this._processingHead;a<this._fileList.length&&(b=this._fileList[a],b.loaded||b.error?a===this._processingHead&&(this._processingHead=a+1):!b.loading&&this._flightQueue.length<d&&(c||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this._flightQueue.push(b),b.loading=!0,this.emit("filestart",this.progress,b.key,b.url),this.loadFile(b))),!b.loaded&&b.syncPoint&&(c=!0),!(this._flightQueue.length>=d||c&&this._loadedPackCount===this._totalPackCount));a++);this.updateProgress(),this._processingHead>=this._fileList.length?this.finishedLoading():this._flightQueue.length||(console.warn("Loader - aborting: processing queue empty, loading may have stalled"),f=this,setTimeout(function(){f.finishedLoading(!0)},2e3))},d.prototype.finishedLoading=function(a){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,a||this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this.emit("loadcomplete"),this.reset())},d.prototype.asyncComplete=function(a,b){void 0===b&&(b=""),a.loaded=!0,a.error=!!b,b&&(a.errorMessage=b,console.warn("Loader - "+a.type+"["+a.key+"]: "+b)),this.processLoadQueue()},d.prototype.transformUrl=function(a,b){return a?a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?a:this.baseURL+b.path+a:!1},d.prototype.loadFile=function(a){switch(a.type){case"image":case"spritesheet":case"textureatlas":this.loadImageTag(a);break;case"audio":a.url=this.getAudioURL(a.url),a.url?this.game.sound.usingWebAudio?this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(a):this.fileError(a,null,"No supported audio URL specified or device does not have audio playback support");break;case"json":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.xmlLoadComplete);break;case"tilemap":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"text":case"script":case"shader":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.fileComplete);break;case"binary":this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete)}},d.prototype.loadImageTag=function(a){var b=this;a.data=new Image,a.data.name=a.key,this.crossOrigin&&(a.data.crossOrigin=this.crossOrigin),a.data.onload=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileComplete(a))},a.data.onerror=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileError(a))},a.data.src=this.transformUrl(a.url,a),a.data.complete&&a.data.width&&a.data.height&&(a.data.onload=null,a.data.onerror=null,this.fileComplete(a))},d.prototype.loadAudioTag=function(a){var b,c=this;this.game.sound.touchLocked?(a.data=new Audio,a.data.name=a.key,a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),this.fileComplete(a)):(a.data=new Audio,a.data.name=a.key,b=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null},a.data.onerror=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null,c.fileError(a)},a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),a.data.addEventListener("canplaythrough",b,!1),a.data.load())},d.prototype.xhrLoad=function(a,b,c,d,e){var f,g=new XMLHttpRequest;g.open("GET",b,!0),g.responseType=c,e=e||this.fileError,f=this,g.onload=function(){try{return d.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},g.onerror=function(){try{return e.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},a.requestObject=g,a.requestUrl=b,g.send()},d.prototype.getAudioURL=function(a){var b,d,e,g;if(this.game.sound.noAudio)return null;for(b=0;b<a.length;b++){if(d=a[b],d.uri)e=d.type,d=d.uri;else{if(0===d.indexOf("blob:")||0===d.indexOf("data:"))return d;d.indexOf("?")>=0&&(d=d.substr(0,d.indexOf("?"))),g=d.substr((c.Math.max(0,d.lastIndexOf("."))||1/0)+1),e=g.toLowerCase()}if(f.canPlayAudio(e))return d}return null},d.prototype.fileError=function(a,b,c){var d=a.requestUrl||this.transformUrl(a.url,a),e="error loading asset from URL "+d;!c&&b&&(c=b.status),c&&(e=e+" ("+c+")"),this.asyncComplete(a,e)},d.prototype.fileComplete=function(a,b){var c=!0;switch(a.type){case"image":this.cache.addImage(a.key,a.url,a.data);break;case"spritesheet":this.cache.addSpriteSheet(a.key,a.url,a.data,a.frameWidth,a.frameHeight,a.frameMax,a.margin,a.spacing);break;case"textureatlas":if(null==a.atlasURL)this.cache.addTextureAtlas(a.key,a.url,a.data,a.atlasData,a.format);else{if(c=!1,a.format!=d.TEXTURE_ATLAS_JSON_ARRAY&&a.format!=d.TEXTURE_ATLAS_JSON_HASH&&a.format!=d.TEXTURE_ATLAS_JSON_PYXEL)throw Error("Loader - Invalid Texture Atlas format: "+a.format);this.xhrLoad(a,this.transformUrl(a.atlasURL,a),"text",this.jsonLoadComplete)}break;case"audio":this.game.sound.usingWebAudio?(a.data=b.response,this.cache.addSound(a.key,a.url,a.data,!0,!1),a.autoDecode&&this.game.sound.decode(a.key)):this.cache.addSound(a.key,a.url,a.data,!1,!0);break;case"text":a.data=b.responseText,this.cache.addText(a.key,a.url,a.data);break;case"shader":a.data=b.responseText,this.cache.addShader(a.key,a.url,a.data);break;case"script":a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=b.responseText,document.head.appendChild(a.data),a.callback&&(a.data=a.callback.call(a.callbackContext,a.key,b.responseText));break;case"binary":a.callback?a.data=a.callback.call(a.callbackContext,a.key,b.response):a.data=b.response,this.cache.addBinary(a.key,a.data)}c&&this.asyncComplete(a)},d.prototype.jsonLoadComplete=function(a,b){var c=JSON.parse(b.responseText);"tilemap"===a.type?this.cache.addTilemap(a.key,a.url,c):"json"===a.type?this.cache.addJSON(a.key,a.url,c):"textureatlas"===a.type&&this.cache.addTextureAtlas(a.key,a.url,a.data,c,a.format),this.asyncComplete(a)},d.prototype.xmlLoadComplete=function(a,b){var c,d=b.responseText,e=this.parseXml(d);return e?("xml"===a.type&&this.cache.addXML(a.key,a.url,e),void this.asyncComplete(a)):(c=b.responseType||b.contentType,console.warn("Loader - "+a.key+": invalid XML ("+c+")"),void this.asyncComplete(a,"invalid XML"))},d.prototype.parseXml=function(a){var b,c;try{window.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=null}return b&&b.documentElement&&!b.getElementsByTagName("parsererror").length?b:null},d.prototype.updateProgress=function(){},d.prototype.totalLoadedFiles=function(){return this._loadedFileCount},d.prototype.totalQueuedFiles=function(){return this._totalFileCount-this._loadedFileCount},d.prototype.totalLoadedPacks=function(){return this._totalPackCount},d.prototype.totalQueuedPacks=function(){return this._totalPackCount-this._loadedPackCount},Object.defineProperty(d.prototype,"progressRaw",{get:function(){var a=this._loadedFileCount/this._totalFileCount;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progressFloat",{get:function(){var a=this._loadedFileCount/this._totalFileCount*100;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progress",{get:function(){return c.Math.round(this.progressFloat)}}),d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{116:116,119:119,136:136,3:3,66:66}],106:[function(a,b,c){(function(a){function c(a){this.game=a,this.socket=a.net.socket,this.timer=void 0,this.startTime=0,this.endTime=0,this.rtt=0,this._history=[],this.socket.on("drip",this.ping.bind(this))}c.HISTORY_SIZE=10,c.prototype.constructor=c,c.prototype.ping=function(a){this.socket.emit("drop"),this._compute(a)},c.prototype._compute=function(b){var d,e=0,f=this._history;f.push(b.rtt),f.length>c.HISTORY_SIZE&&f.shift();for(d in f)e+=f[d];this.rtt=a.Math.round(e/f.length)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],107:[function(a,b,c){function d(a){this.game=a}var e=a("socket"),f=a(106);d.prototype={boot:function(){this.connected=!1,this.socket=e({reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:1e4}),this.latency=new f(this.game),this.socket.on("connect",this._connect.bind(this)),this.socket.on("reconnecting",this._reconnecting.bind(this)),this.socket.on("reconnect_failed",this._reconnectingFailed.bind(this)),this.socket.on("event",this._event.bind(this)),this.socket.on("error",this._error.bind(this)),this.socket.on("disconnect",this._disconnect.bind(this)),this.game.on("game/pause",this.pause,this),this.game.on("game/resume",this.resume,this)},pause:function(){this.disconnect()},resume:function(){this.connect()},connect:function(){this.socket.connect()},disconnect:function(){this.socket.disconnect()},reconnect:function(){this.disconnect(),this.connect()},_connect:function(){this.connected=!0,console.log("connected")},_reconnecting:function(a){console.log("trying to reconnect (attempt "+a+")")},_reconnectingFailed:function(){console.log("socket could not reconnect, try again later")},_reconnect:function(){console.log("socket successfully reconnected")},_event:function(a){console.log("event",a)},_error:function(a){console.log("error",a)},_disconnect:function(){this.connected=!1,console.log("socket closed")}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"rtt",{get:function(){return this.latency.rtt}}),b.exports=d},{106:106,socket:"socket"}],108:[function(a,b,c){(function(c){function d(a,b,c,d){i.call(this,a),this.maxParticles=d||50,this.name="emitter"+this.game.particles.ID++,this.type=e.EMITTER,this.area=new f(b,c,1,1),this.gravity=0,this.vector=new g(0,0),this.minParticleSpeed=new g(15,15),this.maxParticleSpeed=new g(25,25),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.startTint=16777215,this.endTint=16777215,this.tintData=null,this.tintCache={},this.minRotation=-6,this.maxRotation=6,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.particleClass=h,this.angularDrag=1,this.frequency=100,this.lifespan=2e3,this.bounce=new g,this.particleAnchor=new g(.5,.5),this.particleDrag=new g(0,0),this.blendMode=e.BlendMode.NORMAL,this.emitX=b,this.emitY=c,this.on=!1,this.autoScale=!1,this.autoAlpha=!1,this.autoTint=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new g(1,1),this._maxParticleScale=new g(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null}var e=a(66),f=a(103),g=a(102),h=a(84),i=a(77),j=a(128),k=a(135),l=a(136);d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a;if(this.on&&this.game.clock.time>=this._timer)if(this._timer=this.game.clock.time+this.frequency*this.game.clock.slowMotion,0!==this._flowTotal)if(this._flowQuantity>0){for(a=0;a<this._flowQuantity;a++)if(this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1));for(a=this.children.length;a--;)this.children[a].exists&&this.children[a].update()},d.prototype.makeParticles=function(a,b,c,d,e){var f,g,h,i;for(void 0===b&&(b=0),void 0===c&&(c=this.maxParticles),void 0===d&&(d=!1),void 0===e&&(e=!1),g=0,h=a,i=b,this._frames=b,c>this.maxParticles&&(this.maxParticles=c);c>g;)Array.isArray(a)&&(h=this.game.rnd.pick(a)),Array.isArray(b)&&(i=this.game.rnd.pick(b)),f=new this.particleClass(this.game,h,i),f.exists=!1,f.visible=!1,f.anchor.copy(this.particleAnchor),this.add(f),g++;return this},d.prototype.kill=function(){this.on=!1,this.alive=!1,this.exists=!1},d.prototype.revive=function(){this.alive=!0,this.exists=!0},d.prototype.explode=function(a){this._flowTotal=0,this.start(!0,this.lifespan,this.frequency,a)},d.prototype.flow=function(a,b,c,d,e){(void 0===c||0===c)&&(c=1),void 0===d&&(d=-1),void 0===e&&(e=!0),c>this.maxParticles&&(c=this.maxParticles),this._counter=0,this._flowQuantity=c,this._flowTotal=d,e?(this.start(!0,a,b,c),this._counter+=c,this.on=!0,this._timer=this.game.clock.time+b*this.game.clock.slowMotion):this.start(!1,a,b,c)},d.prototype.start=function(a,b,c,d){if(void 0===a&&(a=!0),void 0===b&&(b=this.lifespan),(void 0===c||null===c)&&(c=250),void 0===d&&(d=0),d>this.maxParticles&&(d=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=b,this.frequency=c,a)for(var e=0;d>e;e++)this.emitParticle();else this.on=!0,this._quantity+=d,this._counter=0,this._timer=this.game.clock.time+c*this.game.clock.slowMotion},d.prototype.emitParticle=function(){var a=this.getFirstExists(!1);return null===a?!1:(this.width>1||this.height>1?a.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):a.reset(this.emitX,this.emitY),a.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(a):this.particleSendToBack&&this.sendToBack(a),this.autoScale?a.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?a.scale.set(this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale)):(this._minParticleScale.x!==this._maxParticleScale.x||this._minParticleScale.y!==this._maxParticleScale.y)&&a.scale.set(this.game.rnd.realInRange(this._minParticleScale.x,this._maxParticleScale.x),this.game.rnd.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),Array.isArray("object"===this._frames)?a.frame=this.game.rnd.pick(this._frames):a.frame=this._frames,this.autoAlpha?a.setAlphaData(this.alphaData):a.alpha=this.game.rnd.realInRange(this.minParticleAlpha,this.maxParticleAlpha),this.autoTint&&a.setTintData(this.tintData),a.vector=this.vector,a.blendMode=this.blendMode,a.velocity.x=this.game.rnd.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),a.velocity.y=this.game.rnd.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),a.drag.x=this.particleDrag.x,a.drag.y=this.particleDrag.y,a.angularVelocity=l.degToRad(this.game.rnd.between(this.minRotation,this.maxRotation)),a.angularDrag=l.degToRad(this.angularDrag),a.onEmit(),!0)},d.prototype.destroy=function(){this.game.particles.remove(this),i.prototype.destroy.call(this,!0,!1)},d.prototype.setSize=function(a,b){this.area.width=a,this.area.height=b},d.prototype.setXSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.x=a,this.maxParticleSpeed.x=b},d.prototype.setYSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.y=a,this.maxParticleSpeed.y=b},d.prototype.setRotation=function(a,b){a=a||0,b=b||0,this.minRotation=a,this.maxRotation=b},d.prototype.setAlpha=function(a,b,c,d,e){if(void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.minParticleAlpha=a,this.maxParticleAlpha=b,this.autoAlpha=!1,c>0&&a!==b){var f={v:a},g=this.game.tweens.create(f).to({v:b},c,d);g.yoyo(e),this.alphaData=g.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}},d.prototype.setScale=function(a,b,c,d,e,f,g){if(void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=0),void 0===f&&(f=j.Linear.None),void 0===g&&(g=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(a,c),this._maxParticleScale.set(b,d),this.autoScale=!1,e>0&&(a!==b||c!==d)){var h={x:a,y:c},i=this.game.tweens.create(h).to({x:b,y:d},e,f);i.yoyo(g),this.scaleData=i.generateData(60),this.scaleData.reverse(),this.autoScale=!0}},d.prototype.setTint=function(a,b,c,d,e){var f,g,h,i;if(void 0===a&&(minX=16777215),void 0===b&&(maxX=16777215),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),
void 0===e&&(e=!1),this.startTint=a,this.endTint=b,this.autoTint=!1,f=""+a+(""+b)+(""+c)+(""+d)+(""+e),this.tintCache[f])this.tintData=this.tintCache[f],this.autoTint=!0;else if(c>0&&a!==b){for(g={step:0},h=this.game.tweens.create(g).to({step:100},c,d),h.yoyo(e),this.tintCache[f]=this.tintData=h.generateData(60),i=0;i<this.tintData.length;i++)this.tintData[i].color=k.interpolateColor(a,b,100,this.tintData[i].step);this.tintData.reverse(),this.autoTint=!0}},d.prototype.at=function(a){a.center?(this.emitX=a.center.x,this.emitY=a.center.y):(this.emitX=a.world.x+a.anchor.x*a.width,this.emitY=a.world.y+a.anchor.y*a.height)},Object.defineProperty(d.prototype,"width",{get:function(){return this.area.width},set:function(a){this.area.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.area.height},set:function(a){this.area.height=a}}),Object.defineProperty(d.prototype,"x",{get:function(){return this.emitX},set:function(a){this.emitX=a}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.emitY},set:function(a){this.emitY=a}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.floor(this.y+this.area.height/2)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{102:102,103:103,128:128,135:135,136:136,66:66,77:77,84:84}],109:[function(a,b,c){function d(a){this.game=a,this.emitters={},this.ID=0}a(108);d.prototype={add:function(a){return this.emitters[a.name]=a,a},remove:function(a){delete this.emitters[a.name]},update:function(){for(var a in this.emitters)this.emitters[a].exists&&this.emitters[a].update()}},d.prototype.constructor=d,b.exports=d},{108:108}],110:[function(a,b,c){function d(a){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}d.prototype.constructor=d,d.prototype.reset=function(){this.points.length=0,this.indices.length=0},d.prototype.upload=function(){var a=this.gl;this.glPoints=new Float32Array(this.points),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndices,a.STATIC_DRAW),this.dirty=!1},d.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},b.exports=d},{}],111:[function(a,b,c){function d(a){e.ObjectRenderer.call(this,a),this.graphicsDataPool=[]}var e=a("pixi"),f=(a(2),a(110)),g=a(112);d.prototype=Object.create(e.ObjectRenderer.prototype),d.prototype.constructor=d,d.prototype.onContextChange=function(){this.shader=new g(this.renderer.shaderManager)},d.prototype.destroy=function(){e.ObjectRenderer.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},d.prototype.render=function(a){var b,c,d,e,f=this.renderer,g=f.gl,h=this.shader;for((a.dirty||!a._webGL[g.id])&&this.updateGraphics(a),c=a._webGL[g.id],f.blendModeManager.setBlendMode(a.blendMode),d=0,e=c.data.length;e>d;d++)b=c.data[d],f.shaderManager.setShader(h),g.lineWidth(a.lineWidth),g.uniformMatrix3fv(h.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),g.uniformMatrix3fv(h.uniforms.projectionMatrix._location,!1,f.currentRenderTarget.projectionMatrix.toArray(!0)),g.uniform1f(h.uniforms.alpha._location,a.worldAlpha),g.bindBuffer(g.ARRAY_BUFFER,b.buffer),g.vertexAttribPointer(h.attributes.aVertexPosition,2,g.FLOAT,!1,24,0),g.vertexAttribPointer(h.attributes.aColor,4,g.FLOAT,!1,24,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,b.indexBuffer),g.drawElements(g.LINE_LOOP,b.indices.length,g.UNSIGNED_SHORT,0),f.drawCount++},d.prototype.updateGraphics=function(a){var b,c,d,g,h=this.renderer.gl,i=a._webGL[h.id];if(i||(i=a._webGL[h.id]={lastIndex:0,data:[],gl:h}),a.dirty=!1,a.clearDirty){for(a.clearDirty=!1,b=0;b<i.data.length;b++)c=i.data[b],c.reset(),this.graphicsDataPool.push(c);i.data=[],i.lastIndex=0}for(b=i.lastIndex;b<a.graphicsData.length;b++)g=a.graphicsData[b],i.data.length?d=i.data[i.data.length-1]:(d=this.graphicsDataPool.pop()||new f(i.gl),i.data.push(d)),d.dirty=!0,g.type===e.SHAPES.RECT?this.buildRectangle(g,d):g.type===e.SHAPES.CIRC&&this.buildCircle(g,d),i.lastIndex++;for(b=0;b<i.data.length;b++)d=i.data[b],d.dirty&&d.upload()},d.prototype.buildRectangle=function(a,b){var c=a.shape,d=c.x,f=c.y,g=c.width,h=c.height,i=e.utils.hex2rgb(a.lineColor),j=a.lineAlpha,k=i[0]*j,l=i[1]*j,m=i[2]*j,n=b.points,o=b.indices,p=n.length/6;n.push(d,f),n.push(k,l,m,j),n.push(d+g,f),n.push(k,l,m,j),n.push(d+g,f+h),n.push(k,l,m,j),n.push(d,f+h),n.push(k,l,m,j),o.push(p,p+1,p+2,p+3)},d.prototype.buildCircle=function(a,b){var c,d=a.shape,f=d.x,g=d.y,h=d.radius,i=d.radius,j=Math.floor(5*Math.sqrt(d.radius)),k=2*Math.PI/j,l=e.utils.hex2rgb(a.lineColor),m=a.lineAlpha,n=l[0]*m,o=l[1]*m,p=l[2]*m,q=b.points,r=b.indices,s=q.length/6;for(c=0;j+1>c;c++)q.push(f+Math.sin(k*c)*h,g+Math.cos(k*c)*i,n,o,p,m),r.push(s++)},e.WebGLRenderer.registerPlugin("wireframe",d),b.exports=d},{110:110,112:112,2:2,pixi:"pixi"}],112:[function(a,b,c){function d(a){e.Shader.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * alpha;\n}","precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}",{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var e=a("pixi");d.prototype=Object.create(e.Shader.prototype),d.prototype.constructor=d,b.exports=d},{pixi:"pixi"}],113:[function(a,b,c){function d(a,b,c,d,f){void 0===c&&(c=1),void 0===d&&(d=!1),void 0===f&&(f=a.sound.connectToMaster),this.game=a,this.name=b,this.key=b,this.loop=d,this.volume=c,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=c*this.game.sound.volume,f&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(b)&&this.game.cache.isSoundReady(b)?(this._sound=this.game.cache.getSoundData(b),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this._volume=c,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1,e.call(this)}var e=a(3),f=a(116);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.soundHasUnlocked=function(a){a===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},d.prototype.addMarker=function(a,b,c,d,e){(void 0===d||null===d)&&(d=1),void 0===e&&(e=!1),this.markers[a]={name:a,start:b,stop:b+c,volume:d,duration:c,durationMS:1e3*c,loop:e}},d.prototype.removeMarker=function(a){delete this.markers[a]},d.prototype.onEndedHandler=function(){this._sound&&(this._sound.onended=null),this.isPlaying=!1,this.currentTime=this.durationMS,this.stop()},d.prototype.update=function(){return this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.emit("decoded",this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),void(this.isPlaying&&(this.currentTime=this.game.clock.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.emit("loop",this),""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.clock.time):(this.emit("markerComplete",this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop():this.loop?(this.emit("loop",this),this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop())))):void this.destroy()},d.prototype.loopFull=function(a){this.play(null,0,a,!0)},d.prototype.play=function(a,b,c,d,e){if((void 0===a||a===!1||null===a)&&(a=""),void 0===e&&(e=!0),this.isPlaying&&!this.allowMultiple&&!e&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||e))if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(g){}this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(""===a&&Object.keys(this.markers).length>0)return this;if(""!==a){if(this.currentMarker=a,!this.markers[a])return this;this.position=this.markers[a].start,this.volume=this.markers[a].volume,this.loop=this.markers[a].loop,this.duration=this.markers[a].duration,this.durationMS=this.markers[a].durationMS,void 0!==c&&(this.volume=c),void 0!==d&&(this.loop=d),this._tempMarker=a,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else b=b||0,void 0===c&&(c=this._volume),void 0===d&&(d=this.loop),this.position=b,this.volume=c,this.loop=d,this.duration=0,this.durationMS=0,this._tempMarker=a,this._tempPosition=b,this._tempVolume=c,this._tempLoop=d;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===a&&(this._sound.loop=!0),this.loop||""!==a||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===a?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.emit("play",this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(f.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.emit("play",this)):this.pendingPlayback=!0,this},d.prototype.restart=function(a,b,c,d){a=a||"",b=b||0,c=c||1,void 0===d&&(d=!1),this.play(a,b,c,d,!0)},d.prototype.pause=function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.clock.time,this.emit("pause",this),this.stop())},d.prototype.resume=function(){var a,b;this.paused&&this._sound&&(this.usingWebAudio?(a=this.position+this.pausedPosition/1e3,this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),this.loop||""!==this.currentMarker||(this._sound.onended=this.onEndedHandler.bind(this)),b=this.duration-this.pausedPosition/1e3,void 0===this._sound.start?(this._sound.noteGrainOn(0,a,b),this._sound.noteOn(0)):this.loop&&f.chrome?42===f.chromeVersion?this._sound.start(0):this._sound.start(0,a):this._sound.start(0,a,b)):this._sound.play(),this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.clock.time-this.pausedTime,this.emit("resume",this))},d.prototype.stop=function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(a){}this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var b=this.currentMarker;""!==this.currentMarker&&this.emit("markerComplete",this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.emit("stop",this,b)}},d.prototype.fadeIn=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=this.currentMarker),this.paused||(this.play(c,0,0,b),this.fadeTo(a,1))},d.prototype.fadeOut=function(a){this.fadeTo(a,0)},d.prototype.fadeTo=function(a,b){if(this.isPlaying&&!this.paused&&b!==this.volume){if(void 0===a&&(a=1e3),void 0===b)return void console.warn("Sound.fadeTo: No Volume Specified.");this.fadeTween=this.game.tweens.create(this),this.fadeTween.to({volume:b},a,void 0,!0),this.fadeTween.on("complete",this.fadeComplete,this)}},d.prototype.fadeComplete=function(){this.emit("fadeComplete",this,this.volume),0===this.volume&&this.stop()},d.prototype.destroy=function(a){void 0===a&&(a=!0),this.stop(),a?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.removeAllListeners())},Object.defineProperty(d.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(d.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(d.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(a){a=a||!1,a!==this._muted&&(a?(this._muted=!0,this._muteVolume=this._tempVolume,this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.emit("mute",this))}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._volume},set:function(a){return f.firefox&&this.usingAudioTag&&(a=this.game.math.clamp(a,0,1)),this._muted?void(this._muteVolume=a):(this._tempVolume=a,this._volume=a,void(this.usingWebAudio?this.gainNode.gain.value=a:this.usingAudioTag&&this._sound&&(this._sound.volume=a)))}}),b.exports=d},{116:116,3:3}],114:[function(a,b,c){function d(a){this.game=a,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new g,this._watching=!1,this._watchCallback=null,this._watchContext=null}var e=a(113),f=a(116),g=a(132);d.prototype={boot:function(){if(f.iOS&&f.webAudio===!1&&(this.channels=1),window.AudioContext)try{this.context=new window.AudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination)},stopAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].stop()},pauseAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].pause()},resumeAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].resume()},decode:function(a,b){var c,d;if(b=b||null,c=this.game.cache.getSoundData(a),c&&this.game.cache.isSoundDecoded(a)===!1){this.game.cache.updateSound(a,"isDecoding",!0),d=this;try{this.context.decodeAudioData(c,function(b){b&&d.game.cache.decodedSound(a,b)})}catch(e){}}},setDecodedCallback:function(a,b,c){"string"==typeof a&&(a=[a]),this._watchList.reset();for(var d=0;d<a.length;d++)a[d]instanceof e?this.game.cache.isSoundDecoded(a[d].key)||this._watchList.add(a[d].key):this.game.cache.isSoundDecoded(a[d])||this._watchList.add(a[d]);0===this._watchList.total?(this._watching=!1,b.call(c)):(this._watching=!0,this._watchCallback=b,this._watchContext=c)},update:function(){var a,b;if(!this.noAudio){for(!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null),a=0;a<this._sounds.length;a++)this._sounds[a].update();if(this._watching){for(b=this._watchList.first;b;)this.game.cache.isSoundDecoded(b)&&this._watchList.remove(b),b=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(a,b,c,d){void 0===b&&(b=1),void 0===c&&(c=!1),void 0===d&&(d=this.connectToMaster);var f=new e(this.game,a,b,c,d);return this._sounds.push(f),f},addSprite:function(a){var b=new AudioSprite(this.game,a);return b},remove:function(a){for(var b=this._sounds.length;b--;)if(this._sounds[b]===a)return this._sounds[b].destroy(!1),this._sounds.splice(b,1),!0;return!1},removeByKey:function(a){for(var b=this._sounds.length,c=0;b--;)this._sounds[b].key===a&&(this._sounds[b].destroy(!1),this._sounds.splice(b,1),c++);return c},play:function(a,b,c){if(!this.noAudio){var d=this.add(a,b,c);return d.play(),d}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var a=0;a<this._sounds.length;a++)this._sounds[a].usingAudioTag&&(this._sounds[a].mute=!0)}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var a=0;a<this._sounds.length;a++)this._sounds[a].usingAudioTag&&(this._sounds[a].mute=!1)}},destroy:function(){this.stopAll();for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].destroy();this._sounds=[],this.context.close()}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"mute",{get:function(){return this._muted},set:function(a){if(a=a||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._volume},set:function(a){if(0>a?a=0:a>1&&(a=1),this._volume!==a)if(this._volume=a,this.usingWebAudio)this.masterGain.gain.value=a;else for(var b=0;b<this._sounds.length;b++)this._sounds[b].usingAudioTag&&(this._sounds[b].volume=this._sounds[b].volume*a)}}),b.exports=d},{113:113,116:116,132:132}],115:[function(a,b,c){(function(a){var c={create:function(b,c,d){b=b||256,c=c||256;var e=a.document.createElement("canvas");return"string"==typeof d&&""!==d&&(e.id=d),e.width=b,e.height=c,e.style.display="block",e},addToDOM:function(a,b){var c;return b&&("string"==typeof b?c=document.getElementById(b):"object"==typeof b&&1===b.nodeType&&(c=b)),c||(c=document.body),c.appendChild(a),a},setTouchAction:function(a,b){return b=b||"none",a.style.msTouchAction=b,a.style["ms-touch-action"]=b,a.style["touch-action"]=b,a},setUserSelect:function(a,b){return b=b||"none",a.style["-webkit-touch-callout"]=b,a.style["-webkit-user-select"]=b,a.style["-khtml-user-select"]=b,a.style["-moz-user-select"]=b,a.style["-ms-user-select"]=b,a.style["user-select"]=b,a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",a},setContextMenu:function(a,b){b?a.oncontextmenu=null:a.oncontextmenu=function(a){a.preventDefault()}},setSmoothingEnabled:function(a,b){var d=c.getSmoothingPrefix(a);return d&&(a[d]=b),a},getSmoothingPrefix:function(a){var b,c,d=["i","webkitI","msI","mozI","oI"];for(c in d)if(b=d[c]+"mageSmoothingEnabled",b in a)return b;return null}};b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],116:[function(a,b,c){(function(c,d){var e=a("pixi"),f={android:!1,chromeOS:!1,iOS:!1,linux:!1,macOS:!1,windows:!1,windowsPhone:!1,desktop:!1,canvas:!1,file:!1,fileSystem:!1,webGL:!1,worker:!1,canvasBitBltShift:!1,audioData:!1,webAudio:!1,dolby:!1,chrome:!1,chromeVersion:!1,arora:!1,epiphany:!1,firefox:!1,firefoxVersion:!1,safari:!1,safariVersion:!1,mobileSafari:!1,ie:!1,ieVersion:!1,trident:!1,tridentVersion:!1,edge:!1,cocoonJS:!1,node:!1,nodeWebkit:!1,electron:!1,fullscreen:!1,requestFullscreen:"",cancelFullscreen:"",fullscreenKeyboard:!1,pointerLock:!1,quirksMode:!1,touch:!1,mspointer:!1,wheelEvent:"",whenReady:function(a,b,c){var e=this._readyCheck;this.deviceReadyAt||!e?a.call(b,this):e._monitor||c?(e._queue=e._queue||[],e._queue.push([a,b])):(e._monitor=e.bind(this),e._queue=e._queue||[],e._queue.push([a,b]),"complete"===d.document.readyState||"interactive"===d.document.readyState?d.setTimeout(e._monitor,0):(d.document.addEventListener("DOMContentLoaded",e._monitor,!1),d.addEventListener("load",e._monitor,!1)))},_readyCheck:function(){var a,b,c,e=this._readyCheck;if(d.document.body){if(!this.deviceReadyAt){for(this.deviceReadyAt=Date.now(),d.document.removeEventListener("DOMContentLoaded",e._monitor),d.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0;a=e._queue.shift();)b=a[0],c=a[1],b.call(c,this);this._readyCheck=null,this._initialize=null}}else d.setTimeout(e._monitor,20)},_initialize:function(){function b(){var a=d.navigator.userAgent;/Android/.test(a)?k.android=!0:/CrOS/.test(a)?k.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?k.iOS=!0:/Linux/.test(a)?k.linux=!0:/Mac OS/.test(a)?k.macOS=!0:/Windows/.test(a)&&(k.windows=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(k.android=!1,k.iOS=!1,k.macOS=!1,k.windows=!0,k.windowsPhone=!0),(k.windows||k.macOS||k.linux||k.chromeOS)&&(k.desktop=!0),(k.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(k.desktop=!1)}function f(){var a,b,c,e,f;k.audioData=!!d.window.Audio,k.webAudio=!(!d.window.AudioContext&&!d.window.webkitAudioContext),a=document.createElement("audio"),b=!1;try{(b=!!a.canPlayType)&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(k.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(k.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(k.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(k.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(k.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(k.webm=!0),""!==a.canPlayType('audio/mp4;codecs="ec-3"')&&(k.edge?k.dolby=!0:k.safari&&k.safariVersion>=9&&(c=navigator.userAgent,/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(e=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10),(10===e&&f>=11||e>10)&&(k.dolby=!0)))))}catch(g){}}function g(){k.canvas=!!d.CanvasRenderingContext2D,k.file=!!(d.File&&d.FileReader&&d.FileList&&d.Blob),k.fileSystem=!!d.requestFileSystem,k.webGL=e.utils.isWebGLSupported(),k.worker=!!d.Worker,k.pointerLock="pointerLockElement"in d.document||"mozPointerLockElement"in d.document||"webkitPointerLockElement"in d.document,k.quirksMode="CSS1Compat"===d.document.compatMode?!1:!0,!k.iOS&&(k.ie||k.firefox||k.chrome)&&(k.canvasBitBltShift=!0),(k.safari||k.mobileSafari)&&(k.canvasBitBltShift=!1)}function h(){("ontouchstart"in document.documentElement||d.navigator.maxTouchPoints&&d.navigator.maxTouchPoints>=1)&&(k.touch=!0),(d.navigator.msPointerEnabled||d.navigator.pointerEnabled)&&(k.mspointer=!0),"onwheel"in d||k.ie&&"WheelEvent"in d?k.wheelEvent="wheel":"onmousewheel"in d&&(k.wheelEvent="mousewheel")}function i(){var a,b=document.createElement("div"),c=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];for(a=0;a<c.length;a++)if(b[c[a]]){k.fullscreen=!0,k.requestFullscreen=c[a];break}if(k.fullscreen)for(a=0;a<e.length;a++)if(document[e[a]]){k.cancelFullscreen=e[a];break}d.Element&&d.Element.ALLOW_KEYBOARD_INPUT&&(k.fullscreenKeyboard=!0)}function j(){var b=d.navigator.userAgent;if(/Arora/.test(b)?k.arora=!0:/Chrome\/(\d+)/.test(b)&&!k.windowsPhone?(k.chrome=!0,k.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(b)?k.epiphany=!0:/Firefox\D+(\d+)/.test(b)?(k.firefox=!0,k.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(b)&&k.iOS?k.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(b)?(k.ie=!0,k.ieVersion=parseInt(RegExp.$1,10)):/Safari\/(\d+)/.test(b)&&!k.windowsPhone?(k.safari=!0,/Version\/(\d+)\./.test(b)&&(k.safariVersion=parseInt(RegExp.$1,10))):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(b)?(k.ie=!0,k.trident=!0,k.tridentVersion=parseInt(RegExp.$1,10),k.ieVersion=parseInt(RegExp.$3,10)):/Edge\/\d+/.test(b)&&(k.edge=!0),void 0!==c&&void 0!==a&&(k.node=!0),k.node&&"object"==typeof c.versions&&(k.nodeWebkit=!!c.versions["node-webkit"],k.electron=!!c.versions.electron),navigator.isCocoonJS&&(k.cocoonJS=!0),k.cocoonJS)try{k.cocoonJSApp=void 0!==CocoonJS}catch(e){k.cocoonJSApp=!1}void 0!==window.ejecta&&(k.ejecta=!0)}var k=this;b(),f(),j(),g(),h(),i()},canPlayAudio:function(a){return"mp3"===a&&this.mp3?!0:"ogg"===a&&(this.ogg||this.opus)?!0:"m4a"===a&&this.m4a?!0:"opus"===a&&this.opus?!0:"wav"===a&&this.wav?!0:"webm"===a&&this.webm?!0:"mp4"===a&&this.dolby?!0:!1}};b.exports=f}).call(this,a(5),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5,pixi:"pixi"}],117:[function(a,b,c){(function(a){function c(b,c){var d,e;for(void 0===c&&(c=!1),this.game=b,this.isRunning=!1,this.forceTimeout=c,d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;e++)a.requestAnimationFrame=a[d[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[e]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null}c.prototype.constructor=c,c.prototype.start=function(){var b=this;this.isRunning=!0,!a.requestAnimationFrame||this.forceTimeout?(this._isSetTimeOut=!0,this._onLoop=function(){return b.updateSetTimeout()},this._timeOutID=a.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(a){return b.updateRequestAnimationFrame(a)},this._timeOutID=a.requestAnimationFrame(this._onLoop))},c.prototype.updateRequestAnimationFrame=function(b){this.game.update(Math.floor(b)),this._timeOutID=a.requestAnimationFrame(this._onLoop)},c.prototype.updateSetTimeout=function(){this.game.update(Date.now()),this._timeOutID=a.setTimeout(this._onLoop,this.game.clock.timeToCall)},c.prototype.stop=function(){this.isRunning=!1,this._isSetTimeOut?clearTimeout(this._timeOutID):a.cancelAnimationFrame(this._timeOutID)},c.prototype.isSetTimeOut=function(){return this._isSetTimeOut},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],118:[function(a,b,c){(function(a){function c(b,c,d,e,f,g){this.layer=b,this.index=c,this.x=d,this.y=e,this.rotation=0,this.flipped=!1,this.worldX=d*f,this.worldY=e*g,this.width=f,this.height=g,this.centerX=a.Math.abs(f/2),this.centerY=a.Math.abs(g/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this}c.prototype={containsPoint:function(a,b){return!(a<this.worldX||b<this.worldY||a>this.right||b>this.bottom)},intersects:function(a,b,c,d){return c<=this.worldX?!1:d<=this.worldY?!1:a>=this.worldX+this.width?!1:b>=this.worldY+this.height?!1:!0},setCollisionCallback:function(a,b){this.collisionCallback=a,this.collisionCallbackContext=b},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(a,b,c,d){this.collideLeft=a,this.collideRight=b,this.collideUp=c,this.collideDown=d,this.faceLeft=a,this.faceRight=b,this.faceTop=c,this.faceBottom=d},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(a,b){return a&&b?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:a?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:b?this.faceTop||this.faceBottom||this.faceLeft||this.faceRight:!1},copy:function(a){this.index=a.index,this.alpha=a.alpha,this.properties=a.properties,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(c.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(c.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.worldY+this.height}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],119:[function(a,b,c){function d(a,b,c){this.game=a,this.key=b;var d=this.parse(b,c);this.width=d.width,this.height=d.height,this.tileWidth=d.tileWidth,this.tileHeight=d.tileHeight,this.orientation=d.orientation,this.format=d.format,this.version=d.version,this.properties=d.properties,this.widthInPixels=d.widthInPixels,this.heightInPixels=d.heightInPixels,
this.layers=d.layers,this.tilesets=d.tilesets,this.imagecollections=d.imagecollections,this.tiles=d.tiles,this.objects=d.objects,this.collideIndexes=[],this.collision=d.collision,this.images=d.images,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0}var e=a(121),f=a(118),g=a(120),h=a(123),i=a(86),j=a(133);d.NORTH=0,d.EAST=1,d.SOUTH=2,d.WEST=3,d.prototype={parse:function(a,b){return e.parse(this.game,a,b)},create:function(a,b,c,d,e,f){return void 0===f&&(f=this.game.world),this.width=b,this.height=c,this.setTileSize(d,e),this.layers.length=0,this.createBlankLayer(a,b,c,d,e,f)},setTileSize:function(a,b){this.tileWidth=a,this.tileHeight=b,this.widthInPixels=this.width*a,this.heightInPixels=this.height*b},addTilesetImage:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q;if(void 0===a)return null;if(void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),0===c&&(c=32),0===d&&(d=32),h=null,(void 0===b||null===b)&&(b=a),!this.game.cache.checkImageKey(b))return console.warn('Tilemap.addTilesetImage: Invalid image key given: "'+b+'"'),null;if(h=this.game.cache.getImage(b),i=this.getTilesetIndex(a),null===i)return console.warn('Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+b+'"'),null;if(this.tilesets[i])return this.tilesets[i].setImage(h),this.tilesets[i];for(j=new Tileset(a,g,c,d,e,f,{}),j.setImage(h),this.tilesets.push(j),k=this.tilesets.length-1,l=e,m=e,n=0,o=0,p=0,q=g;q<g+j.total&&(this.tiles[q]=[l,m,k],l+=c+f,n++,n!==j.total)&&(o++,o!==j.columns||(l=e,m+=d+f,o=0,p++,p!==j.rows));q++);return j},createFromObjects:function(a,b,c,d,e,f,g,h,j){var k,l,m,n,o;if(void 0===e&&(e=!0),void 0===f&&(f=!1),void 0===g&&(g=this.game.world),void 0===h&&(h=i),void 0===j&&(j=!0),!this.objects[a])return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+a);for(n=0;n<this.objects[a].length;n++)if(k=!1,l=this.objects[a][n],void 0!==l.gid&&"number"==typeof b&&l.gid===b?k=!0:void 0!==l.id&&"number"==typeof b&&l.id===b?k=!0:void 0!==l.name&&"string"==typeof b&&l.name===b&&(k=!0),k){m=new h(this.game,parseFloat(l.x,10),parseFloat(l.y,10),c,d),m.name=l.name,m.visible=l.visible,m.autoCull=f,m.exists=e,l.width&&(m.width=l.width),l.height&&(m.height=l.height),l.rotation&&(m.angle=l.rotation),j&&(m.y-=m.height),g.add(m);for(o in l.properties)g.set(m,o,l.properties[o],!1,!1,0,!0)}},createFromTiles:function(a,b,c,d,e,f){var g,h,j,k,l,m,n;if("number"==typeof a&&(a=[a]),void 0===b||null===b?b=[]:"number"==typeof b&&(b=[b]),d=this.getLayer(d),void 0===e&&(e=this.game.world),void 0===f&&(f={}),void 0===f.customClass&&(f.customClass=i),void 0===f.adjustY&&(f.adjustY=!0),g=this.layers[d].width,h=this.layers[d].height,this.copy(0,0,g,h,d),this._results.length<2)return 0;for(j=0,l=1,m=this._results.length;m>l;l++)if(-1!==a.indexOf(this._results[l].index)){k=new f.customClass(this.game,this._results[l].worldX,this._results[l].worldY,c);for(n in f)k[n]=f[n];e.add(k),j++}if(1===b.length)for(l=0;l<a.length;l++)this.replace(a[l],b[0],0,0,g,h,d);else if(b.length>1)for(l=0;l<a.length;l++)this.replace(a[l],b[l],0,0,g,h,d);return j},createSprite:function(a,b,c,d){void 0===b&&(b=this.widthInPixels),void 0===c&&(c=this.heightInPixels),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new h(this.game,this,e,b,c))},createLayer:function(a,b,c,d){void 0===b&&(b=this.game.width),void 0===c&&(c=this.game.height),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new g(this.game,this,e,b,c))},createBlankLayer:function(a,b,c,d,e,h){var i,j,k,l,m,n,o;if(void 0===h&&(h=this.game.world),null!==this.getLayerIndex(a))return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");for(i={name:a,x:0,y:0,width:b,height:c,widthInPixels:b*d,heightInPixels:c*e,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},k=[],l=0;c>l;l++){for(j=[],m=0;b>m;m++)j.push(new f(i,-1,m,l,d,e));k.push(j)}return i.data=k,this.layers.push(i),this.currentLayer=this.layers.length-1,n=i.widthInPixels,o=i.heightInPixels,n>this.game.width&&(n=this.game.width),o>this.game.height&&(o=this.game.height),k=new g(this.game,this,this.layers.length-1,n,o),k.name=a,h.add(k)},getIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return c;return null},getLayerIndex:function(a){return this.getIndex(this.layers,a)},getTilesetIndex:function(a){return this.getIndex(this.tilesets,a)},getImageIndex:function(a){return this.getIndex(this.images,a)},getObjectIndex:function(a){return this.getIndex(this.objects,a)},setTileIndexCallback:function(a,b,c,d){if(d=this.getLayer(d),"number"==typeof a)this.layers[d].callbacks[a]={callback:b,callbackContext:c};else for(var e=0,f=a.length;f>e;e++)this.layers[d].callbacks[a[e]]={callback:b,callbackContext:c}},setTileLocationCallback:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(a,b,c,d,g),!(this._results.length<2))for(var h=1;h<this._results.length;h++)this._results[h].setCollisionCallback(e,f)},setCollision:function(a,b,c,d){if(void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c),"number"==typeof a)return this.setCollisionByIndex(a,b,c,!0);if(Array.isArray(a)){for(var e=0;e<a.length;e++)this.setCollisionByIndex(a[e],b,c,!1);d&&this.calculateFaces(c)}},setCollisionBetween:function(a,b,c,d,e){if(void 0===c&&(c=!0),void 0===e&&(e=!0),d=this.getLayer(d),!(a>b)){for(var f=a;b>=f;f++)this.setCollisionByIndex(f,c,d,!1);e&&this.calculateFaces(d)}},setCollisionByExclusion:function(a,b,c,d){void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c);for(var e=0,f=this.tiles.length;f>e;e++)-1===a.indexOf(e)&&this.setCollisionByIndex(e,b,c,!1);d&&this.calculateFaces(c)},setCollisionByIndex:function(a,b,c,d){var e,f,g,h;for(void 0===b&&(b=!0),void 0===c&&(c=this.currentLayer),void 0===d&&(d=!0),b?this.collideIndexes.push(a):(e=this.collideIndexes.indexOf(a),e>-1&&this.collideIndexes.splice(e,1)),f=0;f<this.layers[c].height;f++)for(g=0;g<this.layers[c].width;g++)h=this.layers[c].data[f][g],h&&h.index===a&&(b?h.setCollision(!0,!0,!0,!0):h.resetCollision(),h.faceTop=b,h.faceBottom=b,h.faceLeft=b,h.faceRight=b);return d&&this.calculateFaces(c),c},getLayer:function(a){return void 0===a?a=this.currentLayer:"string"==typeof a?a=this.getLayerIndex(a):a instanceof g&&(a=a.index),a},setPreventRecalculate:function(a){if(a===!0&&this.preventingRecalculate!==!0&&(this.preventingRecalculate=!0,this.needToRecalculate={}),a===!1&&this.preventingRecalculate===!0){this.preventingRecalculate=!1;for(var b in this.needToRecalculate)this.calculateFaces(b);this.needToRecalculate=!1}},calculateFaces:function(a){var b,c,d,e,f,g,h,i,j;if(this.preventingRecalculate)return void(this.needToRecalculate[a]=!0);for(b=null,c=null,d=null,e=null,f=0,g=this.layers[a].height;g>f;f++)for(h=0,i=this.layers[a].width;i>h;h++)j=this.layers[a].data[f][h],j&&(b=this.getTileAbove(a,h,f),c=this.getTileBelow(a,h,f),d=this.getTileLeft(a,h,f),e=this.getTileRight(a,h,f),j.collides&&(j.faceTop=!0,j.faceBottom=!0,j.faceLeft=!0,j.faceRight=!0),b&&b.collides&&(j.faceTop=!1),c&&c.collides&&(j.faceBottom=!1),d&&d.collides&&(j.faceLeft=!1),e&&e.collides&&(j.faceRight=!1))},getTileAbove:function(a,b,c){return c>0?this.layers[a].data[c-1][b]:null},getTileBelow:function(a,b,c){return c<this.layers[a].height-1?this.layers[a].data[c+1][b]:null},getTileLeft:function(a,b,c){return b>0?this.layers[a].data[c][b-1]:null},getTileRight:function(a,b,c){return b<this.layers[a].width-1?this.layers[a].data[c][b+1]:null},setLayer:function(a){a=this.getLayer(a),this.layers[a]&&(this.currentLayer=a)},hasTile:function(a,b,c){return c=this.getLayer(c),void 0===this.layers[c].data[b]||void 0===this.layers[c].data[b][a]?!1:this.layers[c].data[b][a].index>-1},removeTile:function(a,b,c){if(c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height&&this.hasTile(a,b,c)){var d=this.layers[c].data[b][a];return this.layers[c].data[b][a]=new f(this.layers[c],-1,a,b,this.tileWidth,this.tileHeight),this.layers[c].dirty=!0,this.calculateFaces(c),d}},removeTileWorldXY:function(a,b,c,d,e){return e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.removeTile(a,b,e)},putTile:function(a,b,c,d){if(null===a)return this.removeTile(b,c,d);if(d=this.getLayer(d),b>=0&&b<this.layers[d].width&&c>=0&&c<this.layers[d].height){var e;return a instanceof f?(e=a.index,this.hasTile(b,c,d)?this.layers[d].data[c][b].copy(a):this.layers[d].data[c][b]=new f(d,e,b,c,a.width,a.height)):(e=a,this.hasTile(b,c,d)?this.layers[d].data[c][b].index=e:this.layers[d].data[c][b]=new f(this.layers[d],e,b,c,this.tileWidth,this.tileHeight)),this.collideIndexes.indexOf(e)>-1?this.layers[d].data[c][b].setCollision(!0,!0,!0,!0):this.layers[d].data[c][b].resetCollision(),this.layers[d].dirty=!0,this.calculateFaces(d),this.layers[d].data[c][b]}return null},putTileWorldXY:function(a,b,c,d,e,f){return f=this.getLayer(f),b=this.game.math.snapToFloor(b,d)/d,c=this.game.math.snapToFloor(c,e)/e,this.putTile(a,b,c,f)},searchTileIndex:function(a,b,c,d){var e,f,g;if(void 0===b&&(b=0),void 0===c&&(c=!1),d=this.getLayer(d),e=0,c){for(f=this.layers[d].height-1;f>=0;f--)for(g=this.layers[d].width-1;g>=0;g--)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}}else for(f=0;f<this.layers[d].height;f++)for(g=0;g<this.layers[d].width;g++)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}return null},getTile:function(a,b,c,d){return void 0===d&&(d=!1),c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height?-1===this.layers[c].data[b][a].index?d?this.layers[c].data[b][a]:null:this.layers[c].data[b][a]:null},getTileWorldXY:function(a,b,c,d,e,f){return void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.getTile(a,b,e,f)},copy:function(a,b,c,d,e){var f,g;if(e=this.getLayer(e),!this.layers[e])return void(this._results.length=0);for(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=this.layers[e].width),void 0===d&&(d=this.layers[e].height),0>a&&(a=0),0>b&&(b=0),c>this.layers[e].width&&(c=this.layers[e].width),d>this.layers[e].height&&(d=this.layers[e].height),this._results.length=0,this._results.push({x:a,y:b,width:c,height:d,layer:e}),f=b;b+d>f;f++)for(g=a;a+c>g;g++)this._results.push(this.layers[e].data[f][g]);return this._results},paste:function(a,b,c,d){var e,f,g;if(void 0===a&&(a=0),void 0===b&&(b=0),d=this.getLayer(d),c&&!(c.length<2)){for(e=a-c[1].x,f=b-c[1].y,g=1;g<c.length;g++)this.layers[d].data[f+c[g].y][e+c[g].x].copy(c[g]);this.layers[d].dirty=!0,this.calculateFaces(d)}},swap:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._tempA=a,this._tempB=b,this._results.forEach(this.swapHandler,this),this.paste(c,d,this._results,g))},swapHandler:function(a){a.index===this._tempA?a.index=this._tempB:a.index===this._tempB&&(a.index=this._tempA)},forEach:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._results.forEach(a,b),this.paste(c,d,this._results,g))},replace:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(c,d,e,f,g),!(this._results.length<2)){for(var h=1;h<this._results.length;h++)this._results[h].index===a&&(this._results[h].index=b);this.paste(c,d,this._results,g)}},random:function(a,b,c,d,e){var f,g,h,i;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&(h=this._results[g].index,-1===f.indexOf(h)&&f.push(h));for(i=1;i<this._results.length;i++)this._results[i].index=this.game.rnd.pick(f);this.paste(a,b,this._results,e)}},shuffle:function(a,b,c,d,e){var f,g,h;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&f.push(this._results[g].index);for(j.shuffle(f),h=1;h<this._results.length;h++)this._results[h].index=f[h-1];this.paste(a,b,this._results,e)}},fill:function(a,b,c,d,e,f){if(f=this.getLayer(f),this.copy(b,c,d,e,f),!(this._results.length<2)){for(var g=1;g<this._results.length;g++)this._results[g].index=a;this.paste(b,c,this._results,f)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){var a,b,c="",d=[""];for(a=0;a<this.layers[this.currentLayer].height;a++){for(b=0;b<this.layers[this.currentLayer].width;b++)c+="%c  ",this.layers[this.currentLayer].data[a][b]>1?this.debugMap[this.layers[this.currentLayer].data[a][b]]?d.push("background: "+this.debugMap[this.layers[this.currentLayer].data[a][b]]):d.push("background: #ffffff"):d.push("background: rgb(0, 0, 0)");c+="\n"}d[0]=c,console.log.apply(console,d)},destroy:function(){this.removeAllLayers(),this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(a){a!==this.currentLayer&&this.setLayer(a)}}),b.exports=d},{118:118,120:120,121:121,123:123,133:133,86:86}],120:[function(a,b,c){(function(c){function d(a,b,c,j,k){j|=0,k|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPLAYER,this.canvas=h.create(j,k),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.renderSettings={enableScrollDelta:!0,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],i.canvasBitBltShift||(this.renderSettings.copyCanvas=d.ensureSharedCopyCanvas()),this.fixedToCamera=!0}var e=a("pixi"),f=a(66),g=a(86),h=a(115),i=a(116);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.sharedCopyCanvas=null,d.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=h.create(2,2)),this.sharedCopyCanvas},d.prototype.postUpdate=function(){var a=this.game.camera;g.prototype.postUpdate.call(this),this.scrollX=a.x,this.scrollY=a.y,this.render()},d.prototype.destroy=function(){h.remove(this),Destroy.prototype.destroy.call(this)},d.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b,this.texture.frame.width=a,this.texture.frame.height=b,this.texture.width=a,this.texture.height=b,this.texture.crop.width=a,this.texture.crop.height=b,this.texture.baseTexture.width=a,this.texture.baseTexture.height=b,this.texture.update(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),this.dirty=!0},d.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},d.prototype._fixX=function(a){return 0>a&&(a=0),1===this.scrollFactorX?a:this._scrollX+(a-this._scrollX/this.scrollFactorX)},d.prototype._unfixX=function(a){return 1===this.scrollFactorX?a:this._scrollX/this.scrollFactorX+(a-this._scrollX)},d.prototype._fixY=function(a){return 0>a&&(a=0),1===this.scrollFactorY?a:this._scrollY+(a-this._scrollY/this.scrollFactorY)},d.prototype._unfixY=function(a){return 1===this.scrollFactorY?a:this._scrollY/this.scrollFactorY+(a-this._scrollY)},d.prototype.getTileX=function(a){return c.Math.floor(this._fixX(a)/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(this._fixY(a)/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),a=this._fixX(a),b=this._fixY(b),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;j+l>m;m++)for(n=i;i+k>n;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(2e3>a)for(;d.length<a;)d.push(void 0);return b=this.map.tiles[a]&&this.map.tiles[a][2],null!=b&&(c=this.map.tilesets[b],c&&c.containsTileIndex(a))?d[a]=c:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.setScale=function(a,b){var c,d,e,f;for(a=a||1,b=b||a,c=0;c<this.layer.data.length;c++)for(d=this.layer.data[c],e=0;e<d.length;e++)f=d[e],f.width=this.map.tileWidth*a,f.height=this.map.tileHeight*b,f.worldX=f.x*f.width,f.worldY=f.y*f.height;this.scale.setTo(a,b)},d.prototype.shiftCanvas=function(a,b,d){var e,f,g=a.canvas,h=g.width-c.Math.abs(b),i=g.height-c.Math.abs(d),j=0,k=0,l=b,m=d;0>b&&(j=-b,l=0),0>d&&(k=-d,m=0),e=this.renderSettings.copyCanvas,e?((e.width<h||e.height<i)&&(e.width=h,e.height=i),f=e.getContext("2d"),f.clearRect(0,0,h,i),f.drawImage(g,j,k,h,i,0,0,h,i),a.clearRect(l,m,h,i),a.drawImage(e,0,0,h,i,l,m,h,i)):(a.save(),a.globalCompositeOperation="copy",a.drawImage(g,j,k,h,i,l,m,h,i),a.restore())},d.prototype.renderRegion=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.context,w=this.layer.width,x=this.layer.height,y=this._mc.tileWidth,z=this._mc.tileHeight,A=this._mc.tilesets,B=NaN;for(this._wrap||(f>=d&&(d=c.Math.max(0,d),f=c.Math.min(w-1,f)),g>=e&&(e=c.Math.max(0,e),g=c.Math.min(x-1,g))),h=d*y-a,i=e*z-b,j=(d+(1<<20)*w)%w,k=(e+(1<<20)*x)%x,v.fillStyle=this.tileColor,o=k,q=g-e,m=i;q>=0;o++,q--,m+=z)for(o>=x&&(o-=x),r=this.layer.data[o],n=j,p=f-d,l=h;p>=0;n++,p--,l+=y)n>=w&&(n-=w),s=r[n],!s||s.index<0||(t=s.index,u=A[t],void 0===u&&(u=this.resolveTileset(t)),s.alpha===B||this.debug||(v.globalAlpha=s.alpha,B=s.alpha),u?s.rotation||s.flipped?(v.save(),v.translate(l+s.centerX,m+s.centerY),v.rotate(s.rotation),s.flipped&&v.scale(-1,1),u.draw(v,-s.centerX,-s.centerY,t),v.restore()):u.draw(v,l,m,t):this.debugSettings.missingImageFill&&(v.fillStyle=this.debugSettings.missingImageFill,v.fillRect(l,m,y,z)),s.debug&&this.debugSettings.debuggedTileOverfill&&(v.fillStyle=this.debugSettings.debuggedTileOverfill,v.fillRect(l,m,y,z)))},d.prototype.renderDeltaScroll=function(a,b){var d,e,f,g,h=this._mc.scrollX,i=this._mc.scrollY,j=this.canvas.width,k=this.canvas.height,l=this._mc.tileWidth,m=this._mc.tileHeight,n=0,o=-l,p=0,q=-m;0>a?(n=j+a,o=j-1):a>0&&(o=a),0>b?(p=k+b,q=k-1):b>0&&(q=b),this.shiftCanvas(this.context,a,b),n=c.Math.floor((n+h)/l),o=c.Math.floor((o+h)/l),p=c.Math.floor((p+i)/m),q=c.Math.floor((q+i)/m),o>=n&&(this.context.clearRect(n*l-h,0,(o-n+1)*l,k),d=c.Math.floor((0+i)/m),e=c.Math.floor((k-1+i)/m),this.renderRegion(h,i,n,d,o,e)),q>=p&&(this.context.clearRect(0,p*m-i,j,(q-p+1)*m),f=c.Math.floor((0+h)/l),g=c.Math.floor((j-1+h)/l),this.renderRegion(h,i,f,p,g,q))},d.prototype.renderFull=function(){var a=this._mc.scrollX,b=this._mc.scrollY,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=c.Math.floor(a/f),i=c.Math.floor((d-1+a)/f),j=c.Math.floor(b/g),k=c.Math.floor((e-1+b)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,j,i,k)},d.prototype.render=function(){var a,b,d,e,f,g,h,i=!1;if(this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,i=!0),a=this.canvas.width,b=this.canvas.height,d=0|this._scrollX,e=0|this._scrollY,f=this._mc,g=f.scrollX-d,h=f.scrollY-e,i||0!==g||0!==h||f.renderWidth!==a||f.renderHeight!==b))return this.context.save(),f.scrollX=d,f.scrollY=e,(f.renderWidth!==a||f.renderHeight!==b)&&(f.renderWidth=a,f.renderHeight=b),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(i=!0)),!i&&this.renderSettings.enableScrollDelta&&c.Math.abs(g)+c.Math.abs(h)<c.Math.min(a,b)?this.renderDeltaScroll(g,h):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.update(),this.dirty=!1,this.context.restore(),!0},d.prototype.renderDebug=function(){var a,b,d,e,f,g,h,i,j=this._mc.scrollX,k=this._mc.scrollY,l=this.context,m=this.canvas.width,n=this.canvas.height,o=this.layer.width,p=this.layer.height,q=this._mc.tileWidth,r=this._mc.tileHeight,s=c.Math.floor(j/q),t=c.Math.floor((m-1+j)/q),u=c.Math.floor(k/r),v=c.Math.floor((n-1+k)/r),w=s*q-j,x=u*r-k,y=(s+(1<<20)*o)%o,z=(u+(1<<20)*p)%p;for(l.strokeStyle=this.debugSettings.facingEdgeStroke,e=z,g=v-u,b=x;g>=0;e++,g--,b+=r)for(e>=p&&(e-=p),h=this.layer.data[e],d=y,f=t-s,a=w;f>=0;d++,f--,a+=q)d>=o&&(d-=o),i=h[d],!i||i.index<0||!i.collides||(this.debugSettings.collidingTileOverfill&&(l.fillStyle=this.debugSettings.collidingTileOverfill,l.fillRect(a,b,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(l.beginPath(),i.faceTop&&(l.moveTo(a,b),l.lineTo(a+this._mc.cw,b)),i.faceBottom&&(l.moveTo(a,b+this._mc.ch),l.lineTo(a+this._mc.cw,b+this._mc.ch)),i.faceLeft&&(l.moveTo(a,b),l.lineTo(a,b+this._mc.ch)),i.faceRight&&(l.moveTo(a+this._mc.cw,b),l.lineTo(a+this._mc.cw,b+this._mc.ch)),l.stroke()))},Object.defineProperty(d.prototype,"wrap",{get:function(){return this._wrap},set:function(a){this._wrap=a,this.dirty=!0}}),Object.defineProperty(d.prototype,"scrollX",{get:function(){return this._scrollX},set:function(a){this._scrollX=a}}),Object.defineProperty(d.prototype,"scrollY",{get:function(){return this._scrollY},set:function(a){this._scrollY=a}}),Object.defineProperty(d.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(a){this._mc.cw=0|a,this.dirty=!0}}),Object.defineProperty(d.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(a){this._mc.ch=0|a,this.dirty=!0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{115:115,116:116,66:66,86:86,pixi:"pixi"}],121:[function(a,b,c){var d=a(118),e=a(124),f=a(134),g={parse:function(a,b,c){if(void 0===b)return this.getEmptyData();void 0===c&&(c={});var d=a.cache.getTilemapData(b);if(d)return this.parseTiledJSON(f.mixin(c,d.data));throw Error("TilemapParser.parse - No map data found for key "+b)},getEmptyData:function(a,b,c,d){var e,f,g={};return g.width=0,g.height=0,g.tileWidth=0,g.tileHeight=0,void 0!==a&&null!==a&&(g.tileWidth=a),void 0!==b&&null!==b&&(g.tileHeight=b),void 0!==c&&null!==c&&(g.width=c),void 0!==d&&null!==d&&(g.height=d),g.orientation="orthogonal",g.version="1",g.properties={},g.widthInPixels=0,g.heightInPixels=0,e=[],f={name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]},e.push(f),g.layers=e,g.images=[],g.objects={},g.collision={},g.tilesets=[],g.tiles=[],g},parseTiledJSON:function(a){var b,c,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;if("orthogonal"!==a.orientation)return console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser"),null;for(b={},b.width=a.width,b.height=a.height,b.tileWidth=a.tilewidth,b.tileHeight=a.tileheight,b.orientation=a.orientation,b.version=a.version,b.properties=a.properties,b.widthInPixels=b.width*b.tileWidth,b.heightInPixels=b.height*b.tileHeight,c=[],g=0;g<a.layers.length;g++)if("tilelayer"===a.layers[g].type){if(h=a.layers[g],!h.compression&&h.encoding&&"base64"===h.encoding){for(i=window.atob(h.data),j=i.length,k=Array(j),l=0;j>l;l+=4)k[l/4]=(i.charCodeAt(l)|i.charCodeAt(l+1)<<8|i.charCodeAt(l+2)<<16|i.charCodeAt(l+3)<<24)>>>0;h.data=k}for(m={name:a.layers[g].name,x:a.layers[g].x,y:a.layers[g].y,width:a.layers[g].width,height:a.layers[g].height,widthInPixels:a.layers[g].width*a.tilewidth,heightInPixels:a.layers[g].height*a.tileheight,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{},indexes:[],callbacks:[],bodies:[]},a.layers[g].properties&&(m.properties=a.layers[g].properties),n=0,o=[],p=[],u=0,j=a.layers[g].data.length;j>u;u++){if(q=0,r=!1,t=a.layers[g].data[u],t>536870912)switch(s=0,t>2147483648&&(t-=2147483648,s+=4),t>1073741824&&(t-=1073741824,s+=2),t>536870912&&(t-=536870912,s+=1),s){case 5:q=Math.PI/2;break;case 6:q=Math.PI;break;case 3:q=3*Math.PI/2;break;case 4:q=0,r=!0;break;case 7:q=Math.PI/2,r=!0;break;case 2:q=Math.PI,r=!0;break;case 1:q=3*Math.PI/2,r=!0}t>0?(o.push(new d(m,t,n,p.length,a.tilewidth,a.tileheight)),o[o.length-1].rotation=q,o[o.length-1].flipped=r):o.push(new d(m,-1,n,p.length,a.tilewidth,a.tileheight)),n++,n===a.layers[g].width&&(p.push(o),n=0,o=[])}m.data=p,c.push(m)}for(b.layers=c,v=[],g=0;g<a.layers.length;g++)"imagelayer"===a.layers[g].type&&(w={name:a.layers[g].name,image:a.layers[g].image,x:a.layers[g].x,y:a.layers[g].y,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{}},a.layers[g].properties&&(w.properties=a.layers[g].properties),v.push(w));for(b.images=v,x=[],y=[],g=0;g<a.tilesets.length;g++)z=a.tilesets[g],z.image&&(A=new e(z.name,z.firstgid,z.tilewidth,z.tileheight,z.margin,z.spacing,z.properties),z.tileproperties&&(A.tileProperties=z.tileproperties),A.updateTileData(z.imagewidth,z.imageheight),x.push(A));for(b.tilesets=x,b.imagecollections=y,B={},C={},D=function(a,b){var c,d,e={};for(c in b)d=b[c],void 0!==a[d]&&(e[d]=a[d]);return e},g=0;g<a.layers.length;g++)if("objectgroup"===a.layers[g].type)for(B[a.layers[g].name]=[],C[a.layers[g].name]=[],E=0,j=a.layers[g].objects.length;j>E;E++)if(a.layers[g].objects[E].gid)F={gid:a.layers[g].objects[E].gid,name:a.layers[g].objects[E].name,type:a.layers[g].objects[E].hasOwnProperty("type")?a.layers[g].objects[E].type:"",x:a.layers[g].objects[E].x,y:a.layers[g].objects[E].y,visible:a.layers[g].objects[E].visible,properties:a.layers[g].objects[E].properties},a.layers[g].objects[E].rotation&&(F.rotation=a.layers[g].objects[E].rotation),B[a.layers[g].name].push(F);else if(a.layers[g].objects[E].polyline){for(F={name:a.layers[g].objects[E].name,type:a.layers[g].objects[E].type,x:a.layers[g].objects[E].x,y:a.layers[g].objects[E].y,width:a.layers[g].objects[E].width,height:a.layers[g].objects[E].height,visible:a.layers[g].objects[E].visible,properties:a.layers[g].objects[E].properties},a.layers[g].objects[E].rotation&&(F.rotation=a.layers[g].objects[E].rotation),F.polyline=[],G=0;G<a.layers[g].objects[E].polyline.length;G++)F.polyline.push([a.layers[g].objects[E].polyline[G].x,a.layers[g].objects[E].polyline[G].y]);C[a.layers[g].name].push(F),B[a.layers[g].name].push(F)}else if(a.layers[g].objects[E].polygon){for(F=D(a.layers[g].objects[E],["name","type","x","y","visible","rotation","properties"]),F.polygon=[],G=0;G<a.layers[g].objects[E].polygon.length;G++)F.polygon.push([a.layers[g].objects[E].polygon[G].x,a.layers[g].objects[E].polygon[G].y]);B[a.layers[g].name].push(F)}else a.layers[g].objects[E].ellipse?(F=D(a.layers[g].objects[E],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]),B[a.layers[g].name].push(F)):(F=D(a.layers[g].objects[E],["name","type","x","y","width","height","visible","rotation","properties"]),F.rectangle=!0,B[a.layers[g].name].push(F));for(b.objects=B,b.collision=C,b.tiles=[],g=0;g<b.tilesets.length;g++)for(z=b.tilesets[g],n=z.tileMargin,H=z.tileMargin,I=0,J=0,K=0,u=z.firstgid;u<z.firstgid+z.total&&(b.tiles[u]=[n,H,g],n+=z.tileWidth+z.tileSpacing,I++,I!==z.total)&&(J++,J!==z.columns||(n=z.tileMargin,H+=z.tileHeight+z.tileSpacing,J=0,K++,K!==z.rows));u++);for(g=0;g<b.layers.length;g++)for(m=b.layers[g],l=0;l<m.data.length;l++)for(o=m.data[l],N=0;N<o.length;N++)L=o[N],L.index<0||(M=b.tiles[L.index][2],z=b.tilesets[M],z.tileProperties&&z.tileProperties[L.index-z.firstgid]&&(L.properties=f.mixin(z.tileProperties[L.index-z.firstgid],L.properties)));return b}};b.exports=g},{118:118,124:124,134:134}],122:[function(a,b,c){(function(a){function c(a,b,d){this._tilemap=a,this._layerIndex=this._tilemap.getLayerIndex(b),this._tilesetIndex=this._tilemap.getTilesetIndex(d),this._open,this._closed,this._visited,this._useDiagonal=!0,this._findClosest=!0,this._walkablePropName="walkable",this._distanceFunction=c.DISTANCE_EUCLIDIAN,this._lastPath=null,this._debug=!0}c.COST_ORTHOGONAL=1,c.COST_DIAGONAL=c.COST_ORTHOGONAL*a.Math.sqrt(2),c.DISTANCE_MANHATTAN="distManhattan",c.DISTANCE_EUCLIDIAN="distEuclidian",c.prototype.constructor=c,c.prototype.updateMap=function(){var a,b,d,e,f,g,h=this._tilemap.tilesets[this._tilesetIndex];for(f=0;f<this._tilemap.height;f++)for(g=0;g<this._tilemap.width;g++)a=this._tilemap.layers[this._layerIndex].data[f][g],b=a.index-h.firstgid,a.index<0||(e=h.tileProperties[b],d=e&&"true"===e.walkable?!0:!1,a.properties.astarNode=new c.TilemapPathingNode(g,f,d,e))},c.prototype.findPath=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=new c.TilemapPathingPath,r=this._tilemap.layers[this._layerIndex].data[a.y][a.x].properties.astarNode,s=this._tilemap.layers[this._layerIndex].data[b.y][b.x].properties.astarNode;for(q.start=r,q.goal=s,this._open=[],this._closed=[],this._visited=[],this._open.push(r),r.g=0,r.h=this[this._distanceFunction](r,s),r.f=r.h,r.parent=null;this._open.length>0;){for(d=1/0,f=0;f<this._open.length;f++)this._open[f].f<d&&(e=this._open[f],d=e.f);if(e==s)return q.nodes=this.reconstructPath(s),this._lastPath=q,this._debug===!0&&(q.visited=this._visited),q;for(this._open.splice(this._open.indexOf(e),1),this._closed.push(e),g=this.neighbors(e),h=0;h<g.length;h++)i=g[h],-1==this._closed.indexOf(i)&&(j=e.g+i.travelCost,k=!1,-1==this._open.indexOf(i)?(this._open.push(i),k=!0,this._debug===!0&&this.visit(i)):j<i.g&&(k=!0),k&&(i.parent=e,i.g=j,i.h=this[this._distanceFunction](i,s),i.f=i.g+i.h))}if(this._findClosest===!0){for(l=1/0,f=0,p=this._closed.length;p>f;f++)n=this._closed[f],o=this[this._distanceFunction](s,n),l>o&&(l=o,m=n);q.nodes=this.reconstructPath(m),this._debug===!0&&(q.visited=this._visited)}return this._lastPath=q,q},c.prototype.reconstructPath=function(a){for(var b=[],c=a;c.parent;)b.push({x:c.x,y:c.y}),c=c.parent;return b},c.prototype.visit=function(a){for(var b in this._visited)if(this._visited[b]==a)return;this._visited.push(a)},c.prototype.neighbors=function(a){var b=a.x,d=a.y,e=null,f=[],g=a.properties||{},h=this._tilemap.layers[this._layerIndex].data;return b>0&&"false"===g.collisionLeft&&(e=h[d][b-1].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),b<this._tilemap.width-1&&"false"===g.collisionRight&&(e=h[d][b+1].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),d>0&&"false"===g.collisionTop&&(e=h[d-1][b].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),d<this._tilemap.height-1&&"false"===g.collisionBottom&&(e=h[d+1][b].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),this._useDiagonal===!1?f:(b>0&&d>0&&"false"===g.collisionTop&&"false"===g.collisionLeft&&(e=h[d-1][b-1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionRight&&"false"===e.properties.collisionBottom&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b<this._tilemap.width-1&&d>0&&"false"===g.collisionTop&&"false"===g.collisionRight&&(e=h[d-1][b+1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionLeft&&"false"===e.properties.collisionBottom&&(e.travelCost=c.COST_DIAGONAL,
f.push(e))),b>0&&d<this._tilemap.height-1&&"false"===g.collisionBottom&&"false"===g.collisionLeft&&(e=h[d+1][b-1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionRight&&"false"===e.properties.collisionTop&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b<this._tilemap.width-1&&d<this._tilemap.height-1&&"false"===g.collisionRight&&"false"===g.collisionBottom&&(e=h[d+1][b+1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionTop&&"false"===e.properties.collisionLeft&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),f)},c.prototype.distManhattan=function(b,c){return a.Math.abs(b.x-c.x)+a.Math.abs(b.y-c.y)},c.prototype.distEuclidian=function(b,c){return a.Math.sqrt(a.Math.pow(b.x-c.x,2)+a.Math.pow(b.y-c.y,2))},c.TilemapPathingNode=function(a,b,c,d){this.x=a,this.y=b,this.g=0,this.h=0,this.f=0,this.parent,this.walkable=c,this.properties=d,this.travelCost},c.TilemapPathingPath=function(a,b,c){this.nodes=a||[],this.start=b||null,this.goal=c||null,this.visited=[]},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],123:[function(a,b,c){(function(c){function d(a,b,c,d,i){d|=0,i|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPSPRITE,this.canvas=h.create(d,i),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)"},this.dirty=!0,this.rayStepRate=4,this._mc={renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._results=[]}var e=a("pixi"),f=a(66),g=a(86),h=a(115);a(116);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.update=function(){g.prototype.update.call(this),this.render()},d.prototype.destroy=function(){h.remove(this),g.prototype.destroy.call(this)},d.prototype.resize=function(a,b){},d.prototype.getTileX=function(a){return c.Math.floor(a/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(a/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;j+l>m;m++)for(n=i;i+k>n;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(2e3>a)for(;d.length<a;)d.push(void 0);return c=this.map.tiles[a]&&this.map.tiles[a][2],null!=c&&(b=this.map.tilesets[c],b&&b.containsTileIndex(a))?d[a]=b:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.renderRegion=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this.context,r=this.layer.width,s=this.layer.height,t=this._mc.tileWidth,u=this._mc.tileHeight,v=this._mc.tilesets,w=NaN,x=c*t-a,y=d*u-b,z=(c+(1<<20)*r)%r,A=(d+(1<<20)*s)%s;for(q.fillStyle=this.tileColor,j=A,l=f-d,h=y;l>=0;j++,l--,h+=u)for(j>=s&&(j-=s),m=this.layer.data[j],i=z,k=e-c,g=x;k>=0;i++,k--,g+=t)i>=r&&(i-=r),n=m[i],!n||n.index<0||(o=n.index,p=v[o],void 0===p&&(p=this.resolveTileset(o)),n.alpha===w||this.debug||(q.globalAlpha=n.alpha,w=n.alpha),p?n.rotation||n.flipped?(q.save(),q.translate(g+n.centerX,h+n.centerY),q.rotate(n.rotation),n.flipped&&q.scale(-1,1),p.draw(q,-n.centerX,-n.centerY,o),q.restore()):p.draw(q,g,h,o):this.debugSettings.missingImageFill&&(q.fillStyle=this.debugSettings.missingImageFill,q.fillRect(g,h,t,u)),n.debug&&this.debugSettings.debuggedTileOverfill&&(q.fillStyle=this.debugSettings.debuggedTileOverfill,q.fillRect(g,h,t,u)))},d.prototype.renderFull=function(){var a=0,b=0,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=0,i=0,j=c.Math.floor((d-1)/f),k=c.Math.floor((e-1)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,i,j,k)},d.prototype.render=function(){var a=!1;this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,a=!0),a&&(this.context.save(),this.renderFull(),this.texture.update(),this.dirty=!1,this.context.restore()))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{115:115,116:116,66:66,86:86,pixi:"pixi"}],124:[function(a,b,c){(function(a){function c(a,b,c,d,e,f,g){(void 0===c||0>=c)&&(c=32),(void 0===d||0>=d)&&(d=32),void 0===e&&(e=0),void 0===f&&(f=0),this.name=a,this.firstgid=0|b,this.tileWidth=0|c,this.tileHeight=0|d,this.tileMargin=0|e,this.tileSpacing=0|f,this.properties=g||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]}c.prototype={draw:function(a,b,c,d){var e=d-this.firstgid<<1;e>=0&&e+1<this.drawCoords.length&&a.drawImage(this.image,this.drawCoords[e],this.drawCoords[e+1],this.tileWidth,this.tileHeight,b,c,this.tileWidth,this.tileHeight)},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},setImage:function(a){this.image=a,this.updateTileData(a.width,a.height)},setSpacing:function(a,b){this.tileMargin=0|a,this.tileSpacing=0|b,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(b,c){var d,e,f,g,h=(c-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(b-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);for((h%1!==0||i%1!==0)&&console.warn("Tileset - image tile area is not an even multiple of tile size"),h=a.Math.floor(h),i=a.Math.floor(i),(this.rows&&this.rows!==h||this.columns&&this.columns!==i)&&console.warn("Tileset - actual and expected number of tile rows and columns differ"),this.rows=h,this.columns=i,this.total=h*i,this.drawCoords.length=0,d=this.tileMargin,e=this.tileMargin,f=0;f<this.rows;f++){for(g=0;g<this.columns;g++)this.drawCoords.push(d),this.drawCoords.push(e),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin,e+=this.tileHeight+this.tileSpacing}}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],125:[function(a,b,c){(function(c){function d(a){this.game=a,this.time=0,this.prevTime=0,this.now=0,this.previousDateNow=0,this.elapsed=0,this.elapsedMS=0,this.slowMotion=1,this.desiredFpsMult=1/d.DESIRED_FPS,this.advancedTiming=!0,this.suggestedFps=null,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new e(this.game,!1),this._desiredFps=d.DESIRED_FPS,this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]}var e=a(126);d.DESIRED_FPS=60,d.prototype.constructor=d,d.prototype.boot=function(){this._started=c.Date.now(),this.time=c.Date.now(),this.events.start()},d.prototype.benchmark=function(){this.events.add(6e3,function(){this.advancedTiming=!1,this.suggestedFps<57.5&&this.game.emit("fpsProblem")},this)},d.prototype.add=function(a){return this._timers.push(a),a},d.prototype.create=function(a){void 0===a&&(a=!0);var b=new e(this.game,a);return this._timers.push(b),b},d.prototype.removeAll=function(){for(var a=0;a<this._timers.length;a++)this._timers[a].destroy();this._timers=[],this.events.removeAll()},d.prototype.update=function(a){this.previousDateNow=this.time,this.time=c.Date.now(),this.elapsedMS=this.time-this.previousDateNow,this.prevTime=this.now,this.now=a,this.elapsed=this.now-this.prevTime,this.game.raf&&this.game.raf._isSetTimeOut&&(this.timeToCall=c.Math.floor(c.Math.max(0,1e3/this._desiredFps-(this.timeExpected-a))),this.timeExpected=a+this.timeToCall),this.advancedTiming?this.updateAdvancedTiming():(this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=c.Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this._timeLastSecond=this.now,this.frames=0)),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},d.prototype.refresh=function(){var a=this.time;this.time=c.Date.now(),this.elapsedMS=this.time-a},d.prototype.updateTimers=function(){for(var a=0,b=this._timers.length;b>a;)this._timers[a].update(this.time)?a++:(this._timers.splice(a,1),b--)},d.prototype.updateAdvancedTiming=function(){this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=2.5*c.Math.floor(400/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=c.Math.min(this.msMin,this.elapsed),this.msMax=c.Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=c.Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=c.Math.min(this.fpsMin,this.fps),this.fpsMax=c.Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)},d.prototype.gamePaused=function(){this._pauseStarted=c.Date.now(),this.events.pause();for(var a=this._timers.length;a--;)this._timers[a]._pause()},d.prototype.gameResumed=function(){this.time=c.Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var a=this._timers.length;a--;)this._timers[a]._resume()},d.prototype.totalElapsedSeconds=function(){return.001*(this.time-this._started)},d.prototype.elapsedSince=function(a){return this.time-a},d.prototype.elapsedSecondsSince=function(a){return.001*(this.time-a)},d.prototype.reset=function(){this._started=this.time,this.removeAll()},Object.defineProperty(d.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(a){this._desiredFps=a,this.desiredFpsMult=1/a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126}],126:[function(a,b,c){(function(c){function d(a,b){void 0===b&&(b=!0),this.game=a,this.running=!1,this.autoDestroy=b,this.expired=!1,this.elapsed=0,this.events=[],this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=c.Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0,f.call(this)}var e=a(127),f=a(3);d.MINUTE=6e4,d.SECOND=1e3,d.HALF=500,d.QUARTER=250,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(a,b,d,f,g,h){a=c.Math.round(a);var i,j=a;return j+=0===this._now?this.game.clock.time:this._now,i=new e(this,a,j,d,b,f,g,h),this.events.push(i),this.order(),this.expired=!1,i},d.prototype.add=function(a,b,c){return this.create(a,!1,0,b,c,Array.prototype.slice.call(arguments,3))},d.prototype.repeat=function(a,b,c,d){return this.create(a,!1,b,c,d,Array.prototype.slice.call(arguments,4))},d.prototype.loop=function(a,b,c){return this.create(a,!0,0,b,c,Array.prototype.slice.call(arguments,3))},d.prototype.start=function(a){if(!this.running){this._started=this.game.clock.time+(a||0),this.running=!0;for(var b=0;b<this.events.length;b++)this.events[b].tick=this.events[b].delay+this._started}},d.prototype.stop=function(a){if(this.running=!1,void 0===a&&(a=!0),a)for(var b=0;b<this.events.length;b++)this.events[b].pendingDelete=!0},d.prototype.remove=function(a){for(var b=0;b<this.events.length;b++)if(this.events[b]===a)return this.events[b].pendingDelete=!0,!0;return!1},d.prototype.order=function(){this.events.length>0&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},d.prototype.sortHandler=function(a,b){return a.tick<b.tick?-1:a.tick>b.tick?1:0},d.prototype.clearPendingEvents=function(){var a,b=this.events;for(this._i=b.length;this._i--;)a=b[this._i],a.pendingDelete&&(a.emit("complete",a.callbackContext),a.removeAllListeners(),b.splice(this._i,1));this._len=b.length,this._i=0},d.prototype.update=function(a){if(this.paused)return!0;this.elapsed=a-this._now,this._now=a,this.elapsed>this.timeCap&&(this.adjustEvents(a-this.elapsed),console.warn("Timer: elapsed > timeCap code branch executed, adjusted event timers")),this._marked=0,this.clearPendingEvents();var b;if(this.running&&this._now>=this.nextTick&&this._len>0){for(;this._i<this._len&&this.running&&(b=this.events[this._i],this._now>=b.tick&&!b.pendingDelete);)this._newTick=this._now+b.delay-(this._now-b.tick),this._newTick<0&&(this._newTick=this._now+b.delay),b.loop===!0?(b.tick=this._newTick,b.callback.apply(b.callbackContext,b.args)):b.repeatCount>0?(b.repeatCount--,b.tick=this._newTick,b.callback.apply(b.callbackContext,b.args)):(this._marked++,b.pendingDelete=!0,b.callback.apply(b.callbackContext,b.args)),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.emit("complete",this))}return this.expired&&this.autoDestroy?!1:!0},d.prototype.pause=function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.clock.time,this.paused=!0))},d.prototype._pause=function(){!this.paused&&this.running&&(this._pauseStarted=this.game.clock.time,this.paused=!0)},d.prototype.adjustEvents=function(a){var b,c,d;for(b=0;b<this.events.length;b++)this.events[b].pendingDelete||(c=this.events[b].tick-a,0>c&&(c=0),this.events[b].tick=this._now+c);d=this.nextTick-a,0>d?this.nextTick=this._now:this.nextTick=this._now+d},d.prototype.resume=function(){if(this.paused){var a=this.game.clock.time;this._pauseTotal+=a-this._now,this._now=a,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},d.prototype._resume=function(){this._codePaused||this.resume()},d.prototype.removeAll=function(){this.removeAllListeners(),this.events.length=0,this._len=0,this._i=0},d.prototype.destroy=function(){this.removeAllListeners(),this.running=!1,this.events=[],this._len=0,this._i=0},Object.defineProperty(d.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(d.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(d.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(d.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(d.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{127:127,3:3}],127:[function(a,b,c){function d(a,b,c,d,f,g,h,i){this.timer=a,this.delay=b,this.tick=c,this.repeatCount=d-1,this.loop=f,this.callback=g,this.callbackContext=h,this.args=i,this.pendingDelete=!1,e.call(this)}var e=a(3);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{3:3}],128:[function(a,b,c){(function(a){var c={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Sinusoidal:{In:function(b){return 0===b?0:1===b?1:1-a.Math.cos(b*a.Math.PI/2)},Out:function(b){return 0===b?0:1===b?1:a.Math.sin(b*a.Math.PI/2)},InOut:function(b){return 0===b?0:1===b?1:.5*(1-a.Math.cos(a.Math.PI*b))}}};c.Default=c.Linear.None,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],129:[function(a,b,c){function d(a,b,c){this.game=b,this.target=a,this.manager=c,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=c.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1,h.call(this)}var e=a(130),f=a(128),g=a(136),h=a(3);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.create=function(){this.timeline.push(new e(this))},d.prototype.to=function(a,b,c,d,g,h,i){return(void 0===b||0>=b)&&(b=1e3),(void 0===c||null===c)&&(c=f.Default),void 0===d&&(d=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.to cannot be called after Tween.start"),this):(this.timeline.push(new e(this).to(a,b,c,g,h,i)),d&&this.start(),this)},d.prototype.from=function(a,b,c,d,g,h,i){return void 0===b&&(b=1e3),(void 0===c||null===c)&&(c=f.Default),void 0===d&&(d=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.from cannot be called after Tween.start"),this):(this.timeline.push(new e(this).from(a,b,c,g,h,i)),d&&this.start(),this)},d.prototype.start=function(a){var b,c;if(void 0===a&&(a=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(b=0;b<this.timeline.length;b++)for(c in this.timeline[b].vEnd)this.properties[c]=this.target[c]||0,Array.isArray(this.properties[c])||(this.properties[c]*=1);for(b=0;b<this.timeline.length;b++)this.timeline[b].loadValues();return this.manager.add(this),this.isRunning=!0,(0>a||a>this.timeline.length-1)&&(a=0),this.current=a,this.timeline[this.current].start(),this},d.prototype.stop=function(a){return void 0===a&&(a=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,a&&(this.emit("complete",this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},d.prototype.updateTweenData=function(a,b,c){if(0===this.timeline.length)return this;if(void 0===c&&(c=0),-1===c)for(var d=0;d<this.timeline.length;d++)this.timeline[d][a]=b;else this.timeline[c][a]=b;return this},d.prototype.delay=function(a,b){return this.updateTweenData("delay",a,b)},d.prototype.repeat=function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("repeatCounter",a,c),this.updateTweenData("repeatDelay",b,c)},d.prototype.repeatDelay=function(a,b){return this.updateTweenData("repeatDelay",a,b)},d.prototype.yoyo=function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("yoyo",a,c),this.updateTweenData("yoyoDelay",b,c)},d.prototype.yoyoDelay=function(a,b){return this.updateTweenData("yoyoDelay",a,b)},d.prototype.easing=function(a,b){return"string"==typeof a&&this.manager.easeMap[a]&&(a=this.manager.easeMap[a]),this.updateTweenData("easingFunction",a,b)},d.prototype.interpolation=function(a,b,c){return void 0===b&&(b=g),this.updateTweenData("interpolationFunction",a,c),this.updateTweenData("interpolationContext",b,c)},d.prototype.repeatAll=function(a){return void 0===a&&(a=0),this.repeatCounter=a,this},d.prototype.chain=function(){for(var a=arguments.length;a--;)a>0?arguments[a-1].chainedTween=arguments[a]:this.chainedTween=arguments[a];return this},d.prototype.loop=function(a){return void 0===a&&(a=!0),a?this.repeatAll(-1):this.repeatCounter=0,this},d.prototype.onUpdateCallback=function(a,b){return this._onUpdateCallback=a,this._onUpdateCallbackContext=b,this},d.prototype.pause=function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},d.prototype._pause=function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},d.prototype.resume=function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var a=0;a<this.timeline.length;a++)this.timeline[a].isRunning||(this.timeline[a].startTime+=this.game.time.time-this._pausedTime)}},d.prototype._resume=function(){this._codePaused||this.resume()},d.prototype.update=function(a){var b,c;return this.pendingDelete?!1:this.isPaused?!0:(b=this.timeline[this.current].update(a),b===e.PENDING?!0:b===e.RUNNING?(this._hasStarted||(this.emit("start",this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning):b===e.LOOPED?(this.emit("loop",this),!0):b===e.COMPLETE?(c=!1,this.reverse?(this.current--,this.current<0&&(this.current=this.timeline.length-1,c=!0)):(this.current++,this.current===this.timeline.length&&(this.current=0,c=!0)),c?-1===this.repeatCounter?(this.timeline[this.current].start(),this.emit("repeat",this),!0):this.repeatCounter>0?(this.repeatCounter--,this.timeline[this.current].start(),this.emit("repeat",this),!0):(this.isRunning=!1,this.emit("complete",this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.emit("childComplete",this),this.timeline[this.current].start(),!0)):void 0)},d.prototype.generateData=function(a,b){var c,d;if(null===this.game||null===this.target)return null;for(void 0===a&&(a=60),void 0===b&&(b=[]),c=0;c<this.timeline.length;c++)for(d in this.timeline[c].vEnd)this.properties[d]=this.target[d]||0,Array.isArray(this.properties[d])||(this.properties[d]*=1);for(c=0;c<this.timeline.length;c++)this.timeline[c].loadValues();for(c=0;c<this.timeline.length;c++)b=b.concat(this.timeline[c].generateData(a));return b},Object.defineProperty(d.prototype,"totalDuration",{get:function(){var a,b=0;for(a=0;a<this.timeline.length;a++)b+=this.timeline[a].duration;return b}}),d.prototype.constructor=d,b.exports=d},{128:128,130:130,136:136,3:3}],130:[function(a,b,c){function d(a){this.parent=a,this.game=a.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=e.Default,this.interpolationFunction=f.linearInterpolation,this.interpolationContext=f,this.isRunning=!1,this.isFrom=!1}var e=a(128),f=a(136);d.PENDING=0,d.RUNNING=1,d.LOOPED=2,d.COMPLETE=3,d.prototype={to:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!1,this},from:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.clock.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,this.delay>0?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a],this.parent.target[a]=this.vStart[a];return this.value=0,this.yoyoCounter=0,this},loadValues:function(){for(var a in this.parent.properties){if(this.vStart[a]=this.parent.properties[a],Array.isArray(this.vEnd[a])){if(0===this.vEnd[a].length)continue;0===this.percent&&(this.vEnd[a]=[this.vStart[a]].concat(this.vEnd[a]))}void 0!==this.vEnd[a]?("string"==typeof this.vEnd[a]&&(this.vEnd[a]=this.vStart[a]+parseFloat(this.vEnd[a],10)),this.parent.properties[a]=this.vEnd[a]):this.vEnd[a]=this.vStart[a],this.vStartCache[a]=this.vStart[a],this.vEndCache[a]=this.vEnd[a]}return this},update:function(a){var b,c,e,g;if(this.isRunning){if(a<this.startTime)return d.RUNNING}else{if(!(a>=this.startTime))return d.PENDING;this.isRunning=!0}b=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.clock.elapsedMS,this.parent.reverse?(this.dt-=b*this.parent.timeScale,this.dt=f.max(this.dt,0)):(this.dt+=b*this.parent.timeScale,this.dt=f.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);for(c in this.vEnd)e=this.vStart[c],g=this.vEnd[c],Array.isArray(g)?this.parent.target[c]=this.interpolationFunction.call(this.interpolationContext,g,this.value):this.parent.target[c]=e+(g-e)*this.value;return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():d.RUNNING},generateData:function(a){var b,c,d,e,g,h,i,j;this.parent.reverse?this.dt=this.duration:this.dt=0,b=[],c=!1,d=1/a*1e3;do{this.parent.reverse?(this.dt-=d,this.dt=f.max(this.dt,0)):(this.dt+=d,this.dt=f.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),e={};for(g in this.vEnd)h=this.vStart[g],i=this.vEnd[g],Array.isArray(i)?e[g]=this.interpolationFunction(i,this.value):e[g]=h+(i-h)*this.value;b.push(e),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(c=!0)}while(!c);return this.yoyo&&(j=b.slice(),j.reverse(),b=b.concat(j)),b},repeat:function(){var a;if(this.yoyo){if(this.inReverse&&0===this.repeatCounter){for(a in this.vStartCache)this.vStart[a]=this.vStartCache[a],this.vEnd[a]=this.vEndCache[a];return this.inReverse=!1,d.COMPLETE}this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return d.COMPLETE;if(this.inReverse)for(a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a];else{for(a in this.vStartCache)this.vStart[a]=this.vStartCache[a],this.vEnd[a]=this.vEndCache[a];this.repeatCounter>0&&this.repeatCounter--}return this.startTime=this.game.clock.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,d.LOOPED}},d.prototype.constructor=d,b.exports=d},{128:128,136:136}],131:[function(a,b,c){function d(a){this.game=a,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Linear:f.Linear.None,Quad:f.Quadratic.Out,"Quad.easeIn":f.Quadratic.In,"Quad.easeOut":f.Quadratic.Out,"Quad.easeInOut":f.Quadratic.InOut}}var e=a(66),f=a(128),g=a(129);d.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var a=0;a<this._tweens.length;a++)this._tweens[a].pendingDelete=!0;this._add=[]},removeFrom:function(a,b){var c,d;if(void 0===b&&(b=!0),Array.isArray(a))for(c=0,d=a.length;d>c;c++)this.removeFrom(a[c]);else if(a.type===e.GROUP&&b)for(c=0,d=a.children.length;d>c;c++)this.removeFrom(a.children[c]);else{for(c=0,d=this._tweens.length;d>c;c++)a===this._tweens[c].target&&this.remove(this._tweens[c]);for(c=0,d=this._add.length;d>c;c++)a===this._add[c].target&&this.remove(this._add[c])}},add:function(a){a._manager=this,a.pendingDelete=!1,-1===this._add.indexOf(a)&&-1===this._tweens.indexOf(a)&&this._add.push(a)},create:function(a){return new g(a,this.game,this)},remove:function(a){var b=this._tweens.indexOf(a);-1!==b?this._tweens[b].pendingDelete=!0:(b=this._add.indexOf(a),-1!==b&&(this._add[b].pendingDelete=!0))},update:function(){var a,b=this._add.length,c=this._tweens.length;if(0===c&&0===b)return!1;for(a=0;c>a;)this._tweens[a].update(this.game.clock.time)?a++:(this._tweens.splice(a,1),c--);return b>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(a){return this._tweens.some(function(b){return b.target===a})},_pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._pause()},_resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._resume()},pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].pause()},resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].resume(!0)}},d.prototype.constructor=d,b.exports=d},{128:128,129:129,66:66}],132:[function(a,b,c){function d(a){this.position=0,this.list=a||[]}d.prototype={add:function(a){return this.exists(a)||this.list.push(a),a},getIndex:function(a){return this.list.indexOf(a)},getByKey:function(a,b){for(var c=this.list.length;c--;)if(this.list[c][a]===b)return this.list[c];return null},exists:function(a){return this.list.indexOf(a)>-1},reset:function(){this.list.length=0},remove:function(a){var b=this.list.indexOf(a);return b>-1?(this.list.splice(b,1),a):void 0},setAll:function(a,b){for(var c=this.list.length;c--;)this.list[c]&&(this.list[c][a]=b)},callAll:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.list.length;c--;)this.list[c]&&this.list[c][a]&&this.list[c][a].apply(this.list[c],b)},removeAll:function(a){var b,c;for(void 0===a&&(a=!1),b=this.list.length;b--;)this.list[b]&&(c=this.remove(this.list[b]),a&&c.destroy());this.position=0,this.list=[]}},Object.defineProperty(d.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(d.prototype,"first",{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}}),Object.defineProperty(d.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),d.prototype.constructor=d,b.exports=d},{}],133:[function(a,b,c){(function(c){var d=a(136),e={getRandomItem:function(a,b,e){if(null==a)return null;void 0===b&&(b=0),void 0===e&&(e=a.length);var f=b+c.Math.floor(d.random()*e);return void 0===a[f]?null:a[f]},removeRandomItem:function(a,b,e){var f,g;return null==a?null:(void 0===b&&(b=0),void 0===e&&(e=a.length),f=b+c.Math.floor(d.random()*e),f<a.length?(g=a.splice(f,1),void 0===g[0]?null:g[0]):null)},shuffle:function(a){var b,e,f;for(b=a.length-1;b>0;b--)e=c.Math.floor(d.random()*(b+1)),f=a[b],a[b]=a[e],a[e]=f;return a},transposeMatrix:function(a){var b,c,d=a.length,e=a[0].length,f=Array(e);for(b=0;e>b;b++)for(f[b]=Array(d),c=d-1;c>-1;c--)f[b][c]=a[c][b];return f},rotateMatrix:function(a,b){if("string"!=typeof b&&(b=(b%360+360)%360),90===b||-270===b||"rotateLeft"===b)a=e.transposeMatrix(a),a=a.reverse();else if(-90===b||270===b||"rotateRight"===b)a=a.reverse(),a=e.transposeMatrix(a);else if(180===d.abs(b)||"rotate180"===b){for(var c=0;c<a.length;c++)a[c].reverse();a=a.reverse()}return a},findClosest:function(a,b){var c,d,e;if(!b.length)return NaN;if(1===b.length||a<b[0])return b[0];for(c=1;b[c]<a;)c++;return d=b[c-1],e=c<b.length?b[c]:Number.POSITIVE_INFINITY,a-d>=e-a?e:d},rotate:function(a){var b=a.shift();return a.push(b),b},numberArray:function(a,b){var c,d=[];for(c=a;b>=c;c++)d.push(c);return d},numberArrayStep:function(a,b,e){var f,g,h;for((void 0===a||null===a)&&(a=0),(void 0===b||null===b)&&(b=a,a=0),void 0===e&&(e=1),f=[],g=c.Math.max(d.roundAwayFromZero((b-a)/(e||1)),0),h=0;g>h;h++)f.push(a),a+=e;return f}};b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{136:136}],134:[function(a,b,c){var d={isPlainObject:function(a){if("object"!=typeof a||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},extend:function(){var a,b,c,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(b in a)c=h[b],e=a[b],h!==e&&(k&&e&&(d.isPlainObject(e)||(f=Array.isArray(e)))?(f?(f=!1,g=c&&Array.isArray(c)?c:[]):g=c&&d.isPlainObject(c)?c:{},h[b]=d.extend(k,g,e)):void 0!==e&&(h[b]=e));return h},mixinPrototype:function(a,b,c){var d,e,f,g;for(void 0===c&&(c=!1),d=Object.keys(b),e=0;e<d.length;e++)f=d[e],g=b[f],!c&&f in a||(!g||"function"!=typeof g.get&&"function"!=typeof g.set?a[f]=g:"function"==typeof g.clone?a[f]=g.clone():Object.defineProperty(a,f,g))},mixin:function(a,b){var c,e,f;if(!a||"object"!=typeof a)return b;if(Array.isArray(a))return a;for(c in a)e=a[c],e&&(e.childNodes||e.cloneNode)||(f=typeof a[c],a[c]&&"object"===f?typeof b[c]===f?b[c]=d.mixin(a[c],b[c]):b[c]=d.mixin(a[c],new e.constructor):b[c]=a[c]);return b}};b.exports=d},{}],135:[function(a,b,c){var d={getColor:function(a,b,c){return a<<16|b<<8|c},getRGB:function(a){return a>16777215?{alpha:a>>>24,red:a>>16&255,green:a>>8&255,blue:255&a,a:a>>>24,r:a>>16&255,g:a>>8&255,
b:255&a}:{alpha:255,red:a>>16&255,green:a>>8&255,blue:255&a,a:255,r:a>>16&255,g:a>>8&255,b:255&a}},interpolateColor:function(a,b,c,e){var f=d.getRGB(a),g=d.getRGB(b),h=(g.red-f.red)*e/c+f.red,i=(g.green-f.green)*e/c+f.green,j=(g.blue-f.blue)*e/c+f.blue;return d.getColor(h,i,j)},interpolateColorWithRGB:function(a,b,c,e,f,g){var h=d.getRGB(a),i=(b-h.red)*g/f+h.red,j=(c-h.green)*g/f+h.green,k=(e-h.blue)*g/f+h.blue;return d.getColor(i,j,k)},interpolateRGB:function(a,b,c,e,f,g,h,i){var j=(e-a)*i/h+a,k=(f-b)*i/h+b,l=(g-c)*i/h+c;return d.getColor(j,k,l)}};b.exports=d},{}],136:[function(a,b,c){(function(a){var c=a.Math.PI/180,d=180/a.Math.PI;b.exports={PI2:2*a.Math.PI,degToRad:function(a){return a*c},radToDeg:function(a){return a*d},fuzzyEqual:function(b,c,d){return void 0===d&&(d=1e-4),a.Math.abs(b-c)<d},fuzzyLessThan:function(a,b,c){return void 0===c&&(c=1e-4),b+c>a},fuzzyGreaterThan:function(a,b,c){return void 0===c&&(c=1e-4),a>b-c},fuzzyCeil:function(b,c){return void 0===c&&(c=1e-4),a.Math.ceil(b-c)},fuzzyFloor:function(b,c){return void 0===c&&(c=1e-4),a.Math.floor(b+c)},average:function(){var a,b=0,c=arguments.length;for(a=0;c>a;a++)b+=+arguments[a];return b/c},shear:function(a){return a%1},snapTo:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.round(b/c),d+b)},snapToFloor:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.floor(b/c),d+b)},snapToCeil:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.ceil(b/c),d+b)},roundTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.round(b*e)/e},floorTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.floor(b*e)/e},ceilTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.ceil(b*e)/e},angleBetween:function(b,c,d,e){return a.Math.atan2(e-c,d-b)},angleBetweenY:function(b,c,d,e){return a.Math.atan2(d-b,e-c)},angleBetweenPoints:function(b,c){return a.Math.atan2(c.y-b.y,c.x-b.x)},angleBetweenPointsY:function(b,c){return a.Math.atan2(c.x-b.x,c.y-b.y)},worldAngleToPointer:function(b,c){var d=c.worldX-b.world.x,e=c.worldY-b.world.y;return a.Math.atan2(e,d)},reverseAngle:function(b){return this.normalizeAngle(b+a.Math.PI,!0)},normalizeAngle:function(b){return b%=2*a.Math.PI,b>=0?b:b+2*a.Math.PI},maxAdd:function(b,c,d){return a.Math.min(b+c,d)},minSub:function(b,c,d){return a.Math.max(b-c,d)},wrap:function(a,b,c){var d,e=c-b;return 0>=e?0:(d=(a-b)%e,0>d&&(d+=e),d+b)},wrapValue:function(b,c,d){var e;return b=a.Math.abs(b),c=a.Math.abs(c),d=a.Math.abs(d),e=(b+c)%d},isOdd:function(a){return!!(1&a)},isEven:function(a){return!(1&a)},min:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;d>b;b++)a[b]<a[c]&&(c=b);return a[c]},max:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;d>b;b++)a[b]>a[c]&&(c=b);return a[c]},minProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;e>c;c++)b[c][a]<b[d][a]&&(d=c);return b[d][a]},maxProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;e>c;c++)b[c][a]>b[d][a]&&(d=c);return b[d][a]},wrapAngle:function(b,c){return c?this.wrap(b,-a.Math.PI,a.Math.PI):this.wrap(b,-180,180)},linearInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return 0>c?this.linear(b[0],b[1],e):c>1?this.linear(b[d],b[d-1],d-e):this.linear(b[f],b[f+1>d?d:f+1],e-f)},bezierInterpolation:function(b,c){var d,e=0,f=b.length-1;for(d=0;f>=d;d++)e+=a.Math.pow(1-c,f-d)*a.Math.pow(c,d)*b[d]*this.bernstein(f,d);return e},catmullRomInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return b[0]===b[d]?(0>c&&(f=a.Math.floor(e=d*(1+c))),this.catmullRom(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):0>c?b[0]-(this.catmullRom(b[0],b[0],b[1],b[1],-e)-b[0]):c>1?b[d]-(this.catmullRom(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):this.catmullRom(b[f?f-1:0],b[f],b[f+1>d?d:f+1],b[f+2>d?d:f+2],e-f)},linear:function(a,b,c){return(b-a)*c+a},bernstein:function(a,b){return this.factorial(a)/this.factorial(b)/this.factorial(a-b)},factorial:function(a){if(0===a)return 1;for(var b=a;--a;)b*=a;return b},catmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b},difference:function(b,c){return a.Math.abs(b-c)},roundAwayFromZero:function(b){return b>0?a.Math.ceil(b):a.Math.floor(b)},sinCosGenerator:function(b,c,d,e){var f,g,h,i,j,k;for(void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=1),f=c,g=d,h=e*a.Math.PI/b,i=[],j=[],k=0;b>k;k++)g-=f*h,f+=g*h,i[k]=g,j[k]=f;return{sin:j,cos:i,length:b}},distance:function(b,c,d,e){var f=b-d,g=c-e;return a.Math.sqrt(f*f+g*g)},distanceSq:function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},distancePow:function(b,c,d,e,f){return void 0===f&&(f=2),a.Math.sqrt(a.Math.pow(d-b,f)+a.Math.pow(e-c,f))},clamp:function(a,b,c){return b>a?b:a>c?c:a},clampBottom:function(a,b){return b>a?b:a},within:function(b,c,d){return a.Math.abs(b-c)<=d},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*(3-2*b)},smootherstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*b*(b*(6*b-15)+10)},sign:function(a){return 0>a?-1:a>0?1:0},percent:function(a,b,c){return void 0===c&&(c=0),a>b||c>b?1:c>a||c>a?0:(a-c)/b}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],137:[function(a,b,c){(function(a){function c(a){void 0===a&&(a=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(a)}c.prototype={rnd:function(){var a=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|a,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},sow:function(a){var b,c;if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,a)for(c=0;c<a.length&&null!=a[c];c++)b=a[c],this.s0-=this.hash(b),this.s0+=~~(this.s0<0),this.s1-=this.hash(b),this.s1+=~~(this.s1<0),this.s2-=this.hash(b),this.s2+=~~(this.s2<0)},hash:function(a){var b,c,d;for(d=4022871197,a=""+a,c=0;c<a.length;c++)d+=a.charCodeAt(c),b=.02519603282416938*d,d=b>>>0,b-=d,b*=d,d=b>>>0,b-=d,d+=4294967296*b;return 2.3283064365386963e-10*(d>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(b,c){return a.Math.floor(this.realInRange(0,c-b+1)+b)},between:function(a,b){return this.integerInRange(a,b)},realInRange:function(a,b){return this.frac()*(b-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",b="";for(b=a="";a++<36;b+=~a%5|3*a&4?(15^a?8^this.frac()*(20^a?16:4):4).toString(16):"-");return b},pick:function(a){return a[this.integerInRange(0,a.length-1)]},weightedPick:function(b){return b[~~(a.Math.pow(this.frac(),2)*(b.length-1)+.5)]},timestamp:function(a,b){return this.realInRange(a||9466848e5,b||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],138:[function(a,b,c){function d(a,b,c){var d,g=a.cache.getImage("space",!0).base;g.mipmap=!0,d=this.tex=new f.Texture(g),f.Sprite.call(this,d),this.game=a,this.filter=new e(a),this.filter.setResolution(b,c),this.filter.setTexture(d),this.filters=[this.filter],this.cache()}var e=a(141),f=a("pixi");d.prototype=Object.create(f.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){},d.prototype.resize=function(a,b){this.filter.setResolution(a,b),this.cached&&this.cache()},d.prototype.cache=function(){this.uncache(),this.backgroundTexture&&this.backgroundTexture.destroy(),this.backgroundTexture=new f.RenderTexture(this.game.renderer,this.game.width,this.game.height),this.backgroundTexture.render(this),this.texture=this.backgroundTexture,this.filters=void 0,this.cached=!0},d.prototype.uncache=function(){this.cached=!1,this.texture=this.tex,this.filters=[this.filter]},d.prototype.destroy=function(){f.Sprite.prototype.destroy.call(this),this.game=this.filter=this.filters=this.tex=this.backgroundTexture=void 0},b.exports=d},{141:141,pixi:"pixi"}],139:[function(a,b,c){function d(a,b){var c=new e.Texture(this.getMipmapTexture(b)),d=new e.Texture(this.getMipmapTexture("clouds"));e.Sprite.call(this,c),this.game=a,this.pivot.set(512,512),this.planetShader=new f(a),this.planetShader.setTexture(c,d),this.glowSprite=new e.Sprite(c),this.glowSprite.shader=new g(a),this.glowTexture=new e.RenderTexture(a.renderer,c.width,c.height),this.glowTexture.render(this.glowSprite),this.glowSprite.texture=this.glowTexture,this.glowSprite.shader=void 0,this.addChild(this.glowSprite),this.shader=this.planetShader,this.game.on("fpsProblem",this.cache,this)}var e=a("pixi"),f=a(144),g=a(143);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){this.shader&&this.shader.update()},d.prototype.getMipmapTexture=function(a){var b=game.cache.getImage(a,!0).base;return b.mipmap=!0,b},d.prototype.cache=function(){this.planetTexture&&this.planetTexture.destroy(),this.planetTexture=new e.RenderTexture(this.game.renderer,this.width,this.height),this.planetTexture.render(this),this.texture=this.planetTexture,this.shader=void 0,this.removeChild(this.glowSprite)},d.prototype.uncache=function(){},d.prototype.destroy=function(){},b.exports=d},{143:143,144:144,pixi:"pixi"}],140:[function(a,b,c){function d(a,b,c){var d,g=a.cache.getImage("space",!0).base;g.mipmap=!0,d=new e.Texture(g),e.Sprite.call(this,d),this.game=a,this.filter=new f(a),this.filter.setResolution(b,c),this.filters=[this.filter],this.game.on("fpsProblem",this.destroy,this)}var e=a("pixi"),f=a(142);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){},d.prototype.resize=function(a,b){this.filter&&this.filter.setResolution(a,b)},d.prototype.destroy=function(){this.filters=void 0,this.filter=void 0,this.parent.removeChild(this),e.Sprite.prototype.destroy.call(this)},b.exports=d},{142:142,pixi:"pixi"}],141:[function(a,b,c){function d(a,b,c){this.game=a,this.uniforms={channel0:{type:"sampler2D",value:0,textureData:{wrapS:33071,wrapT:33071}},resolution:{type:"v2",value:{x:b,y:c}},transform:{type:"v2",value:{x:0,y:0}},time:{type:"f",value:0},scale:{type:"f",value:1}},e.AbstractFilter.call(this,"\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",'\nprecision lowp float;\n\nuniform sampler2D channel0;\n\nuniform float scale;\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 transform;\n\n// varying vec2 vTextureCoord;\n// varying vec4 vColor;\n// uniform sampler2D uSampler;\n// void main(void) {\n//   vec4 color = vec4(0.25, 0.5, 0.75, 1.);\n//   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor + color;\n// };\n\n// "const vec3 c1 = vec3(0.0, 0.0, 0.1);",\n// "const vec3 c2 = vec3(0.45, 0.35, 0.4);",\n// "const vec3 c3 = vec3(0.2, 0.0, 0.0);",\n// "const vec3 c4 = vec3(0.2, 0.2, 0.2);",\n// "const vec3 c5 = vec3(0.1);",\n// "const vec3 c6 = vec3(0.9);",\n\n// nebula settings\n// const int niterations = 6;\n// const vec3 c1 = vec3(0.0, 0.0, 0.2);\n// const vec3 c2 = vec3(0.2, 0.2, 0.3);\n// const vec3 c3 = vec3(0.3, 0.0, 0.0);\n// const vec3 c4 = vec3(0.0, 0.2, 0.22);\n// const vec3 c5 = vec3(0.22);\n// const vec3 c6 = vec3(0.44);\n//.. blue ^\n\n// const int niterations = 6;\n// const vec3 c1 = vec3(0.0, 0.0, 0.2);\n// const vec3 c2 = vec3(0.2, 0.1, 0.1);\n// const vec3 c3 = vec3(0.2, 0.0, 0.1);\n// const vec3 c4 = vec3(0.24, 0.1, 0.1);\n// const vec3 c5 = vec3(0.00);\n// const vec3 c6 = vec3(0.32);\n//.. red ^\n\nconst int niterations = 6;\nconst vec3 c1 = vec3(0.0, 0.2, 0.2);\nconst vec3 c2 = vec3(0.0, 0.3, 0.3);\nconst vec3 c3 = vec3(0.0, 0.2, 0.0);\nconst vec3 c4 = vec3(0.0, 0.2, 0.22);\nconst vec3 c5 = vec3(0.22);\nconst vec3 c6 = vec3(0.52);\n//.. blue green ^\n\nfloat rand(vec2 n) {\n  return fract(sin(dot(n.xy, vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise(vec2 n) {\n  const vec2 d = vec2(0.0, 1.0);\n  vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n  return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n) {\n  float total = 0.0, amplitude = 1.0;\n  for(int i = 0; i < niterations; i++) {\n    total += noise(n) * amplitude;\n    n += n;\n    amplitude *= 0.5;\n  }\n  return total;\n}\n\n// const int iterations = 4;\n// const float formuparam = 0.801;\n\n// const int volsteps = 3;\n// const float stepsize = 0.1;\n\n// const float brightness = 0.04;\n// const float distfading = 1.0; //0.2;\n// const float saturation = 0.8;\n\n// vec3 starnest(vec2 position) {\n//   float s = 0.1, fade = 1.0;\n\n//   vec3 dir = vec3(position, 1.);\n//   vec3 from = vec3(1.0, 1.0, 1.0);\n//        from += vec3(-transform * 0.00003, -2.0);\n\n//   vec3 v = vec3(0.0);\n//   for(int r=0; r<volsteps; r++) {\n//     vec3 p = from + s * dir;\n\n//     float pa, a = pa = 0.0;\n//     float n = noise(p.xy);\n    \n//     for(int i=0; i<iterations; i++) {\n//       p = abs(p)/dot(p,p)-formuparam; // the magic formula\n//       a += abs(length(p)-pa); // absolute sum of average change\n//       pa = length(p);\n//     }\n        \n//     a *= a*a; // add contrast\n//     //v += fade;\n//     v += vec3(s, s/2., s/3.) * a * (brightness * pow(n, 3.)); // * fade; // coloring based on distance\n//     //fade *= distfading; // distance fading\n//     s += stepsize;\n//   }\n  \n//   return mix(vec3(length(v)), v, saturation);\n// }\n\nvec3 nebula(vec2 position) {\n  float ntime = time * 0.01;\n  float q = fbm(position - ntime);\n  vec2 r = vec2(fbm(position + q + ntime * 3.6 - position.x - position.y), fbm(position + q - ntime * 0.4));\n  return mix(c1, c2, fbm(position + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y);\n}\n\nvoid main(void) {\n  // zoom control\n  // float s = 1. / (scale * 10.) + 0.75;\n  vec2 pos = (-resolution.xy + 2. * (gl_FragCoord.xy)) / resolution.y;\n  vec2 position1 = (0.25 * 1.) * pos - (transform.xy / 48000.);  \n  vec2 position2 = (1.0 * 1.) * pos - (transform.xy / 6000.);\n\n  vec3 color = vec3(0.0, 0.0, 0.0);\n\n  // create starfield\n  // color += vec3(starfield(position1)) * 2.0;\n  color += texture2D(channel0, position1).rgb;\n\n  // starnest\n  // color += starnest(position2) * 0.005;\n  \n  // create nebula\n  color += nebula(position2) * 2.;\n\n  // output\n  gl_FragColor = vec4(color, 1.);\n}\n',this.uniforms)}var e=a("pixi"),f=a("engine");d.prototype=Object.create(e.AbstractFilter.prototype),d.prototype.constructor=d,d.prototype.setResolution=function(a,b){this.uniforms.resolution.value.x=a,this.uniforms.resolution.value.y=b},d.prototype.setTexture=function(a){this.uniforms.channel0.value=a},d.prototype.applyFilter=function(a,b,c){var d=this.getShader(a),e=a.filterManager,g=this.game.camera.view;this.uniforms.time.value=this.game.clock.totalElapsedSeconds(),this.uniforms.transform.value.x=f.Math.roundTo(-g.x,4),this.uniforms.transform.value.y=f.Math.roundTo(g.y,4),this.uniforms.scale.value=f.Math.roundTo(this.game.world.scale.x,4),e.applyFilter(d,b,c)},b.exports=d},{engine:"engine",pixi:"pixi"}],142:[function(a,b,c){function d(a,b,c){this.game=a,this.uniforms={resolution:{type:"v2",value:{x:b,y:c}},transform:{type:"v2",value:{x:0,y:0}},time:{type:"f",value:0},scale:{type:"f",value:1}},e.AbstractFilter.call(this,"\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","\nprecision lowp float;\n\nuniform float scale;\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 transform;\n\n// #define BLIZZARD // Comment this out for a blizzard\n\n// #ifdef LIGHT_SNOW\n//   #define LAYERS 50\n//   #define DEPTH .5\n//   #define WIDTH .3\n//   #define SPEED .6\n// #else // BLIZZARD\n//   #define LAYERS 10\n//   #define DEPTH .1\n//   #define WIDTH .8\n//   #define SPEED 1.5\n// #endif\n\n// void mainImage( out vec4 fragColor, in vec2 fragCoord )\n// {\n//   const mat3 p = mat3(13.323122,23.5112,21.71123,21.1212,28.7312,11.9312,21.8112,14.7212,61.3934);\n//   vec2 uv = iMouse.xy/iResolution.xy + vec2(1.,iResolution.y/iResolution.x)*fragCoord.xy / iResolution.xy;\n//   vec3 acc = vec3(0.0);\n//   float dof = 5.*sin(iGlobalTime*.1);\n//   for (int i=0;i<LAYERS;i++) {\n//     float fi = float(i);\n//     vec2 q = uv*(1.+fi*DEPTH);\n//     q += vec2(q.y*(WIDTH*mod(fi*7.238917,1.)-WIDTH*.5),SPEED*iGlobalTime/(1.+fi*DEPTH*.03));\n//     vec3 n = vec3(floor(q),31.189+fi);\n//     vec3 m = floor(n)*.00001 + fract(n);\n//     vec3 mp = (31415.9+m)/fract(p*m);\n//     vec3 r = fract(mp);\n//     vec2 s = abs(mod(q,1.)-.5+.9*r.xy-.45);\n//     s += .01*abs(2.*fract(10.*q.yx)-1.); \n//     float d = .6*max(s.x-s.y,s.x+s.y)+max(s.x,s.y)-.01;\n//     float edge = .005+.05*min(.5*abs(fi-5.-dof),1.);\n//     acc += vec3(smoothstep(edge,-edge,d)*(r.x/(1.+.02*fi*DEPTH)));\n//   }\n//   fragColor = vec4(vec3(acc),1.0);\n// }\n\nconst int layers = 3;\nconst float depth = 0.8;\nconst float width = 0.8;\nconst float speed = 0.0;\n\nvoid main(void) {\n  const mat3 p = mat3(13.323122, 23.5112, 21.71123, 21.1212, 28.7312, 11.9312, 21.8112, 14.7212, 61.3934);\n\n  // zoom control\n  float s = (1.0 - scale) + 0.5;\n  vec2 pos = (-resolution.xy + 2. * (gl_FragCoord.xy)) / resolution.y;\n  vec2 position = (1.0 * s) * pos - (transform.xy / 250.0);\n  vec3 color = vec3(0.0, 0.0, 0.0);\n\n  // float dof = 5.0 * sin(time * 0.1);\n  for(int i=0; i<layers; i++) {\n    float fi = float(i);\n    vec2 q = position * (1.0 + fi * depth);\n         // q += vec2(q.y * (width * mod(fi * 7.238917, 1.) - width * .5), speed * time / (1. + fi * depth * .03));\n         q += vec2((1.0 + fi * depth * .01) * pos.x, (1.0 + fi * depth * .01) * pos.y);\n\n    vec3 n = vec3(floor(q), 31.189 + fi);\n    vec3 m = floor(n) * 0.00001 + fract(n);\n    vec3 mp = (31415.9 + m) / fract(p * m);\n    vec3 r = fract(mp);\n    vec2 s = abs(mod(q, 1.) - 0.5 + 0.9 * r.xy - 0.45);\n         s += 0.01 * abs(2. * fract(10. * q.yx) - 1.); \n\n    float d = 1.5 * max(s.x - s.y, s.x + s.y) + max(s.x, s.y) - 0.01;\n    float edge = 0.005 + 0.05 * min(0.5 * abs(fi - 5.0/* - dof*/), 1.);\n    \n    color += vec3(smoothstep(edge, -edge, d) * (r.x / (1.0 + 0.02 * fi * depth)));\n  }\n\n  // output\n  gl_FragColor = vec4(color, 0.0);\n}\n",this.uniforms)}var e=a("pixi"),f=a("engine");d.prototype=Object.create(e.AbstractFilter.prototype),d.prototype.constructor=d,d.prototype.setResolution=function(a,b){this.uniforms.resolution.value.x=a,this.uniforms.resolution.value.y=b},d.prototype.applyFilter=function(a,b,c){var d=this.getShader(a),e=a.filterManager,g=this.game.camera,h=g.view,i=this.uniforms;i.time.value=this.game.clock.totalElapsedSeconds(),i.transform.value.x=f.Math.roundTo(-h.x,4),i.transform.value.y=f.Math.roundTo(h.y,4),i.scale.value=f.Math.roundTo(this.game.world.scale.x,4),e.applyFilter(d,b,c)},b.exports=d},{engine:"engine",pixi:"pixi"}],143:[function(a,b,c){function d(a){var b,c,d;this.game=a,b={projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}},c="\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d="precision lowp float;\n\nvarying vec2 vTextureCoord;\n\n// rendering params\nconst float sphsize = 0.8; // planet size\nconst float dist = 0.08; // distance for glow and distortion\nconst float glow = 3.2; // glow amount, mainly on hit side\n\nconst float start = 120.0;\nconst float steps = 292.0; // number of steps for the volumetric rendering\nconst float stepsize = 0.01;\n\nfloat wind(vec3 p) {\n  float d = max(0.0, dist - max(0.0, length(p) - sphsize) / sphsize) / dist; // for distortion and glow area\n  float x = max(1.0, p.x * 2.0); // to increase glow on left side\n  return length(p) * (d * glow * x)+ d * glow * x; // return the result with glow applied\n}\n\nvoid main() {\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 dir = vec3(uv, 1.0);\n  vec3 from = vec3(0., 0., -2.);\n  vec3 col = vec3(0.0, 0.0, 0.0);\n  \n  float v = 0.0;\n  for(float r=start; r<steps; r++) {\n    vec3 p = from + r * dir * stepsize;\n    if(length(p)-sphsize > 0.0) {\n      v += wind(p);\n    } else {\n      v += min(1.0, wind(p));\n    }\n  }\n\n  // average values and\n  // apply bright factor\n  v /= steps;\n  v *= pow(v, 1.8);\n\n  // green - vec3(v/4.2, v/1.8, v/3.2);\n  // red - vec3(v/1.2, v/3.6, v/3.6);\n  // blue - vec3(v/4., v/3., v/0.8);\n  col += vec3(v/3.0, v/1.8, v/1.0);\n\n  gl_FragColor = vec4(col, 0.); \n}\n",e.Shader.call(this,a.renderer.shaderManager,c,d,b,{aVertexPosition:0,aTextureCoord:0,aColor:0})}var e=a("pixi");d.prototype=Object.create(e.Shader.prototype),d.prototype.constructor=d,b.exports=d},{pixi:"pixi"}],144:[function(a,b,c){function d(a){var b,c,d;this.game=a,b={time:{type:"f",value:0},channel0:{type:"sampler2D",value:0},channel1:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}},c="\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d="precision lowp float;\n\nuniform sampler2D channel0;\nuniform sampler2D channel1;\n\nuniform float time;\nvarying vec2 vTextureCoord;\n\nvoid main() {\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 ro = vec3(0.0, 0.0, 2.5);\n  vec3 rd = normalize(vec3(uv, -1.0));\n  vec3 col = vec3(0.0, 0.0, 0.0);\n  vec3 clouds = vec3(0.0, 0.0, 0.0);\n\n  // intersect sphere\n  float alpha = 0.0;\n  float b = dot(ro, rd);\n  float c = dot(ro, ro) - 1.0;\n  float h = b * b - c;\n\n  if(h > 0.0) {\n    float t = -b - sqrt(h);\n    vec3 pos = ro + t * rd;\n    vec3 nor = pos;\n\n    // texture mapping\n    vec2 uv;\n         uv.x = atan(nor.x, nor.z) / .7853 - 0.01 * time;\n         uv.y = acos(nor.y) / .7853;\n    \n    col = texture2D(channel0, uv).rgb;\n    col *= 0.06 + 1.0 * pow(max(0.5, dot(pos, normalize(vec3(2., 0.0, 4.)))), 8.);\n\n    uv.x -= 0.016 * time;\n    uv.y -= 0.024 * time;\n\n    clouds += texture2D(channel1, uv).rgb;\n    clouds *= 0.05 + 0.2 * pow(max(0.0, dot(pos, normalize(vec3(2., 0.0, 4.)))), 2.);\n\n    col += vec3(pow(clouds.r, 5.0), clouds.b, clouds.g);\n\n    // alpha\n    alpha += 1.0;\n  }\n\n  // contrast\n  col = (col - 0.5) * 1.08 + 0.5;\n  \n  gl_FragColor = vec4(col, alpha); \n}\n",e.Shader.call(this,a.renderer.shaderManager,c,d,b,{aVertexPosition:0,aTextureCoord:0,aColor:0})}var e=a("pixi");d.prototype=Object.create(e.Shader.prototype),d.prototype.constructor=d,d.prototype.setTexture=function(a,b){this.uniforms.channel0.value=a,this.uniforms.channel1.value=b},d.prototype.update=function(){this.uniforms.time.value=this.game.clock.totalElapsedSeconds()},b.exports=d},{pixi:"pixi"}],145:[function(a,b,c){(function(b){a(172);var c=(a("pixi"),a("engine")),d=a(174),e=a(146),f=a(224),g=a(148),h=function(){var a=new c.Game({parent:"content",antialias:f.getQueryParameter("antialias",!0),width:1024,height:576}),h=new d;a.auth=new e(a),a.shipNetManager=new g(a),a.state.add("loader",h,!0,!0),b.game=a};c.Device.whenReady(function(){var a,d=b.document.getElementById("content"),e=b.document.getElementById("dialog"),f=c.Device;f.desktop&&f.webGL&&(f.firefox||f.chrome||f.safari)?(d.className="running",h()):(d.className="error",a=f.desktop?f.webGL?"your browser is not yet supported":"you need a compatible browser and graphics card to run this demo.":"mobile devices are not supported, but you can still watch!",e.innerHTML=a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{146:146,148:148,172:172,174:174,224:224,engine:"engine",pixi:"pixi"}],146:[function(a,b,c){(function(c){function d(a){this.game=a,this.user={},this.socket=a.net.socket,this.socket.on("user",this._session.bind(this)),this.socket.on("connect",this._login.bind(this)),this.socket.on("disconnect",this._disconnected.bind(this)),this.game.on("gui/loggedin",this._login,this),this.game.on("gui/logout",this._logout,this),a.net.connected&&this._login(),e.call(this)}var e=(a("engine"),a(3));d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.isUser=function(){return this.user.uid?!0:!1},d.prototype.isGuest=function(){return 0===this.user.uid?!0:!1},d.prototype._session=function(a){if(void 0===a)throw Error("[Auth] An empty user object was detected");this.user=a.user,this.emit("user",this.user)},d.prototype._login=function(){this.socket.emit("user")},d.prototype._logout=function(){c.location.reload()},d.prototype._loggedin=function(a){this.session({user:a})},d.prototype._disconnected=function(){this.emit("disconnected")},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{3:3,engine:"engine"}],147:[function(a,b,c){function d(a,b){e.Class.mixin(b,this),this.game=a,this.config={binding:d.STAT_SYSTEM_BINDING,sort:d.SYSTEM_SORT_ORDER,units:d.STAT_UNITS,ship:a.cache.getJSON("ship-configuration",!1)[b.chasis],enhancement:this.game.cache.getJSON("enhancement-configuration"),systems:[{name:"hull",stats:["durability","health","heal"],enhancements:[]},{name:"reactor",stats:["energy","recharge"],enhancements:[]},{name:"pilot",stats:["evasion"],enhancements:[]},{name:"engine",stats:["speed"],enhancements:[]},{name:"shield",stats:["armor"],enhancements:[]},{name:"targeting",stats:["range","accuracy","critical"],enhancements:[]}]},EventEmitter.call(this)}var e=a("engine");EventEmitter=a(3),d.SYSTEM_SORT_ORDER=["hull","reactor","pilot","engine","shield","targeting"],d.STAT_UNITS={durability:"hp",health:"hp",heal:"%",speed:"km",evasion:"%",energy:"gj",recharge:"gj",armor:"hp",range:"km",accuracy:"%",critical:"%"},d.STAT_SYSTEM_BINDING={durability:"hull",health:"hull",heal:"hull",speed:"engine",evasion:"pilot",energy:"reactor",recharge:"reactor",armor:"shield",range:"targeting",accuracy:"targeting",critical:"targeting"},d.prototype=Object.create(EventEmitter.prototype),d.prototype.constructor=d,d.prototype.update=function(a){e.Class.mixin(a,this),this.emit("data",a)},b.exports=d},{3:3,engine:"engine"}],148:[function(a,b,c){function d(a){this.game=a,this.socket=a.net.socket,this.ships={},this.battles={},this.socket.on("ship/sync",this._sync.bind(this)),this.socket.on("ship/data",this._data.bind(this)),this.socket.on("ship/targeted",this._targeted.bind(this)),this.socket.on("ship/attack",this._attack.bind(this)),this.socket.on("ship/destroyed",this._destroyed.bind(this)),this.socket.on("ship/plotted",this._plotted.bind(this)),this.socket.on("enhancement/started",this._enstarted.bind(this)),this.socket.on("enhancement/stopped",this._enstopped.bind(this)),this.socket.on("enhancement/cancelled",this._encancelled.bind(this))}var e=(a("engine"),a(147));d.prototype.constructor=d,d.prototype.getShipDataByUuid=function(a){return this.ships[a]},d.prototype.getBattleByOriginUuid=function(a){return this.battles[a]},d.prototype._data=function(a){var b,c,d=a.ships;if(this.game.cache.checkJSONKey("ship-configuration")&&this.game.cache.checkJSONKey("enhancement-configuration"))for(c in d)b=d[c],"sync"===a.type&&void 0===this.ships[b.uuid]?this.ships[b.uuid]=new e(this.game,b):this.ships[b.uuid]&&this.ships[b.uuid].update(b)},d.prototype._sync=function(a){var b,c,d=a.ships,e=[];for(c in d)b=d[c],void 0===this.ships[b.uuid]&&e.push(b.uuid);e.length>0&&this.socket.emit("ship/data",{uuids:e})},d.prototype._plotted=function(a){},d.prototype._attack=function(a){this.game.emit("ship/attack",a),this.battles[a.origin]=a},d.prototype._targeted=function(a){this.game.emit("ship/targeted",a),this.battles[a.origin]=a},d.prototype._enstarted=function(a){this.game.emit("enhancement/started",a)},d.prototype._enstopped=function(a){this.game.emit("enhancement/stopped",a)},d.prototype._encancelled=function(a){this.game.emit("enhancement/cancelled",a)},d.prototype._destroyed=function(a){this.game.emit("ship/destroyed",a),delete this.battles[a.uuid]},b.exports=d},{147:147,engine:"engine"}],149:[function(a,b,c){(function(c){function d(a,b,c){void 0===c&&(c=0),this.game=a,this.parent=b,this.lastFrame=void 0,this.currentFrame=void 0,this.isFinished=!1,this.isPlaying=!1,this._paths=[],this._delay=c,this._duration=0,this._startTime=0,this._endTime=0,this._currentTime=0,this._frameIndex=0,e.call(this)}var e=a(3);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.play=function(a,b){void 0!==a&&(this._delay=a),this.isPlaying=!0,this.isFinished=!1,this._paths=b,this._frameIndex=0,this._duration=this._paths[this._frameIndex].duration,this._startTime=this.game.clock.time+this._delay,this._endTime=this.game.clock.time+this._duration+this._delay,this._currentTime=0,this.updateCurrentFrame(0),this.emit("start",this)},d.prototype.stop=function(a){void 0===a&&(a=!1),this.isPlaying=!1,this.isFinished=!0,a||this.emit("complete",this)},d.prototype.update=function(){var a,b=this.game.clock.time;this.isPlaying&&b>=this._startTime&&(this._currentTime=b-this._startTime,percent=c.Math.max(0,this._currentTime/this._duration),percent<1?this.updateCurrentFrame(percent):this._frameIndex<this._paths.length-1?(a=b-this._endTime,this._frameIndex++,this._duration=this._paths[this._frameIndex].duration,this._startTime=b-a,this._endTime=b+this._duration-a,this._currentTime=b-this._startTime,this.updateCurrentFrame(this._currentTime/this._duration)):this.complete())},d.prototype.updateCurrentFrame=function(a){var b,c,d,e,f=this.parent;b=this._paths[this._frameIndex],c=b.easing(a),d=b.start+(b.end-b.start)*c,e=b.interpolate(f.movement,d),this.lastFrame=this.currentFrame,this.currentFrame={x:e.x,y:e.y},f.interpolate(this.currentFrame,.05,f.position)},d.prototype.destroy=function(){this.removeAllListeners(),this.isPlaying=!1,this.game=this.parent=this._paths=this.lastFrame=this.currentFrame=void 0},d.prototype.complete=function(){this._frameIndex=this._paths.length-1,this.isPlaying=!1,this.isFinished=!0,this.updateCurrentFrame(1),this.emit("complete",this)},Object.defineProperty(d.prototype,"frameIndex",{get:function(){return this._frameIndex}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._paths.length}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{3:3}],150:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.config=b,this.easing=f.Easing.Default,
this.start=new f.Point,this.end=new f.Point,this._start=new f.Point,this._end=new f.Point,this.glowSprite=new f.Sprite(this.game,"texture-atlas","laser-piercing.png"),this.glowSprite.scale.set(1,1),this.glowSprite.pivot.set(32,32),this.glowSprite.position.set(0,16),this.glowSprite.tint=16755370,this.glowSprite.blendMode=f.BlendMode.ADD,this.redTexture=new e.Texture(this.game.cache.getImage("laser-red",!0).base),this.blueTexture=new e.Texture(this.game.cache.getImage("laser-red",!0).base),this.strip=new f.Strip(this.game,this.blueTexture,[this._start,this._end]),this.strip.blendMode=f.BlendMode.ADD,this.startTween=this.game.tweens.create(this._start),this.endTween=this.game.tweens.create(this._end),this.fadeTween=this.game.tweens.create(this.strip),this.glowTween=this.game.tweens.create(this.glowSprite),this.startTween.create(),this.endTween.create(),this.fadeTween.create(),this.glowTween.create()}var e=a("pixi"),f=a("engine");d.prototype.constructor=d,d.prototype.isRunning=function(){return this.endTween.isRunning||this.startTween.isRunning||this.fadeTween.isRunning},d.prototype.fire=function(a,b,c){if(!this.isRunning()){var d=this.game,e=750,g=this.end,h=f.Line.pointAtDistance(this.start,this.end,8),i=this.start.distance(this.end)/5,j=this.parent;this._start.copyFrom(h),this._end.copyFrom(g),this.strip.alpha=1,this.strip.texture=this.blueTexture,this.glowSprite.alpha=1,this.glowTween.updateTweenData("vStart",{alpha:1},0),this.glowTween.updateTweenData("vEnd",{alpha:0},0),this.glowTween.updateTweenData("duration",i,0),this.glowTween.updateTweenData("delay",e,0),this.fadeTween.updateTweenData("vStart",{alpha:1},0),this.fadeTween.updateTweenData("vEnd",{alpha:0},0),this.fadeTween.updateTweenData("duration",i+100,0),this.fadeTween.updateTweenData("delay",e-100,0),this.startTween.updateTweenData("vStart",{x:h.x,y:h.y},0),this.startTween.updateTweenData("vEnd",{x:g.x,y:g.y},0),this.startTween.updateTweenData("duration",i,0),this.startTween.updateTweenData("delay",e,0),this.endTween.updateTweenData("vStart",{x:h.x,y:h.y},0),this.endTween.updateTweenData("vEnd",{x:g.x,y:g.y},0),this.endTween.updateTweenData("duration",i,0),this.startTween.start(),this.endTween.start(),this.fadeTween.start(),this.glowTween.start(),this.endTween.once("start",function(){j.fxGroup.addChild(this.strip),j.sprite.addChild(this.glowSprite)},this),this.fadeTween.once("complete",function(){j.fxGroup.removeChild(this.strip),j.sprite.removeChild(this.glowSprite)},this),this.endTween.once("complete",function(){a||(j.glowEmitter.color(c?3368601:16737894),j.glowEmitter.at({center:g}),j.glowEmitter.explode(c?3:2),j.explosionEmitter.at({center:g}),j.explosionEmitter.explode(2),c||(this.timer2=d.clock.events.repeat((i+e)/30,30,function(){j.fireEmitter.at({center:g}),j.fireEmitter.explode(1)}),j.ship.target&&j.ship.target.damage.inflict(j.target)))},this)}},d.prototype.update=function(){var a,b=this.end;this.isRunning()&&(a=f.Line.pointAtDistance(this.start,b,17),this._start.copyFrom(a),this.startTween.updateTweenData("vStart",{x:a.x,y:a.y},0),this.startTween.updateTweenData("vEnd",{x:b.x,y:b.y},0),this._end.copyFrom(b),this.endTween.updateTweenData("vStart",{x:a.x,y:a.y},0),this.endTween.updateTweenData("vEnd",{x:b.x,y:b.y},0),this.glowSprite.parent&&(this.glowSprite.rotation+=.05))},d.prototype.destroy=function(){this.timer1&&this.game.clock.events.remove(this.timer1),this.timer2&&this.game.clock.events.remove(this.timer2),this.startTween.stop(),this.endTween.stop(),this.fadeTween.stop(),this.glowTween.stop(),this.startTween.removeAllListeners(),this.endTween.removeAllListeners(),this.fadeTween.removeAllListeners(),this.glowTween.removeAllListeners(),this.strip&&this.strip.destroy(),this.glowSprite&&this.glowSprite.destroy(),this.redTexture.destroy(),this.blueTexture.destroy(),this.parent=this.game=this.config=this.easing=this.start=this.end=this._start=this._end=this.strip=this.redTexture=this.blueTexture=this.glowSprite=this.glowTween=this.startTween=this.endTween=void 0},b.exports=d},{engine:"engine",pixi:"pixi"}],151:[function(a,b,c){function d(a,b){}a("engine");d.prototype.constructor=d,d.prototype.fire=function(){},b.exports=d},{engine:"engine"}],152:[function(a,b,c){(function(c){function d(a,b){this.parent=a,this.game=a.game,this.ship=a.parent,this.config=b,this.target=new e.Point,this.position=new e.Point,this.apos=new e.Point,this._tempPoint=new e.Point,this.sprite=new e.Sprite(this.game,"texture-atlas",b.sprite+".png"),this.sprite.position.set(b.position.x,b.position.y),this.sprite.pivot.set(b.pivot.x,b.pivot.y),this.sprite.scale.set(b.scale.x,b.scale.y),this.manager=this.create(b.type)}var e=a("engine"),f=a(150),g=a(151);d.prototype.constructor=d,d.prototype.create=function(a){var b=this.config[a];switch(a){case"missile":return new g(this,b);case"laser":default:return new f(this,b)}},d.prototype.fire=function(a,b){var c=75*a+100,d=b?this.miss:this.discharge;(!this.timer||this.timer&&this.timer.pendingDelete)&&(this.timer=this.game.clock.events.add(c,d,this))},d.prototype.miss=function(){var a,b=this.ship,d=b.target,e=this.parent.enhancements;d&&(a=d.circle,this.target=a.circumferencePoint(c.Math.random()*c.Math.PI,!1,!0,this._tempPoint),this.manager.fire(!0,e))},d.prototype.discharge=function(){var a,b=this.ship,c=b.target,d=this.parent.enhancements;c&&(a=c.hitCircle,this.target=a.random(!1,this.target),this.manager.fire(!1,d,c.shields),c.isPlayer&&!c.shields&&this.game.camera.shake())},d.prototype.update=function(){var a,b=this.game,c=this.sprite,d=this.ship,f=this.position,g=this.manager;f.copyFrom(b.world.worldTransform.applyInverse(d.worldTransform.apply(c.worldTransform.apply(c.pivot)))),c.rotation=e.Point.angle(f,a=this.absoluteTargetPosition())-d.rotation,g.start.copyFrom(f),g.end.copyFrom(a),g.update()},d.prototype.absoluteTargetPosition=function(){return this.game.world.worldTransform.applyInverse(this.ship.target.worldTransform.apply(this.target))},d.prototype.destroy=function(){this.timer&&this.game.clock.events.remove(this.timer),this.sprite&&this.sprite.destroy(),this.manager&&this.manager.destroy(),this.parent=this.game=this.ship=this.config=this.target=this.position=this.apos=this.sprite=this.manager=this.timer=this._tempPoint=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{150:150,151:151,engine:"engine"}],153:[function(a,b,c){(function(c){function d(a){this.parent=a,this.game=a.game,this.config=a.config,this.throttle=a.throttle,this.valid=!0,this.anticlockwise=!1,this.destination=new e.Point,this.animation=new f(a.game,a),this._tempPoint=new e.Point,i.call(this)}var e=a("engine"),f=a(149),g=a(166),h=a(167),i=a(3);d.FRAMERATE=60,d.SPEED_CONSTANT=30,d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.reset=function(){this._linearSpeed=null,this._arcSpeed=null},d.prototype.update=function(){var a,b,d=this.parent,e=this.animation,f=this.lastFrame=d.position.clone(this._tempPoint);this.animation.update(),e.isPlaying&&f&&(a=f.y-d.position.y,b=f.x-d.position.x,0!==a&&0!==b?d.rotation=c.Math.atan2(a,b):d.rotation=0)},d.prototype.plot=function(a,b,c,d){var f=b?b:this.current,i=c?c:this.previous,a=a||this.destination,j=this._findTangentCircle(f,i,a);j?(this.valid=!0,this.oribital=j,this.currentPosition=f,this.previousPosition=i,this.destination.copyFrom(a),this.tangentPoint=this._findTangentPoint(this.destination,this.oribital),this.startAngle=this.oribital.circumferenceAngle(this.currentPosition),this.endAngle=this.oribital.circumferenceAngle(this.tangentPoint),this.arcLength=this._findArcLength(this.currentPosition,this.tangentPoint,this.oribital),this.linearLength=this.tangentPoint.distance(this.destination),this.animation.stop(!0),this.animation.play(d||0,[new g(this,0,1),new h(this,0,.5),new h(this,.5,1,e.Easing.Quadratic.Out)])):this.valid=!1},d.prototype.destroy=function(){this.animation.destroy(),this.removeAllListeners(),this.parent=this.game=this.config=this.destination=this.animation=this.currentPosition=this.previousPosition=this.oribital=this.tangentPoint=void 0},d.prototype.drawDebug=function(){this.parent.isPlayer&&this.parent.manager.trajectoryGraphics&&(this.parent.manager.trajectoryGraphics.lineStyle(0),this.parent.manager.trajectoryGraphics.beginFill(65535,.5),this.parent.manager.trajectoryGraphics.drawCircle(this.destination.x,this.destination.y,10),this.parent.manager.trajectoryGraphics.endFill(),this.parent.manager.trajectoryGraphics.lineStyle(5,65535,.5),this.parent.manager.trajectoryGraphics.arc(this.oribital.x,this.oribital.y,this.oribital.radius,this.startAngle,this.endAngle,this.anticlockwise),this.parent.manager.trajectoryGraphics.moveTo(this.tangentPoint.x,this.tangentPoint.y),this.parent.manager.trajectoryGraphics.lineTo(this.destination.x,this.destination.y))},d.prototype._findTangentCircle=function(a,b,d){var f=this.config.oribit.radius,g=new e.Point,h=g.copyFrom(b).rotate(a.x,a.y,-c.Math.PI/2),i=e.Line.pointAtDistance(a,h,f),j=e.Line.pointAtDistance(a,h,-f),k=i.distance(d),l=j.distance(d),m=new e.Circle(i.x,i.y,f);return circle2=new e.Circle(j.x,j.y,f),k>l&&!circle2.contains(d.x,d.y)?(this.anticlockwise=!0,circle2):l>k&&!m.contains(d.x,d.y)?(this.anticlockwise=!1,m):!1},d.prototype._findTangentPoint=function(a,b){var d,f=new e.Point,g=b.x-a.x,h=b.y-a.y,i=c.Math.sqrt(g*g+h*h),j=c.Math.asin(b.radius/i),k=c.Math.atan2(h,g);return this.anticlockwise?(d=k-j,f.setTo(b.x+b.radius*c.Math.sin(d),b.y+b.radius*-c.Math.cos(d))):(d=k+j,f.setTo(b.x+b.radius*-c.Math.sin(d),b.y+b.radius*c.Math.cos(d))),f},d.prototype._findArcLength=function(a,b,d){var e=a.y-d.y,f=a.x-d.x,g=b.y-d.y,h=b.x-d.x,i=c.Math.atan2(e,f)-c.Math.atan2(g,h);return 0>i&&(i+=2*c.Math.PI),this.anticlockwise||(i=2*c.Math.PI-i),i*d.radius},d.prototype._generatePreviousPosition=function(){var a=this.parent.rotation,b=this.current;return new e.Point(b.x+1*c.Math.cos(a),b.y+1*c.Math.sin(a))},Object.defineProperty(d.prototype,"current",{get:function(){var a,b=this.animation.currentFrame;return b||(a=this.parent.position.clone(),b={x:a.x,y:a.y}),b}}),Object.defineProperty(d.prototype,"previous",{get:function(){var a,b=this.animation.lastFrame;return b||(a=this._generatePreviousPosition(),b={x:a.x,y:a.y}),b}}),Object.defineProperty(d.prototype,"throttle",{get:function(){return this._throttle},set:function(a){this._linearSpeed=null,this._arcSpeed=null,this._throttle=a,this._linearSpeed=this.linearSpeed,this._arcSpeed=this.arcSpeed}}),Object.defineProperty(d.prototype,"linearSpeed",{get:function(){return this._linearSpeed||this._throttle*(d.SPEED_CONSTANT/this.parent.speed)}}),Object.defineProperty(d.prototype,"arcSpeed",{get:function(){return this._arcSpeed||this.config.oribit.radius/this.linearSpeed}}),Object.defineProperty(d.prototype,"maxSpeed",{get:function(){return this._maxSpeed?this._maxSpeed:this._maxSpeed=1/(d.SPEED_CONSTANT/this.config.stats.speed)}}),Object.defineProperty(d.prototype,"speed",{get:function(){var a,b,e,f,g,h=0,i=this.parent,j=(this.animation,this.lastFrame);return j&&this.animation.isPlaying&&(a=i.position,b=j.x,f=j.y,e=a.x,g=a.y,h=c.Math.sqrt((e-b)*(e-b)+(g-f)*(g-f)),h/=1/d.FRAMERATE*1e3),h}}),Object.defineProperty(d.prototype,"vector",{get:function(){var a=this.parent,b=(this.animation,this.lastFrame),c=y1=x2=y2=0;return b&&(frame=a.position,c=b.x,y1=b.y,x2=frame.x,y2=frame.y),{x:x2-c,y:y2-y1}}}),Object.defineProperty(d.prototype,"angle",{get:function(){var a=this.animation,b=a.lastFrame,d=y1=x2=y2=0;return b&&(frame=a.frame,d=b.x,y1=b.y,x2=frame.x,y2=frame.y),c.Math.atan2(y1-y2,d-x2)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{149:149,166:166,167:167,3:3,engine:"engine"}],154:[function(a,b,c){(function(c){function d(a){this.manager=a,this.game=a.game,this.socket=this.game.net.socket,this.pixelPerfectAlpha=1,this.tempPoint=new e.Point,this.shipsGroup=a.shipManager.shipsGroup,this.indicator=new f(this.game),this.shipsGroup.add(this.indicator),this.game.on("gui/selected",this._selected,this)}var e=a("engine"),f=a(169);d.prototype.constructor=d,d.prototype.destroy=function(){this.game.removeListener("gui/selected",this._selected),this.manager=this.game=this.socket=this.shipsGroup=void 0},d.prototype._plot=function(a,b){this.indicator.show(b),this.socket.emit("ship/plot",{uuid:a.uuid,destination:b,current:a.movement.current,previous:a.movement.previous,rotation:a.rotation}),a.movement.plot(b)},d.prototype._selected=function(a,b){var d,f,g,h,i,j=c.Number.MAX_VALUE,k=[],l=[],m=[],n=[];if(this.shipsGroup.forEach(function(c){a.button===e.Mouse.LEFT_BUTTON&&(c.overlap(b)&&k.push(c),c.isPlayer&&(l.push(c),c.target&&m.push(c.target))),a.button===e.Mouse.RIGHT_BUTTON&&c.selected&&n.push(c)}),a.button===e.Mouse.LEFT_BUTTON){if(b.volume<=300){for(h in k)this._checkPixel(k[h].chassis,a)&&k[h].renderOrderID<j&&(d=k[h],j=k[h].renderOrderID);k=d?[d].concat(m):k}this.game.emit("ships/selected",k.concat(l))}if(n.length>0)for(f=this.shipsGroup.worldTransform.applyInverse(a),i=0;i<n.length;i++)g=n[i],g.isPlayer&&!g.destroyed&&this._plot(g,f)},d.prototype._checkPixel=function(a,b){var c,d,e,f=this.game.input,g=a.texture;if(g.baseTexture.source){if(f.getLocalPosition(a,b,this.tempPoint),c=this.tempPoint.x,d=this.tempPoint.y,0!==a.anchor.x&&(c-=-g.frame.width*a.anchor.x),0!==a.anchor.y&&(d-=-g.frame.height*a.anchor.y),c+=g.frame.x,d+=g.frame.y,g.trim&&(c-=g.trim.x,d-=g.trim.y,c<g.crop.x||c>g.crop.right||d<g.crop.y||d>g.crop.bottom))return this._dx=c,this._dy=d,!1;if(this._dx=c,this._dy=d,f.hitContext.clearRect(0,0,1,1),f.hitContext.drawImage(g.baseTexture.source,c,d,1,1,0,0,1,1),e=f.hitContext.getImageData(0,0,1,1),e.data[3]>=this.pixelPerfectAlpha)return!0}return!1},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{169:169,engine:"engine"}],155:[function(a,b,c){(function(c){function d(a){this.ship=a,this.game=a.game,this.explosionEmitter=a.manager.explosionEmitter,this.flashEmitter=a.manager.flashEmitter,this.glowEmitter=a.manager.glowEmitter,this.shockwaveEmitter=a.manager.shockwaveEmitter}var e=a("engine");d.prototype.constructor=d,d.prototype.inflict=function(a){if("vessel-x04"!==this.ship.name&&"vessel-x05"!==this.ship.name){var b,d=this.game,f=this.ship,g=c.Math.random()*c.Math.PI,h=.5*c.Math.random()+.25,i=new e.Sprite(this.game,"texture-atlas","damage-a.png"),j=new e.Sprite(this.game,"texture-atlas","damage-b.png");i.pivot.set(32,32),i.position.set(a.x,a.y),i.scale.set(h,h),i.rotation=g,i.tint=0,j.pivot.set(32,32),j.position.set(a.x,a.y),j.scale.set(.5,.5),j.tint=16737894,j.blendMode=e.BlendMode.ADD,damageTween=this.game.tweens.create(i),damageTween.to({alpha:0},4e3,e.Easing.Quadratic.InOut,!0,1e3),damageTween.once("complete",function(){i.destroy()},this),b=d.clock.events.repeat(50,40,function(){j.alpha=c.Math.random()}),b.on("complete",function(){j.destroy()}),f.addChild(i),f.addChild(j)}},d.prototype.shockwave=function(){this.shockwaveEmitter.at({center:this.ship.position}),this.shockwaveEmitter.explode(2)},d.prototype.destroyed=function(){var a,b,d=this.game,e=this.ship;e.destroyed=!0,e.engineCore.destroy(),e.movement.animation.stop(),e.tint=4473924;for(b in e.children)e.children[b].tint=4473924;this.timer1=d.clock.events.repeat(100,20,function(){e.worldTransform&&(a=d.world.worldTransform.applyInverse(e.worldTransform.apply(e.circle.random())),this.explosionEmitter.at({center:a}),this.explosionEmitter.explode(2),this.glowEmitter.color(null),this.glowEmitter.at({center:a}),this.glowEmitter.explode(1))},this),this.timer2=d.clock.events.repeat(200,25,function(){c.Math.random()>.5&&e.worldTransform&&(a=d.world.worldTransform.applyInverse(e.worldTransform.apply(e.circle.random())),this.explosionEmitter.at({center:a}),this.explosionEmitter.explode(2),this.glowEmitter.color(null),this.glowEmitter.at({center:a}),this.glowEmitter.explode(1))},this)},d.prototype.destroy=function(){this.timer1&&this.game.clock.events.remove(this.timer1),this.timer2&&this.game.clock.events.remove(this.timer2),this.ship=this.game=this.explosionEmitter=this.flashEmitter=this.glowEmitter=this.shockwaveEmitter=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],156:[function(a,b,c){(function(c){function d(a){this.parent=a,this.game=a.game,this.booster=!1,this.glows=[],this.highlights=[]}var e=a("engine");d.flicker=[.045*c.Math.random(),.025*c.Math.random(),.015*c.Math.random(),.025*c.Math.random(),.035*c.Math.random(),.025*c.Math.random()],d.prototype.constructor=d,d.prototype.create=function(){var a,b,d,f,g=this.glows,h=this.highlights,i=this.parent,j=i.config.engine.glows,k=j.length;for(f=0;k>f;f++)d=j[f],b=new e.Sprite(i.game,"texture-atlas","engine-highlight.png"),b.pivot.set(32,32),b.position.set(d.position.x,d.position.y),b.scale.set(1,1),b.tint=d.tint,b.blendMode=e.BlendMode.ADD,b.alpha=0,a=new e.Sprite(i.game,"texture-atlas","engine-glow.png"),a.pivot.set(128,64),a.rotation=c.Math.PI+e.Math.degToRad(d.rotation),a.position.set(d.position.x,d.position.y),a.scale.set(.1*d.scale.startX,.1*d.scale.startY),a.tint=d.tint,a.blendMode=e.BlendMode.ADD,i.addChildAt(a,0),i.addChild(b),g.push(a),h.push(b)},d.prototype.update=function(a){var b,e,f,g,h,i=this.glows,j=this.highlights,k=this.game,l=this.parent,m=l.manager,n=l.config.engine.glows,o=n.length,p=d.flicker[k.clock.frames%6],q=c.Math.max(c.Math.min(a,1.5),.25);for(g=0;o>g;g++)b=n[g].scale,i[g].scale.set(q*b.endX+p,q*b.endY+3*p);for(h=0;o>h;h++)f=j[h],f.alpha=c.Math.min(1,q)/(o/2),this.booster&&a>0&&(e=k.world.worldTransform.applyInverse(this.parent.worldTransform.apply(f.worldTransform.apply(f.pivot))),m.flashEmitter.color(n[h].tint),m.flashEmitter.at({center:e}),m.flashEmitter.explode(1))},d.prototype.destroy=function(){var a,b,c=this.glows,d=this.highlights;for(a in c)c[a].destroy();for(b in d)d[b].destroy();this.parent=this.game=this.glows=this.highlights=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],157:[function(a,b,c){function d(a){this.parent=a,this.game=a.game}var e=a("engine");d.prototype.constructor=d,d.prototype.create=function(){this.shieldSprite=new e.Sprite(this.game,"texture-atlas",this.parent.name+"-shields.png"),this.shieldSprite.blendMode=e.BlendMode.ADD,this.shieldSprite.tint=3368703},d.prototype.start=function(){this.shieldSprite.alpha=1,this.fadeTween=this.game.tweens.create(this.shieldSprite),this.fadeTween.to({alpha:.8},100,e.Easing.Quadratic.InOut),this.fadeTween.repeat(),this.fadeTween.yoyo(!0,0),this.fadeTween.start(),this.parent.addChild(this.shieldSprite)},d.prototype.stop=function(){this.fadeTween&&this.fadeTween.stop(),this.parent.removeChild(this.shieldSprite)},d.prototype.destroy=function(){this.stop(),this.parent=this.game=this.shieldSprite=this.fadeTween=void 0},b.exports=d},{engine:"engine"}],158:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.config=b,this.enhancements={},this.hardpoints=[]}var e=(a("engine"),a(152));d.prototype.constructor=d,d.prototype.enadd=function(a){this.enhancements[a]=!0},d.prototype.enremove=function(a){delete this.enhancements[a]},d.prototype.create=function(){var a,b,c=this.parent,d=this.hardpoints,f=this.config.hardpoints;for(b in f)a=new e(this,f[b]),a.fxGroup=c.manager.fxGroup,a.flashEmitter=c.manager.flashEmitter,a.explosionEmitter=c.manager.explosionEmitter,a.glowEmitter=c.manager.glowEmitter,a.fireEmitter=c.manager.fireEmitter,d.push(a),c.addChild(a.sprite)},d.prototype.fire=function(a){var b,c=this.parent,d=c.target,e=this.hardpoints;if(d&&e.length>0)for(b in e)e[b].fire(b,a)},d.prototype.cancel=function(a){var b,c,d=this.game,e=this.parent,f=e.target,g=this.hardpoints;if(f&&g.length>0)for(c in g)b=g[c],b.timer&&d.clock.events.remove(b.timer)},d.prototype.update=function(){var a,b=this.parent,c=b.target,d=this.hardpoints;if(c&&d.length>0)for(a in d)d[a].update()},d.prototype.destroy=function(){var a,b;for(b in this.hardpoints)a=this.hardpoints[b],a.fxGroup=a.flashEmitter=a.explosionEmitter=a.glowEmitter=void 0,a.destroy();this.hardpoints=[],this.parent=this.game=this.enhancements=this.config=void 0},b.exports=d},{152:152,engine:"engine"}],159:[function(a,b,c){(function(c){function d(a,b){e.Group.call(this,a.game,!1),this.name=b,this.target=null,this.targeted=[],this.manager=a,this.game=a.game,this.config=a.game.cache.getJSON("ship-configuration",!1)[b],this.rotation=0,this.position=new e.Point(0,0),this.chassis=new e.Sprite(a.game,"texture-atlas",b+".png"),this.add(this.chassis),"vessel-x02"===b&&(this.lights=new e.Sprite(a.game,"texture-atlas",b+"-lights.png"),this.lights.position.set(124,128),this.lights.pivot.set(128,128),this.lights.scale.set(.88,1.04),this.lightsPosTween=this.game.tweens.create(this.lights.position),this.lightsPosTween.to({x:138,y:128},2e3,e.Easing.Quadratic.InOut),this.lightsPosTween.yoyo(!0),this.lightsPosTween.repeat(),this.lightsPosTween.start(),this.lightsScaleTween=this.game.tweens.create(this.lights.scale),this.lightsScaleTween.to({x:1.12,y:.96},2e3,e.Easing.Quadratic.InOut),this.lightsScaleTween.yoyo(!0),this.lightsScaleTween.repeat(),this.lightsScaleTween.start(),this.add(this.lights)),this.pivot.set(this.chassis.texture.frame.width/2,this.chassis.texture.frame.height/2),this.scale.set(this.config.size,this.config.size),this.hud=new k(this),this.damage=new j(this),this.movement=new f(this),this.circle=new e.Circle(this.pivot.x,this.pivot.y,this.chassis.texture.frame.width/2),this.hitCircle=new e.Circle(this.pivot.x,this.pivot.y,this.chassis.texture.frame.width/4),this._selected=!1,this.autoCull=!0,this.checkWorldBounds=!0,this.engineCore=new g(this),this.targetingComputer=new h(this,this.config.targeting),this.shieldGenerator=new i(this,this.config.shields),this.graphics=new e.Graphics(a.game),this.graphics.blendMode=e.BlendMode.ADD,this.graphics.objectRenderer="wireframe",this.addAt(this.graphics,0)}var e=a("engine"),f=a(153),g=a(156),h=a(158),i=a(157),j=a(155),k=a(183);d.prototype=Object.create(e.Group.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.engineCore.create(),this.targetingComputer.create(),this.hud.create(),this.details.systems.shield&&this.shieldGenerator.create(),this.details.on("data",this.data,this),this.graphics.lineStyle(3,this.isPlayer?3407718:6724044,.2),this.graphics.drawCircle(this.circle.x,this.circle.y,this.circle.radius)},d.prototype.interpolate=function(a,b){this.position.interpolate(a,b,this.position)},d.prototype.data=function(a){a.speed&&(this.movement.reset(),this.movement.animation.isPlaying&&this.movement.plot()),void 0!==a.health&&this.hud.healthBar.setProgressBar(c.Math.min(1,a.health/this.config.stats.health))},d.prototype.update=function(){var a=this.movement;a.update(),this.destroyed||(this.targetingComputer.update(),this.renderable&&this.engineCore.update(a.speed/a.maxSpeed))},d.prototype.select=function(){this._selected=!0,this.hud.healthBar.renderable=!0,this.graphics.renderable=!0},d.prototype.deselect=function(){this._selected=!1,this.hud.healthBar.renderable=!1,this.graphics.renderable=!1},d.prototype.overlap=function(a){return this.chassis.overlap(a)},d.prototype.destroy=function(){this.targeted=[],this.hud.destroy(),this.damage.destroy(),this.movement.destroy(),this.shieldGenerator.destroy(),this.targetingComputer.destroy(),this.details.removeListener("data",this.data),e.Group.prototype.destroy.call(this,!1),this.manager=this.game=this.config=this.movement=this.circle=this.hud=this.damage=this.details=void 0},d.prototype.activate=function(a){switch(a){case"piercing":this.targetingComputer.enadd(a);break;case"overload":break;case"booster":this.engineCore.booster=!0;break;case"shield":this.shieldGenerator.start()}},d.prototype.deactivate=function(a){switch(a){case"piercing":this.targetingComputer.enremove(a);break;case"overload":break;case"booster":this.engineCore.booster=!1;break;case"shield":this.shieldGenerator.stop()}},Object.defineProperty(d.prototype,"isPlayer",{get:function(){return this.user&&this.game.auth.user.uuid===this.user}}),Object.defineProperty(d.prototype,"speed",{get:function(){return this.details?this.details.speed:this.config.stats.speed}}),Object.defineProperty(d.prototype,"shields",{get:function(){return this.shieldGenerator&&this.shieldGenerator.fadeTween&&this.shieldGenerator.fadeTween.isRunning}}),Object.defineProperty(d.prototype,"selected",{get:function(){return this._selected}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{153:153,155:155,156:156,157:157,158:158,183:183,engine:"engine"}],160:[function(a,b,c){(function(c){function d(a){f.call(this),this.game=a,this.net=a.net,this.socket=a.net.socket,this.shipNetManager=a.shipNetManager,this.forceReposition=!1,this.hudGroup=null,this.shipsGroup=new e.Group(a),this.trajectoryGroup=new e.Group(a),this.fxGroup=new e.Group(a),this.fxGroup.blendMode=e.BlendMode.ADD,this.trajectoryGraphics=new e.Graphics(a),this.trajectoryGroup.addChild(this.trajectoryGraphics),this.explosionEmitter=new h(this.game),this.flashEmitter=new i(this.game),this.glowEmitter=new j(this.game),this.shockwaveEmitter=new k(this.game),this.fireEmitter=new l(this.game),this.game.particles.add(this.explosionEmitter),this.game.particles.add(this.flashEmitter),this.game.particles.add(this.glowEmitter),this.game.particles.add(this.shockwaveEmitter),this.game.particles.add(this.fireEmitter),this.ships={},this.game.world.add(this.trajectoryGroup),this.game.world.add(this.shipsGroup),this.game.world.add(this.fxGroup),this.game.world.add(this.fireEmitter),this.game.world.add(this.explosionEmitter),this.game.world.add(this.shockwaveEmitter),this.game.world.add(this.glowEmitter),this.game.world.add(this.flashEmitter),this.game.auth.on("disconnected",this._reset,this),this.socket.on("ship/sync",this._syncBind=this._sync.bind(this)),this.socket.on("ship/plotted",this._plottedBind=this._plotted.bind(this)),this.game.on("ships/selected",this._select,this),this.game.on("ship/follow",this._follow,this),this.game.on("ship/targeted",this._targeted,this),this.game.on("ship/attack",this._attack,this),this.game.on("ship/destroyed",this._destroyed,this),this.game.on("enhancement/started",this._enstarted,this),this.game.on("enhancement/stopped",this._enstopped,this),this.game.on("game/pause",this._reset,this),this.game.on("game/resume",this._resume,this),this.game.input.on("keydown",function(){this.game.camera.unfollow()},this)}var e=a("engine"),f=a(3),g=a(159),h=a(161),i=a(163),j=a(164),k=a(165),l=a(162);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype._sync=function(a){var b,c,d,f,g,h,i=this.game,j=a.ships,k=j.length;for(h=0;k>h;h++)b=j[h],f=this.shipNetManager.getShipDataByUuid(b.uuid),f&&(g=!this.ships[b.uuid],c=this.ships[b.uuid]?this.ships[b.uuid]:this.ships[b.uuid]=this.create(b,f),d=e.Point.distance(b.current,c.movement.current),g&&i.auth.isGuest()&&this.game.emit("ship/follow",c),g&&c.isPlayer&&(i.emit("ship/follow",c),i.emit("ships/selected",[c])),this.forceReposition&&c.position.set(b.current.x,b.current.y),(d>64||g)&&(c.movement.animation.stop(),b.moving?c.movement.plot(b.destination,b.current,b.previous):c.position.set(b.current.x,b.current.y)));this.forceReposition=!1},d.prototype.create=function(a,b){var c=(this.game,new g(this,b.chasis));return c.uuid=a.uuid,c.user=b.user,c.username=b.username,c.details=b,c.position.set(a.current.x,a.current.y),c.rotation=a.rotation,c.movement.throttle=a.throttle,this.shipsGroup.add(c),c.boot(),c},d.prototype.remove=function(a){var b=this.game,c=b.camera,d=this.ships[a.uuid];void 0!==d&&(c.target===d&&c.unfollow(),delete this.ships[a.uuid]&&d.destroy())},d.prototype.removeAll=function(){var a,b=this.ships;for(a in b)this.remove(b[a])},d.prototype.destroy=function(){var a=this.game,b=this.game.auth,c=this.socket;b.removeListener("disconnected",this._disconnected),c.removeListener("ship/sync",this._syncBind),c.removeListener("ship/plotted",this._plottedBind),a.removeListener("ships/selected",this._select),a.removeListener("ship/follow",this._follow),a.removeListener("ship/targeted",this._targeted),a.removeListener("ship/attack",this._attack),a.removeListener("ship/destroyed",this._destroyed),a.removeListener("enhancement/started",this._enstarted),a.removeListener("enhancement/stopped",this._enstopped),a.removeListener("game/pause",this._reset),a.removeListener("game/resume",this._resume),this.game.particles.remove(this.explosionEmitter),this.game.particles.remove(this.flashEmitter),this.game.particles.remove(this.glowEmitter),this.game.particles.remove(this.shockwaveEmitter),this.game.world.remove(this.trajectoryGroup),this.game.world.remove(this.shockwaveEmitter),this.game.world.remove(this.shipsGroup),this.game.world.remove(this.fxGroup),this.game.world.remove(this.explosionEmitter),this.game.world.remove(this.flashEmitter),this.game.world.remove(this.glowEmitter),this.game=this.socket=this._syncBind=this._plottedBind=void 0,this.removeAll()},d.prototype._plotted=function(a){var b=(this.game.auth,this.ships[a.uuid]);this.net.rtt;void 0===b||b.isPlayer||b.movement.plot(a.destination,a.current,a.previous)},d.prototype._targeted=function(a){var b=this.ships[a.origin],c=this.ships[a.target];b&&c&&(b.target=c,b.targetingComputer.cancel(),c.targeted.push(b))},d.prototype._untargeted=function(a){var b,c,d=this.ships[a.uuid];if(void 0!==d){a=d.targeted;for(c in a)b=a[c],b.target===d&&(b.target=null)}},d.prototype._attack=function(a){var b=this.ships[a.origin],c=this.ships[a.target];b&&c&&(b.target||this._targeted(a),"evade"===a.type?c.renderable&&c.hud.flash("evading",16777215,300,5):"miss"===a.type?c.renderable&&c.hud.flash("evading",16777215,300,5):(c.renderable&&c.hud.flash(""+a.damage,16711680,200,30,!0),(b.renderable||c.renderable)&&b.targetingComputer.fire()))},d.prototype._enstarted=function(a){var b=this.ships[a.ship];b&&b.activate(a.enhancement)},d.prototype._enstopped=function(a){var b=this.ships[a.ship];b&&b.deactivate(a.enhancement)},d.prototype._select=function(a){var b,c,d,e=this.ships;for(c in e)b=e[c],b.deselect();for(d in a)b=e[a[d].uuid],b&&b.select()},d.prototype._follow=function(a){var b=this.game,c=this.ships[a.uuid];void 0!==c&&b.camera.follow(c)},d.prototype._destroyed=function(a){var b,d=this.game,f=this.ships[a.uuid];void 0!==f&&(f.isPlayer&&(this.game.emit("gui/message","destroyed",2e3,2e3),this.game.clock.events.add(5e3,function(){c.location.reload()})),f.target=null,f.damage.destroyed(),f.data({health:0}),b=d.tweens.create(f),b.to({alpha:0},2500,e.Easing.Default,!1,12500),b.once("complete",function(){this.remove(a)},this),b.start(),this.game.clock.events.add(800,function(){this._untargeted(a)},this))},d.prototype._resume=function(){this.forceReposition=!0},d.prototype._reset=function(){this.removeAll()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{159:159,161:161,162:162,163:163,164:164,165:165,3:3,engine:"engine"}],161:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.minRotation=-10,this.maxRotation=10,this.setScale(1,3,1,3,3e3),this.setAlpha(1,0,3e3),this.setTint(16746632,1579032,500),this.makeParticles("texture-atlas",["engine-smoke.png","explosion-c.png","explosion-a.png","explosion-a.png","explosion-b.png","explosion-b.png"])}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],162:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0,200),this.minRotation=-10,this.maxRotation=10,this.blendMode=e.BlendMode.ADD,this.setScale(.1,.6,.1,.6,500),this.setAlpha(1,0,1e3),this.setTint(16737894,3355443,500),this.makeParticles("texture-atlas",["explosion-d.png","engine-smoke.png"]);
}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],163:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0,100),this.minRotation=-45,this.maxRotation=45,this.blendMode=e.BlendMode.ADD,this.setScale(.1,1,.1,1,250),this.setAlpha(1,0,250),this.setTint(3368601,6710886,250),this.makeParticles("texture-atlas","explosion-flash.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,d.prototype.color=function(a){this.setTint(a||3368601,6710886,100)},b.exports=d},{engine:"engine"}],164:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(.25,2.2,.25,2.2,250),this.setAlpha(1,0,2e3),this.setTint(16777215,16737894,250),this.makeParticles("texture-atlas","explosion-d.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,d.prototype.color=function(a){this.setTint(16777215,a||16737894,100)},b.exports=d},{engine:"engine"}],165:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(.25,1,.25,1,6e3),this.minRotation=-15,this.maxRotation=15,this.setAlpha(1,0,6e3),this.makeParticles("texture-atlas",["explosion-e.png"])}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],166:[function(a,b,c){(function(c){function d(a,b,c,d){void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=e.Easing.Default),this.duration=a.arcLength*a.linearSpeed*(c-b),d!==e.Easing.Default&&(this.duration*=2),this.start=this.getStartAngle(a,b),this.end=this.getEndAngle(a,c),this.easing=d}var e=a("engine");d.prototype.constructor=d,d.prototype.interpolate=function(a,b){return a.oribital.circumferencePoint(b)},d.prototype.getStartAngle=function(a,b){var d;return a.anticlockwise&&a.startAngle<=a.endAngle?(d=a.arcLength*b/a.oribital.radius,a.startAngle+2*c.Math.PI-d):(d=a.arcLength*b/a.oribital.radius*(a.anticlockwise?-1:1),a.startAngle+d)},d.prototype.getEndAngle=function(a,b){var d;return!a.anticlockwise&&a.endAngle<=a.startAngle?(d=a.arcLength*(1-b)/a.oribital.radius,a.endAngle+2*c.Math.PI-d):(d=a.arcLength*(1-b)/a.oribital.radius*(a.anticlockwise?-1:1),a.endAngle-d)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],167:[function(a,b,c){function d(a,b,c,d){void 0===b&&(b=0),void 0===c&&(c=1),void 0===d&&(d=e.Easing.Default),this.duration=a.linearLength*a.linearSpeed*(c-b),d!==e.Easing.Default&&(this.duration*=2),this.start=0+a.linearLength*b,this.end=a.linearLength-a.linearLength*(1-c),this.easing=d}var e=a("engine");d.prototype.constructor=d,d.prototype.interpolate=function(a,b){return e.Line.pointAtDistance(a.tangentPoint,a.destination,b)},b.exports=d},{engine:"engine"}],168:[function(a,b,c){(function(c){function d(a){e.Sprite.call(this,a,"texture-atlas","asteroid-x0"+(c.Math.floor(3*c.Math.random())+1)+".png"),this.angle=2*c.Math.random()*c.Math.PI,this.movspeed=1e-4*c.Math.random(),this.rotspeed=.0025*c.Math.random(),this.orbit=this.createOrbit(),this.tempPoint=new e.Point,this.scale.copy(this.createScale()),this.pivot.set(this.texture.frame.width/2,this.texture.frame.height/2),this.rotation=this.angle}var e=a("engine");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.orbit.circumferencePoint(this.angle,!1,this.tempPoint);this.position.copy(a),this.rotation+=this.rotspeed,this.angle+=this.movspeed},d.prototype.createOrbit=function(){var a=2048*c.Math.random()+128,b=2048*c.Math.random()+(a>1024?128:1024),d=new e.Ellipse(512,512,a,b);return d},d.prototype.createScale=function(){var a=.4*c.Math.random()+.6,b={x:a,y:a};return b},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],169:[function(a,b,c){(function(c){function d(a){e.Sprite.call(this,a,"texture-atlas","icon-target.png"),this.tint=3368601,this.blendMode=e.BlendMode.ADD,this.pivot.set(20,20),this.renderable=!1,this.tween=this.game.tweens.create(this),this.tween.to({alpha:0,rotation:2*c.Math.PI/3},500,e.Easing.Quadratic.Out),this.tween.on("complete",function(a){a.target.renderable=!1})}var e=a("engine");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.show=function(a){var b=this.game.world.scale.x;this.tween.isRunning&&this.tween.stop(),this.position.copy(a),this.scale.set(1/b,1/b),this.renderable=!0,this.alpha=1,this.rotation=0,this.tween.start()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],170:[function(a,b,c){function d(a,b,c){this.tilemap=a,this.game=a.game,this.id=b||-1,this.data=c||{},this.targetGraphics=this._drawRoom(c,16711680),this.selectGraphics=this._drawRoom(c,6724044),this.selectGraphics.on("inputOver",this._inputOver,this),this.selectGraphics.on("inputOut",this._inputOut,this),this.selectGraphics.on("inputDown",this._inputDown,this),this.tilemap.add(this.selectGraphics),this.tilemap.add(this.targetGraphics)}var e=a("engine");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.target=function(a){this.targetTween&&this.targetTween.stop(),this.targetGraphics.alpha=1,this.targetGraphics.renderable=a,a&&(this.targetTween=this.game.tweens.create(this.targetGraphics),this.targetTween.to({alpha:0},250,e.Easing.Default,!0,0,-1,!0))},d.prototype._drawRoom=function(a,b){var c=new e.Graphics(this.game);return c.lineStyle(2,b,1),c.beginFill(b,.2),c.drawRect(a.x,a.y,a.width,a.height),c.endFill(),c.renderable=!1,c},d.prototype._inputOver=function(){this.selectGraphics.renderable=!0},d.prototype._inputOut=function(){this.selectGraphics.renderable=!1},d.prototype._inputDown=function(a,b){b.button===e.Mouse.RIGHT_BUTTON?this.emit("targeted",this):b.button===e.Mouse.LEFT_BUTTON&&this.emit("targeted",this)},Object.defineProperty(d.prototype,"inputEnabled",{set:function(a){this.selectGraphics.inputEnabled=a,this.selectGraphics.input.priorityID=3,this.targetTween&&this.targetTween.stop()}}),b.exports=d},{engine:"engine"}],171:[function(a,b,c){Object.assign||(Object.assign=a(6))},{6:6}],172:[function(a,b,c){a(171)},{171:171}],173:[function(a,b,c){function d(){}var e=a("engine"),f=a(177),g=a(176),h=a(196),i=a(197),j=a(201),k=(a(205),a(208)),l=a(209),m=a(202),n=a(215),o=a(214),p=a(179),q=a(182),r=a(186),s=a(191),t=a(195);a(194);d.DISCONNECT_MESSAGE="connection to the server has been lost\nattempting to reconnect",d.FPSPROBLEM_MESSAGE="the game will automatically adjust\nyour graphics settings",d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.init=function(){this.auth=this.game.auth},d.prototype.preload=function(){this.game.load.image("vt323","imgs/game/fonts/vt323.png"),this.game.load.image("medium","imgs/game/fonts/medium.png"),this.game.load.image("deck","imgs/game/tilesets/deck-mini.png"),this.game.load.image("wall","imgs/game/tilesets/wall-mini.png"),this.game.load.image("grid","imgs/game/tilesets/grid-mini.png"),this.game.load.tilemap("ship-tilemap","data/ship-mini.json"),this.game.load.json("ship-configuration","data/ship-configuration.json"),this.game.load.json("enhancement-configuration","data/enhancement-configuration.json"),this.game.load.atlasJSONHash("texture-atlas","imgs/game/texture-atlas.png","data/texture-atlas.json"),this.game.load.spritesheet("crew","imgs/game/spritesheets/crew-mini.png",16,16),this.game.load.spritesheet("door","imgs/game/spritesheets/door-mini.png",16,16),this.game.load.image("vessel-x01-outline","imgs/game/ships/vessel-x01-outline.png"),this.game.load.image("vessel-x02-outline","imgs/game/ships/vessel-x02-outline.png")},d.prototype.create=function(){var a=this.game;this.selection=new s(a),this.hud=new e.Group(a),this.hud.visible=!1,this.modalComponent=new r(a),this.modalComponent.visible=!1,this.alertComponent=new p(a),this.flashMessageComponent=new q(a),this.centerPanel=new f(a,new h(0,0)),this.basePanel=new f(a,new h(0,0)),this.basePanel.setPadding(6,0,0,0),this.leftPane=new k(a),this.rightPane=new l(a),this.shipFittingPane=new o(a),this.shipPanel=new f(a,new i(g.LEFT,g.TOP,g.VERTICAL,6)),this.shipPanel.setPadding(6),this.shipPanel.addPanel(g.NONE,this.shipPane=new n(a,{player:!0})),this.targetPanel=new f(a,new i(g.RIGHT,g.TOP,g.VERTICAL,6)),this.targetPanel.setPadding(6),this.targetPanel.addPanel(g.NONE,this.targetPane=new n(a,{player:!1})),this.topPanel=new f(a,new i(g.CENTER,g.TOP,g.HORIZONTAL,6)),this.topPanel.addPanel(g.NONE,this.rightPane),this.bottomPane=new m(a),this.bottomPane.visible=!1,this.centerPanel.addPanel(g.CENTER,this.shipPanel),this.centerPanel.addPanel(g.LEFT,this.leftPane),this.centerPanel.addPanel(g.RIGHT,this.targetPanel),this.basePanel.addPanel(g.TOP,this.topPanel),this.basePanel.addPanel(g.BOTTOM,this.bottomPane),this.root=new f(a,new j),this.root.setSize(a.width,a.height),this.root.visible=!1,this.root.addChild(this.hud),this.root.addPanel(g.STRETCH,this.selection),this.root.addPanel(g.STRETCH,this.basePanel),this.root.addPanel(g.STRETCH,this.centerPanel),this.root.addPanel(g.STRETCH,this.modalComponent),this.game.stage.addChild(this.root),this.auth.on("user",this.login,this),this.auth.on("disconnected",this._disconnected,this),this.game.on("gui/modal",this.modal,this),this.game.on("fpsProblem",this._fpsProblem,this),this.game.on("game/pause",this._pause,this)},d.prototype.login=function(){this.auth.isUser()?(this.bottomPane.visible=!0,this.centerPanel.visible=!0):(this.bottomPane.visible=!1,this.centerPanel.visible=!1,this.registrationForm=new t(game)),this.modalComponent.visible&&this.modal(!1),this.toggle(!0)},d.prototype.refresh=function(){this.root.invalidate(!0)},d.prototype.toggle=function(a){this.hud.visible=this.root.visible=void 0!==a?a:!this.root.visible,this.root.visible&&this.root.invalidate()},d.prototype.modal=function(a,b,c,d){"boolean"!=typeof a&&(a=!0),void 0===b&&(b=new f(game,new j)),void 0===c&&(c=!0),void 0===d&&(d=!0),c&&a?(this.selection.stop(),this.game.input.keyboard.stop()):(this.selection.start(),this.game.input.keyboard.start()),this.modalComponent.empty(),this.modalComponent.addPanel(g.USE_PS_SIZE,b),this.modalComponent.visible=a,this.modalComponent.bg.settings.fillAlpha=d?.8:0,this.modalComponent.invalidate(!0),this.refresh()},d.prototype.resize=function(a,b){void 0!==this.root&&(this.root.resize(a,b),this.root.setSize(a,b),this.root.invalidate())},d.prototype._pause=function(){this.game.emit("gui/message","paused",1e3,500)},d.prototype._loggedin=function(){this.registrationForm.destroy(),this.loginForm.destroy(),this.loginForm=this.registrationForm=void 0,this.game.removeListener("gui/loggedin",this._loggedin)},d.prototype._disconnected=function(){this.game.emit("gui/alert",d.DISCONNECT_MESSAGE,!1,"connection lost")},d.prototype._fpsProblem=function(){this.game.emit("gui/alert",d.FPSPROBLEM_MESSAGE,"ok","performance problem")},b.exports=d},{176:176,177:177,179:179,182:182,186:186,191:191,194:194,195:195,196:196,197:197,201:201,202:202,205:205,208:208,209:209,214:214,215:215,engine:"engine"}],174:[function(a,b,c){function d(){}var e=a("engine"),f=a(173),g=a(175),h=a(176),i=(a(201),a(187)),j=a(184),k=a(189),l=a(185);d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.preload=function(){this.game.load.image("logo","imgs/game/logo.jpg"),this.game.load.image("small","imgs/game/fonts/small.png")},d.prototype.init=function(){},d.prototype.create=function(){var a=this.game,b=this.gui=new f,c=new g;a.state.add("gui",b,!0,!0),a.state.add("sector",c),a.state.start("sector"),this.currentState=0,this.pendingState=a.state.pendingLength,this.progress=new k(a,{label:!1}),this.image=new j(a,"logo",{padding:[0],border:[0],bg:{color:0}}),this.statusLabel=new l(a,"loading",{bg:{fillAlpha:0,borderSize:0},text:{fontName:"small"}}),this.root=new i(a,{layout:{ax:h.CENTER,ay:h.CENTER,direction:h.VERTICAL},bg:{color:0}}),this.root.setSize(a.width,a.height),this.root.addPanel(h.CENTER,this.image),this.root.addPanel(h.CENTER,this.progress),this.root.addPanel(h.CENTER,this.statusLabel),a.load.on("loadstart",this.loadingStart,this),a.load.on("loadcomplete",this.loadingComplete,this),a.load.on("filecomplete",this.loadingProgressBar,this),this.root.validate(),this.root.repaint(),this.root.invalidate=function(){this.isValid=!1,this.isLayoutValid=!1,this.cachedWidth=-1,this.validate(),this.repaint()}},d.prototype.loadingStart=function(){this.root.alpha=1,this.image.visible=!0,this.progress.visible=!0,this.statusLabel.visible=!0,this.game.stage.addChild(this.root)},d.prototype.loadingProgressBar=function(){var a=arguments[3],b=arguments[4],c=arguments[1],d=this.pendingState;this.progress.setProgressBar(a/b/d+this.currentState/d),this.statusLabel.text=c,this.statusLabel.invalidate()},d.prototype.loadingComplete=function(){this.currentState++,this.game.stage.addChild(this.root),this.game.state.hasPendingState||(this.tween=this.game.tweens.create(this.root),this.tween.to({alpha:0},4e3),this.tween.delay(500),this.tween.start(),this.tween.once("complete",function(){this.game.stage.removeChild(this.root)},this),this.image.visible=!1,this.progress.visible=!1,this.statusLabel.visible=!1)},d.prototype.update=function(){this.image.rotation+=.01},d.prototype.resize=function(a,b){void 0!==this.root&&(this.root.resize(a,b),this.root.setSize(a,b),this.root.invalidate())},b.exports=d},{173:173,175:175,176:176,184:184,185:185,187:187,189:189,201:201,engine:"engine"}],175:[function(a,b,c){(function(c){function d(){}var e=a("engine"),f=a(138),g=a(139),h=a(140),i=a(154),j=a(160),k=a(168);d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.init=function(a){c.state=this,this.scrollVelocityX=0,this.scrollVelocityY=0,this.scrollLock=!1},d.prototype.preload=function(){var a=this.game.load;a.image("space","imgs/game/space/sector-a.jpg"),a.image("talus","imgs/game/planets/talus.jpg"),a.image("clouds","imgs/game/planets/clouds.jpg"),a.image("laser-red","imgs/game/fx/laser-red.png"),a.image("laser-blue","imgs/game/fx/laser-blue.png"),a.audio("background","imgs/game/sounds/mood.mp3")},d.prototype.create=function(){var a=this,b=1e3,c=this.game.input.mouse;c.capture=!0,c.mouseWheelCallback=function(c){var d=c.deltaY/b,f=e.Math.clamp(this.world.scale.x-d,.4,1);a.game.paused||(a.zoom&&a.zoom.isRunning&&a.zoom.stop(),this.world.scale.set(f,f))},this.gui=game.state.getBackgroundState("gui"),this.game.world.setBounds(0,0,4096,4096),this.game.world.scale.set(.4,.4),this.game.camera.bounds=null,this.game.camera.focusOnXY(2048,2048),this.createManagers(),this.createBackground(),this.createSnow(),this.createAsteroids(),this.sound=this.game.sound.add("background",.5,!0),this.sound.on("decoded",function(){this.fadeIn(12e3,!0)}),this.game.once("ship/follow",function(){this.zoom=this.game.tweens.create(this.game.world.scale),this.zoom.to({x:.66,y:.66},6e3,e.Easing.Quadratic.InOut,!0)},this),this.game.clock.benchmark(),this.gui.login(),this.game.emit("gui/message","loading",500)},d.prototype.createBackground=function(){this.background=new f(this.game,this.game.width,this.game.height),this.planet=new g(this.game,"talus"),this.planet.position.set(2048/6,2048/6),this.game.world.background.add(this.planet),this.game.stage.addChildAt(this.background,0)},d.prototype.createManagers=function(){this.shipManager=new j(this.game),this.shipManager.hudGroup=this.gui.hud,this.selection=new i(this)},d.prototype.createSnow=function(){this.snow=new h(this.game,this.game.width,this.game.height),this.game.stage.addChild(this.snow),this.game.stage.swapChildren(this.snow,this.gui.root)},d.prototype.createAsteroids=function(){var a,b,c=100;for(b=0;c>b;b++)a=new k(this.game),a.position.set(512,512),this.game.world.foreground.add(a)},d.prototype.update=function(){var a=this.game,b=a.camera,c=a.input.keyboard,d=1.04;this.scrollLock||((c.isDown(e.Keyboard.A)||c.isDown(e.Keyboard.LEFT))&&(this.scrollVelocityX+=d),(c.isDown(e.Keyboard.D)||c.isDown(e.Keyboard.RIGHT))&&(this.scrollVelocityX-=d),(c.isDown(e.Keyboard.W)||c.isDown(e.Keyboard.UP))&&(this.scrollVelocityY+=d),(c.isDown(e.Keyboard.S)||c.isDown(e.Keyboard.DOWN))&&(this.scrollVelocityY-=d),b.pan(this.scrollVelocityX,this.scrollVelocityY),(this.scrollVelocityX>0||this.scrollVelocityX<0)&&(this.scrollVelocityX/=1.1),this.scrollVelocityX>-.05&&this.scrollVelocityX<.05&&(this.scrollVelocityX=0),(this.scrollVelocityY>0||this.scrollVelocityY<0)&&(this.scrollVelocityY/=1.1),this.scrollVelocityY>-.05&&this.scrollVelocityY<.05&&(this.scrollVelocityY=0))},d.prototype.resize=function(a,b){this.background&&this.background.resize(a,b),this.snow&&this.snow.resize(a,b)},d.prototype.shutdown=function(){this.selection.destroy()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{138:138,139:139,140:140,154:154,160:160,168:168,engine:"engine"}],176:[function(a,b,c){function d(){}d.NONE=0,d.LEFT=1,d.RIGHT=2,d.TOP=4,d.BOTTOM=8,d.CENTER=16,d.HORIZONTAL=32,d.VERTICAL=64,d.TEMPORARY=128,d.STRETCH=256,d.UsePsSize=d.USE_PS_SIZE=512,d.TopLeft=d.LEFT|d.TOP,d.TopRight=d.RIGHT|d.TOP,d.BottomLeft=d.LEFT|d.BOTTOM,d.BottomRight=d.RIGHT|d.prototype.BOTTOM,b.exports=d},{}],177:[function(a,b,c){function d(a,b,c){e.Group.call(this,a),this.layout=b||new f,this.constraint=c,this.cachedHeight=0,this.psWidth=this.psHeight=this.cachedWidth=-1,this.size={width:0,height:0},this.border={top:0,left:0,bottom:0,right:0},this.padding={top:0,left:0,bottom:0,right:0},this.views=[],this.panels=[],this.isValid=!1,this.isLayoutValid=!1}var e=a("engine"),f=a(201);d.prototype=Object.create(e.Group.prototype),d.prototype.constructor=d,d.prototype.addPanel=function(a,b){null!=b.constraint?constr=b.constraint:b.constraint=a,this.panels.push(b),this.add(b)},d.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1),this.remove(a)},d.prototype.removeAll=function(){var a,b,c=this.panels,d=c.length;for(b=0;d>b;b++)a=c[b],this.remove(a,!1)},d.prototype.addView=function(a){this.views.push(a),this.add(a)},d.prototype.invalidate=function(a){if(this.isValid=!1,this.isLayoutValid=!1,this.cachedWidth=-1,a){for(var b=0;b<this.panels.length;b++)this.panels[b].invalidate(a);this.validate(),this.repaint()}else this.parent&&this.parent.invalidate?this.parent.invalidate():this.parent&&!this.parent.invalidate&&(this.validate(),this.repaint())},d.prototype.validate=function(){if(this.validateMetric(),this.size.width>0&&this.size.height>0&&this.isLayoutValid===!1&&this.visible===!0){this.layout.doLayout(this);for(var a=0;a<this.panels.length;a++)this.panels[a].isLayoutValid||this.panels[a].validate();this.isLayoutValid=!0}},d.prototype.validateMetric=function(){this.isValid===!1&&this.recalc&&this.recalc()},d.prototype.repaint=function(){if(this.paint(),this.visible===!0)for(var a=0;a<this.panels.length;a++)this.panels[a].isValid||this.panels[a].repaint();this.isValid=!0},d.prototype.paint=function(){for(var a=0;a<this.views.length;a++)this.views[a].paint(this.top,this.left,this.bottom,this.right)},d.prototype.resize=function(a,b){},d.prototype.setBorder=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),(this.border.top!=a||this.border.left!=b||this.border.bottom!=c||this.border.right!=d)&&(this.border.top=a,this.border.left=b,this.border.bottom=c,this.border.right=d),this},d.prototype.setPadding=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),(this.padding.top!=a||this.padding.left!=b||this.padding.bottom!=c||this.padding.right!=d)&&(this.padding.top=a,this.padding.left=b,this.padding.bottom=c,this.padding.right=d),this},d.prototype.setSize=function(a,b){return(a!=this.size.width||b!=this.size.height)&&(this.size.width=a,this.size.height=b,this.isValid=!1,this.isLayoutValid=!1,this.resize(a,b)),this},d.prototype.setLocation=function(a,b){(a!=this.x||this.y!=b)&&(this.position.x=a,this.position.y=b,null!=this.relocated&&this.relocated(a,b))},d.prototype.setPreferredSize=function(a,b){(a!=this.psWidth||b!=this.psHeight)&&(this.psWidth=a,this.psHeight=b)},d.prototype.getPreferredSize=function(){if(this.validateMetric(),this.cachedWidth<0){var a=this.psWidth<0||this.psHeight<0?this.layout.calcPreferredSize(this):{width:0,height:0};return a.width=this.psWidth>=0?this.psWidth:a.width+this.left+this.right,a.height=this.psHeight>=0?this.psHeight:a.height+this.top+this.bottom,this.cachedWidth=a.width,this.cachedHeight=a.height,a}return{width:this.cachedWidth,height:this.cachedHeight}},d.prototype.destroy=function(){e.Group.prototype.destroy.call(this),this.layout=this.border=this.padding=void 0,this.views=[],this.panels=[]},Object.defineProperty(d.prototype,"top",{get:function(){return this.padding.top+this.border.top}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.padding.left+this.border.left}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.padding.bottom+this.border.bottom}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.padding.right+this.border.right}}),b.exports=d},{201:201,engine:"engine"}],178:[function(a,b,c){function d(){this.gap=0}d.prototype.constructor=d,d.prototype.paint=function(){},Object.defineProperty(d.prototype,"top",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.gap}}),b.exports=d},{}],179:[function(a,b,c){function d(a,b){g.call(this,a,{padding:[1,1,6,1],border:[0],bg:{fillAlpha:1,color:3355443,borderSize:2,borderColor:6710886,radius:4},title:{padding:[6,10],border:[0],text:{tint:16724838,fontName:"medium"},bg:{color:2236962,fillAlpha:1,borderSize:0,radius:4}},message:{padding:[10,10,8,10],border:[0],text:{fontName:"medium",characterSpacing:1,lineSpacing:4},bg:{color:3355443,fillAlpha:1,borderSize:0}},button:{bg:{fillAlpha:1,color:3355443,borderSize:0,blendMode:e.BlendMode.ADD,radius:4},label:{padding:[4,8],bg:{highlight:3355443,fillAlpha:0,color:2236962,borderSize:2,radius:4}}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new j(a,this.settings.bg),this.title=new h(a,"alert",this.settings.title),this.message=new h(a,"",this.settings.message),this.button=new i(a,"close",this.settings.button),this.button.on("inputUp",this._close,this),this.addView(this.bg),this.addPanel(f.STRETCH,this.title),this.addPanel(f.NONE,this.message),this.addPanel(f.CENTER,this.button),this.game.on("gui/alert",this._alert,this)}var e=a("engine"),f=a(176),g=(a(177),a(187)),h=a(185),i=a(180),j=a(219);e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype._alert=function(a,b,c){this.title.text=c||"alert",this.message.text=a||"",b===!1?this.button.visible=!1:(this.button.visible=!0,this.button.label.text=b||"close"),this.game.emit("gui/modal",!0,this)},d.prototype._close=function(){this.game.emit("gui/modal",!1)},b.exports=d},{176:176,177:177,180:180,185:185,187:187,219:219,engine:"engine"}],180:[function(a,b,c){function d(a,b,c){f.call(this,a,new i),this._alert=!1,this._disabled=!1,this.settings=l.mixin(c,{padding:[2],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:4},label:{bg:{highlight:5802200,fillAlpha:.6,color:3696824,borderSize:2,radius:4}}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.label=new g(a,b,this.settings.label),this.label.alpha=.9,this.bg=new j(a,this.settings.bg),this.bg.alpha=.75,this.colorBlend=new k(a,this.bg),this.colorBlend.setColor(16777215,16776960,250,e.Easing.Linear.None,!0),this.colorBlend.on("stop",function(){this.bg.tint=16777215},this),this.bg.on("inputOver",this._inputOver,this),this.bg.on("inputOut",this._inputOut,this),this.bg.on("inputDown",this._inputDown,this),this.bg.on("inputUp",this._inputUp,this),this.addView(this.bg),this.addPanel(h.USE_PS_SIZE,this.label),this.start()}var e=a("engine"),f=a(177),g=a(185),h=a(176),i=a(201),j=a(219),k=a(193),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.bg.inputEnabled=!0,this.bg.input.priorityID=2},d.prototype.stop=function(){this.bg.inputEnabled=!1},d.prototype.alert=function(){this._alert=!0,this.bg.alpha=1,this.colorBlend.start()},d.prototype._inputUp=function(){this.disabled||(this._alert&&(this._alert=!1,this.colorBlend.stop()),this.bg.tint=16777215,this.label.bg.tint=16777215,this.emit("inputUp",this))},d.prototype._inputDown=function(){this.disabled||(this.bg.tint=11193582,this.label.bg.tint=11193582,this.emit("inputDown",this))},d.prototype._inputOver=function(){this.disabled||(this.bg.alpha=1,this.label.alpha=1)},d.prototype._inputOut=function(){this.disabled||(this._alert||(this.bg.alpha=.75),this.label.alpha=.9)},Object.defineProperty(d.prototype,"tint",{set:function(a){this.bg.tint=a},get:function(){return this.bg.tint}}),Object.defineProperty(d.prototype,"disabled",{set:function(a){a===!1?(this.label.alpha=.9,this.bg.alpha=.9):(this.label.alpha=.25,this.bg.alpha=.5),this._disabled=a},get:function(){return this._disabled}}),b.exports=d},{176:176,177:177,185:185,193:193,201:201,219:219,engine:"engine"}],181:[function(a,b,c){function d(a,b,c){f.call(this,a,new i),this._alert=!1,this._selected=!1,this._disabled=!1,this._tempPosition=new e.Point,this.settings=l.mixin(c,{padding:[2],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:4,disabled:3355443},icon:{bg:{highlight:5802200,fillAlpha:.75,color:3696824,borderSize:2,radius:4}}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.image=new g(a,b,this.settings.icon),this.settings.disabled&&(this.disabled=!0),this.bg=new j(a,this.settings.bg),this.bg.alpha=.75,this.input=new e.InputHandler(this),this.input.start(2),this.colorBlend=new k(a,this.image),this.colorBlend.setColor(3368601,3394611,250,e.Easing.Quadratic.InOut,!0),this.colorBlend.on("stop",function(){this.image.tint=16777215},this),this.on("inputOver",this._inputOver,this),this.on("inputOut",this._inputOut,this),this.on("inputDown",this._inputDown,this),this.on("inputUp",this._inputUp,this),this.addView(this.bg),this.addPanel(h.USE_PS_SIZE,this.image)}var e=a("engine"),f=a(177),g=a(184),h=a(176),i=a(201),j=a(219),k=a(193),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.input.start(2)},d.prototype.stop=function(){this.input.stop()},d.prototype.alert=function(){this._alert=!0,this.image.alpha=1,this.colorBlend.start()},d.prototype.enableDrag=function(){this.input.enableDrag(),this.on("dragStart",this._dragStart,this)},d.prototype._dragStart=function(){this._tempPosition.copyFrom(this.position),this.once("dragStop",this._dragStop,this)},d.prototype._dragStop=function(){var a=game.tweens.create(this.position);a.to({x:this._tempPosition.x,y:this._tempPosition.y},150,e.Easing.Quadratic.Out),a.start()},d.prototype._inputUp=function(){this.disabled||(this._alert&&(this._alert=!1,this.colorBlend.stop()),this.bg.tint=16777215,this.image.bg.tint=16777215)},d.prototype._inputDown=function(){this.disabled||(this.bg.tint=11193582,this.image.bg.tint=11193582)},d.prototype._inputOver=function(){this.disabled||(this.image.alpha=1,this.bg.alpha=1)},d.prototype._inputOut=function(){this.disabled||(this._alert||(this.image.alpha=.9),this.bg.alpha=.75)},Object.defineProperty(d.prototype,"tint",{set:function(a){this.image.tint=a},get:function(){return this.image.tint}}),Object.defineProperty(d.prototype,"selected",{set:function(a){a===!0?(this._disabled=!0,this.bg.tint=65280,this.image.tint=8978312,this.image.bg.tint=65280,this.image.alpha=1):(this._disabled=!1,this.bg.tint=16777215,this.image.tint=16777215,this.image.bg.tint=16777215,this.image.alpha=.9),this._selected=a},get:function(){return this._selected}}),Object.defineProperty(d.prototype,"disabled",{set:function(a){a===!1?(this.image.alpha=.9,this.bg.tint=16777215):(this.image.alpha=.25,this.bg.tint=this.settings.bg.disabled),this._disabled=a},get:function(){return this._disabled}}),b.exports=d},{176:176,177:177,184:184,193:193,201:201,219:219,engine:"engine"}],182:[function(a,b,c){function d(a,b){g.call(this,a,{padding:[2,0],border:[0],layout:{gap:0},bg:{fillAlpha:.4,color:0,borderSize:0,radius:0},message:{padding:[5,7,5,5],border:[0],text:{fontName:"medium",characterSpacing:2},bg:{color:0,fillAlpha:.6,borderSize:0}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new i(a,this.settings.bg),this.message=new h(a,"",this.settings.message),this.addView(this.bg),this.addPanel(f.USE_PS_SIZE,this.message),this.game.on("gui/message",this._message,this)}var e=a("engine"),f=a(176),g=(a(177),a(187)),h=a(185),i=a(219);e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype._message=function(a,b,c){b=b||3500,c=c||3e3,this.message.text=a||"",this.alpha=1,this.messageTween=this.game.tweens.create(this),this.messageTween.to({alpha:0},b,e.Easing.Quadratic.Out),this.messageTween.on("complete",this._close,this),this.messageTween.delay(c),this.messageTween.start(),this.game.emit("gui/modal",!0,this,!1,!1)},d.prototype._close=function(){this.game.emit("gui/modal",!1)},b.exports=d},{176:176,177:177,185:185,187:187,219:219,engine:"engine"}],183:[function(a,b,c){function d(a,b){f.call(this,a.game,!0),this.settings=k.mixin(b,{width:128,height:64,padding:[0],border:[0],layout:{ax:i.CENTER,ay:i.TOP,direction:i.VERTICAL,gap:0},label:{text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0}},message:{text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0}},health:{width:80,height:4,label:!1,bg:{fillAlpha:1,color:0,borderSize:0},progress:{fillAlpha:1,color:65331,borderSize:0}}}),this.ship=a,this.layout=new j(this.settings.layout.ax,this.settings.layout.ay,this.settings.layout.direction,this.settings.layout.gap),this.setSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border)}var e=a("engine"),f=a(177),g=a(185),h=a(189),i=a(176),j=a(197),k=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(){var a=this.game,b=this.ship;this.ship.manager.hudGroup.addChild(this),this.ship.username&&(this.label=new g(a,b.username,this.settings.label),this.label.tint=b.isPlayer?3407667:3381759,this.addPanel(i.CENTER,this.label)),this.healthBar=new h(this.game,this.settings.health),this.healthBar.setProgressBar(b.details.health/b.config.stats.health),this.healthBar.renderable=!1,this.addPanel(i.CENTER,this.healthBar),this.validate(),this.repaint()},d.prototype.update=function(){var a=this.ship,b=this.game.world,c=b.worldTransform.apply(a.position);this.pivot.set(this.settings.width/2,-a.height/2*b.scale.x-12),this.position.set(c.x,c.y)},d.prototype.flash=function(a,b,c,d,f){void 0===b&&(b=16777215),void 0===d&&(d=15),void 0===f&&(f=!1);var h=this.ship,i=new g(this.game,a,this.settings.message),j=e.Easing.Quadratic.InOut,k=this.game.tweens.create(i.position),l=this.game.tweens.create(i);i.tint=b,i.alpha=0,i.pivot.set(i.width/2,i.height/2),i.position.set(this.size.width/2,-h.height/2-12),f&&i.scale.set(1.5,1.5),this.add(i),k.to({y:i.y-d},2*c||500,j,!0),l.to({alpha:1},c||250,j,!0,0,0,!0),l.once("complete",function(){this.remove(i);
},this)},d.prototype.destroy=function(){this.ship.manager.hudGroup.removeChild(this),this.label=this.game=this.ship=this.layout=this.settings=void 0},b.exports=d},{176:176,177:177,185:185,189:189,197:197,engine:"engine"}],184:[function(a,b,c){function d(a,b,c){f.call(this,a,this),this.settings=i.mixin(c,{padding:[2],border:[1],bg:{fillAlpha:.75,color:3696824,borderSize:0}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new h(a,this.settings.bg),this.image=new g(a,b,this.settings.frame),(this.settings.width||this.settings.height)&&(this.image.width=this.settings.width,this.image.height=this.settings.height),this.addView(this.bg),this.addView(this.image)}var e=a("engine"),f=a(177),g=a(220),h=a(219),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.image.width,height:this.image.height}},d.prototype.doLayout=function(){this.image.position.set(this.left,this.top)},Object.defineProperty(d.prototype,"blendMode",{set:function(a){this.image.blendMode=a},get:function(){return this.image.blendMode}}),Object.defineProperty(d.prototype,"tint",{set:function(a){this.image.tint=a},get:function(){return this.image.tint}}),b.exports=d},{177:177,219:219,220:220,engine:"engine"}],185:[function(a,b,c){(function(c){function d(a,b,c){f.call(this,a,this),b=b||"",this.settings=i.mixin(c,{padding:[6,12],border:[0],color:16777215,bg:{},text:{},align:"left"}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.align=this.settings.align,this.settings.bg&&(this.bg=new h(a,this.settings.bg),this.addView(this.bg)),this.textView=new g(a,b,this.settings.text),this.textView.tint=this.settings.color,this.addView(this.textView)}var e=a("engine"),f=a(177),g=a(222),h=a(219),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.textView.width,height:this.textView.height}},d.prototype.doLayout=function(){var a=this.left;"right"===this.align?a=this.size.width-this.textView.width-this.right:"center"===this.align&&(a=c.Math.floor(this.size.width/2-this.textView.width/2)),this.textView.position.set(a,this.top)},Object.defineProperty(d.prototype,"blendMode",{get:function(){return this.textView.blendMode},set:function(a){this.textView.blendMode=a}}),Object.defineProperty(d.prototype,"tint",{get:function(){return this.textView.tint},set:function(a){this.textView.tint=a}}),Object.defineProperty(d.prototype,"text",{get:function(){return this.textView.fontTexture.text},set:function(a){this.textView.fontTexture.text=""+a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{177:177,219:219,222:222,engine:"engine"}],186:[function(a,b,c){function d(a,b){f.call(this,a,new g(0,0)),this.settings=i.mixin(b,{padding:[0],border:[0],bg:{fillAlpha:.75,color:0,borderSize:0,radius:0}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new h(a,this.settings.bg),this.addView(this.bg)}var e=a("engine"),f=a(177),g=a(201),h=a(219),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.empty=function(){if(this.panels.length>0)for(var a in this.panels)this.removePanel(this.panels[a])},b.exports=d},{177:177,201:201,219:219,engine:"engine"}],187:[function(a,b,c){function d(a,b){switch(f.call(this,a,!0),this.settings=n.mixin(b,{padding:[0],border:[0],layout:{ax:g.LEFT,ay:g.TOP,direction:g.VERTICAL,gap:0,columns:3,stretch:!0},bg:{fillAlpha:1,color:3696824,borderSize:0}}),this.settings.layout.type){case"stack":this.layout=new h;break;case"border":this.layout=new i(this.settings.layout.gap[0],this.settings.layout.gap[1]);break;case"percent":this.layout=new k(this.settings.layout.direction,this.settings.layout.gap,this.settings.layout.stretch);break;case"list":this.layout=new l(this.settings.layout.columns,this.settings.layout.gap[0],this.settings.layout.gap[1]);break;default:this.layout=new j(this.settings.layout.ax,this.settings.layout.ay,this.settings.layout.direction,this.settings.layout.gap)}(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.settings.bg&&(this.bg=new m(a,this.settings.bg),this.addView(this.bg))}var e=a("engine"),f=a(177),g=a(176),h=a(201),i=a(196),j=a(197),k=a(199),l=a(198),m=a(219),n=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d},{176:176,177:177,196:196,197:197,198:198,199:199,201:201,219:219,engine:"engine"}],188:[function(a,b,c){function d(a,b){f.call(this,a,Class.mixin(b,{flashBg:{color:16777215,fillAlpha:.5,blendMode:e.BlendMode.ADD,borderSize:0}})),this.flashBg=new BackgroundView(a,this.settings.flashBg),this.flashBg.tint=0,this.colorBlend=new ColorBlend(a,this.flashBg),this.colorBlend.setColor(0,43520,250,e.Easing.Quadratic.InOut,!0),this.colorBlend.loop=!1,this.colorBlend.on("stop",function(){this.flashBg.tint=0},this),this.addView(this.flashBg)}var e=a("engine"),f=a(187);ColorBlend=a(193),BackgroundView=a(219),Class=e.Class,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.alert=function(){this.colorBlend.start()},b.exports=d},{187:187,193:193,219:219,engine:"engine"}],189:[function(a,b,c){(function(c){function d(a,b){if(f.call(this,a,this),this.value=0,this.settings=j.mixin(b,{width:256,height:16,padding:[1],border:[0],label:{padding:[0],border:[0],bg:!1,text:{fontName:"small"},align:"center"},bg:{fillAlpha:1,color:4157375,borderSize:0},progress:{fillAlpha:1,color:0,borderSize:0}}),!this.settings.width&&!this.settings.height)throw Error("ProgressBar component must set a preferred size");this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.background=new i(a,this.settings.bg),this.progress=new i(a,j.mixin(this.settings.progress,{size:{width:0,height:this.settings.height-this.top-this.bottom}})),this.addView(this.background),this.addView(this.progress),this.settings.label&&(this.label=new h(a,"",this.settings.label),this.addPanel(g.NONE,this.label))}var e=a("engine"),f=a(177),g=a(176),h=a(185),i=(a(197),a(219)),j=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.settings.width,height:this.settings.height}},d.prototype.doLayout=function(){this.settings.label&&(this.label.setSize(this.size.width-this.right-this.left,this.size.height-this.top-this.bottom),this.label.setLocation(this.left,this.top),this.label.doLayout()),this.progress.position.set(this.left,this.top)},d.prototype.setMinMax=function(a,b){this.min=a,this.max=b},d.prototype.setProgressBar=function(a){var b=this.progress,c=this.label,d=this.min,f=this.max;b.settings.size.width=(this.settings.width-this.left-this.right)*a,b.paint(this.top,this.left,this.bottom,this.right),this.value=a,c&&void 0!==d&&void 0!==f&&(c.text=e.Math.roundTo(this.max*this.value,1)+"/"+this.max,c.blendMode=a>.5?e.BlendMode.MULTIPLY:e.BlendMode.ADD,c.doLayout())},Object.defineProperty(f.prototype,"percentage",{get:function(){return c.Math.floor(100*this.value)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{176:176,177:177,185:185,197:197,219:219,engine:"engine"}],190:[function(a,b,c){(function(c){function d(a,b,c){this.value=0,this.progressBg=new j(a,l.mixin(c.progress,{color:603243,borderSize:0})),this.progress=new j(a,l.mixin(c.progress,{color:16053492,borderSize:0,blendMode:e.BlendMode.ADD})),f.call(this,a,b,l.mixin(c,{padding:[2,2,2,6],bg:{fillAlpha:1,color:3696824,radius:0},icon:{bg:{highlight:!1,borderSize:0}},hotkey:{key:"",padding:[2],border:[0],text:{fontName:"small"},bg:{color:3696824,fillAlpha:1,borderSize:0,radius:0}},count:{padding:[0],border:[0],bg:{fillAlpha:0,borderSize:0,radius:0}}})),this.addView(this.progressBg),this.addView(this.progress),this.count=new g(a," ",this.settings.count),this.hotkey=new g(a,this.settings.hotkey.key,this.settings.hotkey),this.raster=new k(a,new i(h.USE_PS_SIZE)),this.raster.setPreferredSize(this.settings.width,this.settings.height),this.raster.addPanel(h.NONE,this.hotkey),this.raster.addPanel(h.CENTER,this.count),this.addPanel(h.NONE,this.raster),this.hotkey.setLocation(-2,-2)}var e=a("engine"),f=a(181),g=a(185),h=a(176),i=a(200),j=(a(187),a(219)),k=a(177),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.setProgressBar=function(a){this.value=c.Math.min(1,a),this.recalc(),this.progress.paint()},d.prototype.recalc=function(){var a=this.size,b=this.progressBg.settings,c=this.progress.settings;c.size={width:3,height:a.height*this.value},c.offset={x:a.width-3,y:a.height-a.height*this.value},b.size={width:4,height:a.height},b.offset={x:a.width-4,y:0}},Object.defineProperty(d.prototype,"disabled",{set:function(a){a===!1?this.image.tint=16777215:(this.image.tint=16711680,this.bg.alpha=.75),this._disabled=a},get:function(){return this._disabled}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{176:176,177:177,181:181,185:185,187:187,200:200,219:219,engine:"engine"}],191:[function(a,b,c){function d(a){f.call(this,a,this),this.selection=new g(a),this.selection.start(),this.selection.on("selected",this._selected,this),this.addView(this.selection)}var e=a("engine"),f=a(177),g=a(221);e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:0,height:0}},d.prototype.doLayout=function(){},d.prototype._selected=function(a,b){this.game.emit("gui/selected",a,b)},d.prototype._tap=function(a,b){b&&(a.button=e.Mouse.RIGHT_BUTTON)},d.prototype.start=function(){this.selection.start(),this.game.input.on("onTap",this._tap,this)},d.prototype.stop=function(){this.selection.stop(),this.game.input.removeListener("onTap",this._tap)},b.exports=d},{177:177,221:221,engine:"engine"}],192:[function(a,b,c){(function(c){function d(a,b,c){g.call(this,a,this),this.layers={},this.rooms=[],b?(this.key=b,this.config=a.cache.getJSON("ship-configuration",!1)[b],this.tilemap=new e.Tilemap(a,"ship-tilemap",this.config.tilemap),this.pathing=new e.TilemapPathing(this.tilemap,"wall","wall"),this.pathing.updateMap()):this.tilemap=new e.Tilemap(a,"ship-tilemap"),this.settings=l.mixin(c,{padding:[0],border:[0],bg:{fillAlpha:.1,borderSize:0}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new j(a,this.settings.bg),this.bg.inputEnabled=!0,this.bg.input.priorityID=2,this.colorBlend=new k(a),this.colorBlend.setColor(16711680,3368601,1e3,e.Easing.Quadratic.In),this.colorBlend.loop=!1,this.addView(this.bg),this.load()}var e=a("engine"),f=a(170),g=a(177),h=a(223),i=a(220),j=a(219),k=a(193),l=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.load=function(){this.createLayers(),this.createDoors(),this.createCrew(),this.createRooms()},d.prototype.start=function(){var a,b=this.rooms;for(a in b)b[a].inputEnabled=!0},d.prototype.stop=function(){var a,b=this.rooms;for(a in b)b[a].inputEnabled=!1},d.prototype.alert=function(){this.colorBlend.start()},d.prototype.target=function(a,b){this.rooms[a].target(b)},d.prototype.createImages=function(){var a,b,c=this.tilemap.images;for(b in c)"outline"!==c[b].name&&(a=c[b].name,this.layers[a]=new i(this.game,a),this.layers[a].alpha=c[b].alpha,this.addView(this.layers[a]))},d.prototype.createLayers=function(){var a,b,c,d=this.tilemap,f=d.widthInPixels,g=d.heightInPixels,j=d.layers;for(c in j)a=j[c].name,this.tilemap.addTilesetImage(a),this.layers[a]=new h(this.game,d,c,f,g),this.layers[a].alpha=j[c].alpha,this.addView(this.layers[a]),this.key&&"grid"===a&&(b=this.layers.outline=new i(this.game,this.key+"-outline"),b.blendMode=e.BlendMode.ADD,b.tint=3368601,b.alpha=.75,this.colorBlend.target=b,this.addView(b))},d.prototype.createDoors=function(){var a,b,d,f,g=this.tilemap,h=g.objects.doors;for(f in h)a=h[f],b=c.parseInt(a.properties.frame,10),d=new e.Sprite(game,"door",b),d.position.set(a.x,a.y),this.add(d)},d.prototype.createCrew=function(){var a,b,c,d=this.tilemap,f=d.objects.crew;for(c in f)a=f[c],b=new e.Sprite(game,"crew"),b.pivot.set(8,8),b.rotation=e.Math.degToRad(a.rotation),b.animations.add("work",[0,1,2,3,4,5],6,!0),b.animations.play("work"),b.position.set(a.x-8,a.y+8),this.add(b)},d.prototype.createRooms=function(){var a,b=this.tilemap,c=b.objects.rooms;this.settings;for(a in c)a=new f(this,a,c[a]),a.on("targeted",this._targeted,this),a.on("selected",this._selected,this),this.rooms.push(a)},d.prototype.calcPreferredSize=function(a){return{width:this.tilemap.widthInPixels,height:this.tilemap.heightInPixels}},d.prototype.doLayout=function(){var a,b,c=this.layers;for(b in c)a=c[b],a.position.set(this.left,this.top)},d.prototype._selected=function(a){this.emit("selected",{id:this.rooms.indexOf(a),system:a.data.properties.system})},d.prototype._targeted=function(a){this.emit("targeted",{id:this.rooms.indexOf(a),system:a.data.properties.system})},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{170:170,177:177,193:193,219:219,220:220,223:223,engine:"engine"}],193:[function(a,b,c){function d(a,b){this.game=a,this.target=b,this.loop=!0,this.colorData=[],f.call(this)}var e=a("engine"),f=a(3);d.CACHE={},d.FRAMERATE=60,d.STEPS=100,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.setTintData(),this.isRunning=!0,this.target.update=this.update.bind(this),this.emit("start",this)},d.prototype.stop=function(){this.emit("stop",this),delete this.target.update},d.prototype.update=function(){this.isRunning&&(this._t--,this._t?this.target.tint=this.colorData[this._t].color:this.loop?this.setTintData():this.stop())},d.prototype.setTintData=function(){this._t=this.colorData.length-1,this.target.tint=this.colorData[this._t].color},d.prototype.setColor=function(a,b,c,f,g){var h,i,j,k;if(void 0===a&&(minX=16777215),void 0===b&&(maxX=16777215),void 0===c&&(c=1e3),void 0===f&&(f=e.Easing.Linear.None),void 0===g&&(g=!1),this.startColor=a,this.endColor=b,h=""+a+(""+b)+(""+c)+(""+f)+(""+g),d.CACHE[h])this.colorData=d.CACHE[h];else if(c>0&&a!==b){for(i={step:0},j=this.game.tweens.create(i).to({step:d.STEPS},c,f),j.yoyo(g),d.CACHE[h]=this.colorData=j.generateData(d.FRAMERATE),k=0;k<this.colorData.length;k++)this.colorData[k].color=e.Color.interpolateColor(a,b,d.STEPS,this.colorData[k].step);this.colorData.reverse()}},b.exports=d},{3:3,engine:"engine"}],194:[function(a,b,c){(function(c){function d(a){this.game=a,this.sectorState=this.game.state.states.sector,this.formElement=c.document.getElementById("login-form"),this.emailElement=c.document.getElementById("login-email"),this.passwordElement=c.document.getElementById("login-password"),this.loginElement=c.document.getElementById("login-button"),this.registerElement=c.document.getElementById("register-button"),this.loginElement.addEventListener("click",this._loginBind=this._login.bind(this)),this.registerElement.addEventListener("click",this._registerBind=this._register.bind(this)),this.emailElement.addEventListener("focus",this._focusBind=this._focus.bind(this)),this.emailElement.addEventListener("blur",this._blurBind=this._blur.bind(this)),this.passwordElement.addEventListener("focus",this._focusBind),this.passwordElement.addEventListener("blur",this._blurBind),this.game.input.on("onDown",this._clear,this),this.game.input.on("keypress",this._keypress,this)}var e=(a("engine"),a("xhr"));d.prototype.constructor=d,d.prototype.destroy=function(){this.game.input.removeListener("onDown",this._clear),this.game.input.removeListener("keypress",this._keypress),this.loginElement.removeEventListener("click",this._loginBind),this.registerElement.removeEventListener("click",this._registerBind),this.emailElement.removeEventListener("focus",this._focusBind),this.emailElement.removeEventListener("blur",this._blurBind),this.passwordElement.removeEventListener("focus",this._focusBind),this.passwordElement.removeEventListener("blur",this._blurBind),this.formElement.parentNode.removeChild(this.formElement),this.game=this.sectorState=this.formElement=this.emailElement=this.passwordElement=this.loginElement=this.registerElement=void 0},d.prototype._keypress=function(a,b){switch(b.keyCode){case 13:this._blur(),this._login()}},d.prototype._clear=function(){this.emailElement.blur(),this.passwordElement.blur()},d.prototype._focus=function(){this.sectorState.scrollLock=!0},d.prototype._blur=function(){this.sectorState.scrollLock=!1},d.prototype._register=function(){this.game.emit("gui/registration")},d.prototype._login=function(){var a=this;this.formElement.style.display="none",""!==this.passwordElement.value&&""!==this.emailElement.value?e({method:"post",body:JSON.stringify({username:this.emailElement.value,password:this.passwordElement.value}),uri:"/login",headers:{"Content-Type":"application/json"}},function(b,c,d){var e=JSON.parse(d),f=e.user,g=e.error;if(g){switch(g){case"[[error:invalid-credentials]]":a.game.emit("gui/alert","you have entered invalid login credentials\nonly 5 login attempts allowed");break;case"[[error:user-banned]]":a.game.emit("gui/alert","your account has been banned\nplease contact support");break;case"[[error:ip-locked]]":a.game.emit("gui/alert","you are temporarily blocked for too many logins\nplease try again later");break;case"[[error:server-locked]]":a.game.emit("gui/alert","the server is temporarily locked to new logins");break;case"[[error:unknown-error]]":default:a.game.emit("gui/alert","an unknown error has occurred\nplease try again later")}a.formElement.style.display=""}else f&&a.game.emit("gui/loggedin",f)}):(this.formElement.style.display="",a.game.emit("gui/alert","you have not entered valid login credentials"))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine",xhr:"xhr"}],195:[function(a,b,c){(function(c){function d(a){this.game=a,this.game.on("gui/registration",this._show,this),this.sectorState=this.game.state.states.sector,this.modalElement=c.document.getElementById("registration-login"),this.cancelElement=c.document.getElementById("registration-cancel"),this.submitElement=c.document.getElementById("registration-submit"),this.startElement=c.document.getElementById("registration-start"),this.doneElement=c.document.getElementById("registration-done"),this.formUsernameElement=c.document.getElementById("registration-username"),this.formEmailElement=c.document.getElementById("registration-email"),this.pass1Element=c.document.getElementById("registration-pass1"),this.pass2Element=c.document.getElementById("registration-pass2"),this.errorElement=c.document.getElementById("registration-error"),this.modalElement.addEventListener("click",this._hideBind=this._hide.bind(this)),this.cancelElement.addEventListener("click",this._hideBind),this.submitElement.addEventListener("click",this._submitBind=this._submit.bind(this))}var e=(a("engine"),a("xhr"));d.prototype.constructor=d,d.prototype.destroy=function(){this.game.removeListener("gui/registration",this._show),this.modalElement.removeEventListener("click",this._hideBind),this.cancelElement.removeEventListener("click",this._hideBind),this.submitElement.removeEventListener("click",this._submitBind),this.modalElement.parentNode.removeChild(this.modalElement),this.game=this.sectorState=this.modalElement=this.cancelElement=this.submitElement=this.startElement=this.doneElement=this.formUsernameElement=this.formEmailElement=this.pass1Element=this.pass2Element=this.errorElement=void 0},d.prototype._show=function(){this.modalElement.style.display="block",this.sectorState.scrollLock=!0},d.prototype._hide=function(a){("registration-login"===a.target.id||"registration-cancel"===a.target.id)&&(this.modalElement.style.display="none",this.sectorState.scrollLock=!1)},d.prototype._submit=function(){var a=this;a.startElement.style.display="none",this.formUsernameElement.parentNode.style.border="",this.formEmailElement.parentNode.style.border="",this.pass1Element.parentNode.style.border="",this.pass2Element.parentNode.style.border="",this.errorElement.innerHTML="",this.pass1Element.value===this.pass2Element.value?e({method:"post",body:JSON.stringify({username:this.formUsernameElement.value,email:this.formEmailElement.value,password:this.pass1Element.value}),uri:"/register",headers:{"Content-Type":"application/json"}},function(b,c,d){var e=JSON.parse(d);if(e.error)switch(a.startElement.style.display="",e.error){case"[[error:invalid-email]]":a.formEmailElement.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="You have entered an invalid e-mail address.";break;case"[[error:invalid-username]]":a.formUsernameElement.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="You have entered an invalid username.";break;case"[[error:username-too-short]]":a.formUsernameElement.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your username is too short.";break;case"[[error:username-too-long]]":a.formUsernameElement.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your username is too long.";break;case"[[error:invalid-password]]":a.pass1Element.parentNode.style.border="solid 1px #f00",a.pass2Element.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your password is invalid.";break;case"[[error:password-too-short]]":a.pass1Element.parentNode.style.border="solid 1px #f00",a.pass2Element.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your password is too short.";break;case"[[error:password-too-long]]":a.pass1Element.parentNode.style.border="solid 1px #f00",a.pass2Element.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your password is too long.";break;case"[[error:email-exists]]":a.formEmailElement.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your email has already been registered.";break;case"[[error:username-exists]]":a.formUsernameElement.parentNode.style.border="solid 1px #f00",a.errorElement.innerHTML="Your username has been taken.";break;default:a.errorElement.innerHTML="An unknown error has occurred."}else a.startElement.style.display="none",a.doneElement.style.display="block"}):(a.startElement.style.display="",this.pass1Element.parentNode.style.border="solid 1px #f00",this.pass2Element.parentNode.style.border="solid 1px #f00",this.errorElement.innerHTML="Passwords must match!")},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine",xhr:"xhr"}],196:[function(a,b,c){function d(a,b){this.hgap=a||0,this.vgap=b||0}var e=a(176);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g,h,i,j,k,l={width:0,height:0};for(k=0;k<a.panels.length;k++)if(i=a.panels[k],i.visible===!0)switch(j=i.constraint){case e.CENTER:b=i;break;case e.TOP:f=i;break;case e.BOTTOM:g=i;break;case e.LEFT:c=i;break;case e.RIGHT:d=i;break;default:throw Error("Invalid constraints: "+j)}return void 0!=d&&(h=d.getPreferredSize(),l.width+=h.width+this.hgap,l.height=h.height>l.height?h.height:l.height),void 0!=c&&(h=c.getPreferredSize(),l.width+=h.width+this.hgap,l.height=h.height>l.height?h.height:l.height),void 0!=b&&(h=b.getPreferredSize(),l.width+=h.width,l.height=h.height>l.height?h.height:l.height),void 0!=f&&(h=f.getPreferredSize(),l.width=h.width>l.width?h.width:l.width,l.height+=h.height+this.vgap),void 0!=g&&(h=g.getPreferredSize(),l.width=h.width>l.width?h.width:l.width,l.height+=h.height+this.vgap),l},d.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j,k=a.top,l=a.size.height-a.bottom,m=a.left,n=a.size.width-a.right;for(i=0;i<a.panels.length;i++)if(f=a.panels[i],f.visible===!0)switch(g=f.constraint){case e.CENTER:b=f;break;case e.TOP:j=f.getPreferredSize(),f.setLocation(m,k),f.setSize(n-m,j.height),k+=j.height+this.vgap;break;case e.BOTTOM:j=f.getPreferredSize(),f.setLocation(m,l-j.height),f.setSize(n-m,j.height),l-=j.height+this.vgap;break;case e.LEFT:c=f;break;case e.RIGHT:d=f;break;default:throw Error("Invalid constraints: "+g)}void 0!=d&&(h=d.getPreferredSize(),d.setLocation(n-h.width,k),d.setSize(h.width,l-k),n-=h.width+this.hgap),void 0!=c&&(h=c.getPreferredSize(),c.setLocation(m,k),c.setSize(h.width,l-k),m+=h.width+this.hgap),void 0!=b&&(b.setLocation(m,k),b.setSize(n-m,l-k))},b.exports=d},{176:176}],197:[function(a,b,c){function d(a,b,c,d){this.ax=a||e.LEFT,this.ay=b||e.TOP,this.direction=c||e.HORIZONTAL,this.gap=d||0,this.stretchLast=!1}var e=a(176);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g={width:0,height:0},h=0;for(f=0;f<a.panels.length;f++)c=a.panels[f],c.visible===!0&&(d=c.getPreferredSize(),this.direction===e.HORIZONTAL?(g.width+=d.width,g.height=d.height>g.height?d.height:g.height):(g.width=d.width>g.width?d.width:g.width,g.height+=d.height),h++);return b=this.gap*(h>0?h-1:0),this.direction===e.HORIZONTAL?g.width+=b:g.height+=b,g},d.prototype.doLayout=function(a){var b,c,d,f,g=0,h=this.calcPreferredSize(a),i=a.top,j=a.left,k=null,l=a.size.width-j-a.right,m=a.size.height-i-a.bottom,n=(this.ax==e.RIGHT?l-h.width:this.ax==e.CENTER?~~((l-h.width)/2):0)+j,o=(this.ay==e.BOTTOM?m-h.height:this.ay==e.CENTER?~~((m-h.height)/2):0)+i;for(f=0;f<a.panels.length;f++)b=a.panels[f],b.visible===!0&&(c=b.getPreferredSize(),d=b.constraint,this.direction===e.HORIZONTAL?(d===e.STRETCH?c.height=a.size.height-i-a.bottom:d===e.CENTER?g=~~((h.height-c.height)/2):d===e.BOTTOM&&(g=h.height-c.height),b.setLocation(n,o+g),n+=c.width+this.gap):(d===e.STRETCH?c.width=a.size.width-j-a.right:d===e.CENTER?g=~~((h.width-c.width)/2):d===e.RIGHT&&(g=h.width-c.width),b.setLocation(n+g,o),o+=c.height+this.gap),b.setSize(c.width,c.height),k=b);null!==k&&this.stretchLast===!0&&(this.direction===e.HORIZONTAL?k.setSize(a.size.width-k.x-a.right,k.size.height):k.setSize(k.width,a.size.height-k.y-a.bottom))},b.exports=d},{176:176}],198:[function(a,b,c){function d(a,b,c){this.columns=a||3,this.hgap=b||0,this.vgap=c||0}a(176);d.prototype.calcPreferredSize=function(a){var b,c,d,e=a.panels,f=e.length,g={width:0,height:0},h=0,i=0,j=this.hgap,k=this.vgap,l=this.columns;for(d=0;f>d;d++)b=e[d],b.visible===!0&&(c=b.getPreferredSize(),l>0?(c.height+k>i&&(i=c.height+k),h+=c.width+(l>1?j:0),l--):(g.width<h&&(g.width=h),g.height+=i,l=this.columns,h=0));return g.height+=i-k,g},d.prototype.doLayout=function(a){var b,c,d,e=(this.gap,a.panels),f=e.length,g=a.top,h=a.left,i=a.size.width-h-a.right,j=(a.size.height-g-a.bottom,h),k=g,l=this.hgap,m=this.vgap;for(d=0;f>d;d++)b=e[d],b.visible===!0&&(c=b.getPreferredSize(),j+c.width>i+m&&(j=h,k+=c.height+m),b.setLocation(j,k),b.setSize(c.width,c.height),j+=c.width+l)},b.exports=d},{176:176}],199:[function(a,b,c){function d(a,b,c){this.direction=a||e.HORIZONTAL,this.gap=b||0,this.stretch=c||!0}var e=a(176);d.prototype.calcPreferredSize=function(a){var b,c,d=0,f=a.panels.length,g=this.gap*(0===f?0:f-1);for(c=0;f>c;c++)b=a.panels[c].getPreferredSize(),this.direction==e.HORIZONTAL?(b.height>d&&(d=b.height),g+=b.width):(b.width>d&&(d=b.width),g+=b.height);return this.direction==e.HORIZONTAL?{width:g,height:d}:{width:d,height:g}},d.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o=a.right,p=a.top,q=a.bottom,r=a.left,s=a.panels.length,t=-this.gap*(0===s?0:s-1);for(this.direction==e.HORIZONTAL?(t+=a.size.width-r-o,f=r):(t+=a.size.height-p-q,f=p),n=0;s>n;n++)b=a.panels[n],c=b.constraint,d=c==e.USE_PS_SIZE,this.direction==e.HORIZONTAL?(g=s-1==n?a.size.width-o-f:d?b.getPreferredSize().width:~~(t*c/100),h=p,i=a.size.height-p-q,this.stretch===!1&&(j=i,i=b.getPreferredSize().height,h=p+~~((j-i)/2)),b.setLocation(f,h),b.setSize(g,i)):(g=s-1==n?a.size.height-q-f:d?b.getPreferredSize().height:~~(t*c/100),k=r,l=a.size.width-r-o,this.stretch===!1&&(m=l,l=b.getPreferredSize().width,k=r+~~((m-l)/2)),b.setLocation(k,f),b.setSize(l,g)),f+=g+this.gap},b.exports=d},{176:176}],200:[function(a,b,c){function d(a){this.flag=a?a:e.USE_PS_SIZE}var e=a(176);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g,h={width:0,height:0},i=(this.flag&e.USE_PS_SIZE)>0;for(g=0;g<a.panels.length;g++)b=a.panels[g],b.visible===!0&&(c=i?b.getPreferredSize():{width:b.width,height:b.height},d=b.x+c.width,f=b.y+c.height,d>h.width&&(h.width=d),f>h.height&&(h.height=f));return h},d.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j=a.size.width-a.right,k=a.size.height-a.bottom,l=(this.flag&e.USE_PS_SIZE)>0;for(i=0;i<a.panels.length;i++)b=a.panels[i],d=0,f=0,b.visible===!0&&(l?(c=b.getPreferredSize(),d=c.width,f=c.height):(d=b.width,f=b.height),b.constraint&&((b.constraint&e.HORIZONTAL)>0&&(d=j-b.x),(b.constraint&e.VERTICAL)>0&&(f=k-b.y)),b.setSize(d,f),b.constraint&&(g=b.x,h=b.y,b.constraint==e.CENTER?(g=(a.size.width-d)/2,h=(a.size.height-f)/2):((b.constraint&e.TOP)>0?h=0:(b.constraint&e.BOTTOM)>0&&(h=a.size.height-f),(b.constraint&e.LEFT)>0?g=0:(b.constraint&e.RIGHT)>0&&(g=a.size.width-d)),b.setLocation(g,h)))},b.exports=d},{176:176}],201:[function(a,b,c){function d(){}var e=a(176);d.prototype.calcPreferredSize=function(a){var b,c,d,e=0,f=0;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(c=b.getPreferredSize(),c.width>e&&(e=c.width),c.height>f&&(f=c.height));return{width:e,height:f}},d.prototype.doLayout=function(a){var b,c,d,f=a.top,g=a.size.height-a.bottom-f,h=a.left,i=a.size.width-a.right-h;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(constraint=b.constraint,constraint==e.USE_PS_SIZE?(c=b.getPreferredSize(),b.setSize(c.width,c.height),b.setLocation(h+~~((i-c.width)/2),f+~~((g-c.height)/2))):(b.setSize(i,g),b.setLocation(h,f)))},b.exports=d},{176:176}],202:[function(a,b,c){function d(a){f.call(this,a,{padding:[0,0,5,0],border:[0],layout:{ax:e.CENTER,ay:e.BOTTOM,direction:e.HORIZONTAL,gap:3,stretch:!0},bg:!1,pane:{bg:!1}}),this.leftPane=new f(a,this.settings.pane),this.centerPane=new f(a,this.settings.pane),this.rightPane=new f(a,this.settings.pane),this.enhancementPane=new g(a),this.vitalsPane=new h(a),this.subsystemPane=new i(a),this.inventoryPane=new j(a),this.leftPane.addPanel(e.NONE,this.enhancementPane),this.leftPane.addPanel(e.NONE,this.vitalsPane),this.centerPane.addPanel(e.NONE,this.inventoryPane),this.rightPane.addPanel(e.NONE,this.subsystemPane),this.addPanel(e.TOP,this.leftPane),this.addPanel(e.BOTTOM,this.centerPane),this.addPanel(e.BOTTOM,this.rightPane)}var e=(a("engine"),a(176)),f=a(187),g=(a(197),a(204)),h=a(218),i=a(216),j=a(206);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d},{176:176,187:187,197:197,204:204,206:206,216:216,218:218,engine:"engine"}],203:[function(a,b,c){function d(a,b,c){f.call(this,a,new j(0,0)),this.settings=l.mixin(c,{padding:[1,4],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:0},title:{padding:[1,1,0,1],layout:{type:"border",gap:[1,0]},bg:{fillAlpha:1,color:5789784,radius:0,borderSize:0,blendMode:e.BlendMode.MULTIPLY}},content:{padding:[1],bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:e.BlendMode.MULTIPLY}},tabs:{padding:[0],layout:{ax:g.LEFT,ay:g.TOP,direction:g.HORIZONTAL,gap:1},bg:{fillAlpha:0,radius:0,borderSize:0}},button:{padding:[0],bg:{fillAlpha:1,borderSize:0,radius:0},label:{padding:[5,8,6,8],border:[0],text:{fontName:"small"},bg:{highlight:!1,borderSize:0,fillAlpha:0,radius:0}}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),
this.title=new h(a,this.settings.title),this.content=new h(a,this.settings.content),this.button=new i(a,b,this.settings.button),this.tabs=new h(a,this.settings.tabs),this.label=this.button.label,this.settings.bg&&(this.bg=new k(a,this.settings.bg),this.addView(this.bg)),this.addPanel(g.CENTER,this.content),this.addPanel(g.TOP,this.title),this.title.addPanel(g.LEFT,this.button),this.title.addPanel(g.CENTER,this.tabs)}var e=a("engine"),f=a(177),g=a(176),h=a(187),i=a(180),j=a(196),k=a(219),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.addTab=function(a,b){this.tabs.addPanel(a,b)},d.prototype.addContent=function(a,b){this.content.addPanel(a,b)},d.prototype.removeContent=function(a){this.content.removePanel(a)},b.exports=d},{176:176,177:177,180:180,187:187,196:196,219:219,engine:"engine"}],204:[function(a,b,c){(function(c){function d(a,b,c){f.call(this,a,new i(0,0)),this.socket=a.net.socket,this.data={},this.buttons={},this.config=this.game.cache.getJSON("enhancement-configuration"),this.settings=l.mixin(c,{padding:[1],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:0},content:{padding:[3],bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:e.BlendMode.MULTIPLY},layout:{direction:g.HORIZONTAL,gap:3}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new j(a,this.settings.bg),this.content=new h(a,this.settings.content),this.content.setPreferredSize(215,52),this.addView(this.bg),this.addPanel(g.CENTER,this.content),this.game.on("gui/player/select",this._playerSelect,this),this.game.on("enhancement/started",this._enhancmentStarted,this),this.game.on("enhancement/cancelled",this._enhancmentCancelled,this)}var e=a("engine"),f=a(177),g=a(176),h=a(187),i=(a(185),a(196)),j=a(219),k=a(190),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.addContent=function(a,b){this.content.addPanel(a,b)},d.prototype.create=function(a,b){return new k(game,"texture-atlas",{icon:{padding:[0],border:[0],width:42,height:42,frame:"enhancement-"+a+".png",bg:{fillAlpha:0,borderSize:0,radius:0}},hotkey:{key:""+b}})},d.prototype._select=function(a){var b=this.data;a.tint=16746496,this.socket.emit("enhancement/start",{ship:b.uuid,enhancement:a.id})},d.prototype._enhancmentStarted=function(a){if(a.ship===this.data.uuid){var b,c,d=this.game,e=this.buttons[a.enhancement],f=this.config[a.enhancement],g={count:0,total:4*f.cooldown,button:e};b=d.clock.events.repeat(250,g.total,this._updateCooldown,g),b.on("complete",function(a){a.button.disabled=!1,a.button.count.visible=!1,a.button.setProgressBar(1)}),f.active&&(c={count:10*f.active,total:10*f.active,button:e},b=d.clock.events.repeat(100,c.total,this._updateActive,c)),e.disabled=!0,e.count.text=f.cooldown,e.count.visible=!0,e.invalidate(!0)}},d.prototype._enhancmentCancelled=function(a){var b,c=this.game,d=this.buttons[a.enhancement];d.disabled=!1,d.count.visible=!1,d.tint=16746496,b=c.clock.events.repeat(200,5,function(){switch(d.tint){case 16777215:return d.tint=16746496;default:return d.tint=16777215}})},d.prototype._updateCooldown=function(){this.count++,this.button.count.text=c.Math.floor((this.total-this.count)/4+1),this.button.invalidate(!0)},d.prototype._updateActive=function(){this.count--,this.button.setProgressBar(this.count/this.total)},d.prototype._playerSelect=function(a){var b,d,e,f=a.enhancements;if(this.data.uuid)this.data=a;else{this.data=a;for(e in f)b=f[e],d=this.create(b,c.parseInt(e)+1),d.id=b,d.on("inputUp",this._select,this),d.setProgressBar(1),this.buttons[b]=d,this.addContent(g.NONE,d);this.invalidate(!0)}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{176:176,177:177,185:185,187:187,190:190,196:196,219:219,engine:"engine"}],205:[function(a,b,c){function d(a,b){f.call(this,a,{layout:{gap:6,direction:e.HORIZONTAL},bg:{fillAlpha:0,borderSize:0,radius:0}}),this.button1=new g(a,"sector"),this.button2=new g(a,"planets"),this.button3=new g(a,"starmap"),this.addPanel(e.NONE,this.button1),this.addPanel(e.NONE,this.button2),this.addPanel(e.NONE,this.button3)}var e=(a("xhr"),a("engine"),a(176)),f=(a(177),a(187)),g=a(180);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.disabled=function(){},d.prototype.enabled=function(){},b.exports=d},{176:176,177:177,180:180,187:187,engine:"engine",xhr:"xhr"}],206:[function(a,b,c){function d(a,b){h.call(this,a,"items",i.mixin(b,{padding:[1],content:{padding:[2],layout:{type:"list",gap:[2,2],columns:4}},button:{label:{padding:[2]}}})),this.create()}var e=a("engine"),f=a(176),g=a(187),h=a(203),i=e.Class;d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.create=function(){var a,b=8;for(a=0;b>a;a++)this.addContent(f.NONE,this.createEmptyPane())},d.prototype.createEmptyPane=function(){return new g(this.game,{width:27,height:27,bg:{fillAlpha:.75,color:0,borderSize:0}})},b.exports=d},{176:176,187:187,203:203,engine:"engine"}],207:[function(a,b,c){function d(a,b){g.call(this,a,i.mixin(b,{padding:[0],layout:{type:"list",gap:[2,2],columns:3,rows:2},cell:{bg:{fillAlpha:.2,color:0}},data:{atlas:"texture-atlas"},bg:!1})),this.cache={},this.create()}var e=a("engine"),f=a(176),g=a(187),h=a(181),i=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.reset=function(a){var b,c,d,e,g=a.length,h=this.panels;for(e=0;g>e;e++)b=a[e],d=h[e],c=this.getItem(b),c.enableDrag(),d.removeAll(),d.addPanel(f.NONE,c)},d.prototype.create=function(){var a,b=this.settings.layout,c=b.columns,d=b.rows,e=c*d;for(a=0;e>a;a++)this.addPanel(f.NONE,this.createCell())},d.prototype.getItem=function(a){var b=this.cache,c=a.uuid;return b[c]?b[c]:b[c]=this.createItem(a)},d.prototype.createItem=function(a){return new h(this.game,this.settings.data.atlas,{padding:[1],border:[0],bg:{radius:0},icon:{padding:[3],border:[0],frame:a.sprite,bg:{highlight:!1,color:0,fillAlpha:.5,radius:0,borderSize:0}}})},d.prototype.createCell=function(){return new g(this.game,this.settings.cell)},b.exports=d},{176:176,181:181,187:187,engine:"engine"}],208:[function(a,b,c){function d(a,b){g.call(this,a,{padding:[6],layout:{gap:6},bg:{color:3368601,fillAlpha:.2,borderSize:0,radius:1}}),this.icon1=new h(a,"texture-atlas",{icon:{frame:"icon-x01.png"}}),this.icon1.on("inputUp",this._logout,this),this.addPanel(f.NONE,this.icon1)}var e=a("xhr"),f=(a("engine"),a(176)),g=a(187),h=a(181);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype._logout=function(){var a=this,b={method:"get",uri:"/logout",headers:{"Content-Type":"application/json"}};e(b,function(b,c,d){var e=JSON.parse(d),f=(e.user,b||e.error);f&&a.game.emit("gui/alert","an unknown error has occurred"),a.game.emit("gui/logout")})},b.exports=d},{176:176,181:181,187:187,engine:"engine",xhr:"xhr"}],209:[function(a,b,c){(function(c){function d(a,b){f.call(this,a,{padding:[0],layout:{ax:e.CENTER,ay:e.TOP,direction:e.VERTICAL,gap:0,stretch:!1},bg:{color:3368601,fillAlpha:.2,fillAlpha:0,borderSize:0,radius:0}}),this.infoPane=new f(a,{padding:[0],layout:{type:"border",gap:[5,0]},bg:{fillAlpha:0}}),this.infoPane2=new f(a,{padding:[0],layout:{type:"border",gap:[5,0]},bg:{fillAlpha:0}}),this.fpsText=new g(a,"60 fps",{padding:[0],text:{fontName:"medium",tint:6728447},bg:{fillAlpha:0,borderAlpha:0}}),this.pingText=new g(a,"0 ping",{padding:[0],text:{fontName:"medium",tint:6728447},bg:{fillAlpha:0,borderAlpha:0}}),this.versionText=new g(a,"solar crusaders v0.1.2",{padding:[5],text:{fontName:"medium",tint:6728447},bg:{fillAlpha:0,borderAlpha:0}}),this.registerButton=new h(a,"beta signup"),this.registerButton.on("inputUp",this._register,this),this.forumsButton=new h(a,"forums"),this.forumsButton.on("inputUp",this._forums,this),this.infoPane.addPanel(e.LEFT,this.registerButton),this.infoPane.addPanel(e.RIGHT,this.forumsButton),this.infoPane2.addPanel(e.RIGHT,this.fpsText),this.infoPane2.addPanel(e.LEFT,this.pingText),this.addPanel(e.CENTER,this.infoPane),this.addPanel(e.CENTER,this.versionText),this.addPanel(e.CENTER,this.infoPane2),a.clock.events.loop(500,this._updateInfo,this)}var e=(a("engine"),a(176)),f=a(187),g=a(185),h=(a(184),a(180));d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.validate=function(){return f.prototype.validate.call(this)},d.prototype._register=function(){this.game.emit("gui/registration")},d.prototype._forums=function(){c.document.location.href="http://forums.solarcrusaders.com/"},d.prototype._updateInfo=function(){this.fpsText.text=this.game.clock.fps+" fps",this.pingText.text=this.game.net.rtt+" rtt",this.invalidate(!0)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{176:176,180:180,184:184,185:185,187:187,engine:"engine"}],210:[function(a,b,c){(function(c){function d(a,b){g.call(this,a,"cargo hold",k.mixin(b,{content:{padding:[1]},tab:{padding:[0],bg:{fillAlpha:1,borderSize:0,radius:0},label:{padding:[5,8,6,8],border:[0],text:{fontName:"small"},bg:{highlight:!1,borderSize:0,fillAlpha:0,radius:0}}},info:{width:32,height:32,padding:[0],bg:{fillAlpha:.5,color:0}},item:{padding:[5],layout:{gap:[5,5],columns:5,rows:6},cell:{width:40,height:40}},bg:!1})),this.pageButtons=[],this.pagePanes=[],this.infoPane=new i(a,this.settings.info),this.addContent(f.STRETCH,this.infoPane),this.create()}var e=a("engine"),f=a(176),g=a(203),h=a(207),i=a(187),j=a(180),k=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.reset=function(a){var b,d,e,f=a.items,g=this.settings.item.layout,h=g.columns,i=g.rows,j=h*i,k=c.Math.ceil(f.length/j);for(e=0;k>e;e++)b=f.slice(e,j),d=this.pagePanes[e],d.reset(f)},d.prototype.start=function(){this.button.start()},d.prototype.stop=function(){this.button.stop()},d.prototype.create=function(){var a=this.pagePanes.length+1;pagePane=new h(this.game,this.settings.item),pageButton=new j(this.game,""+a,this.settings.tab),pageButton.disabled=!0,pageButton.stop(),this.pageButtons.push(pageButton),this.pagePanes.push(pagePane),this.addContent(f.NONE,pagePane),this.addTab(f.NONE,pageButton)},d.prototype.page=function(a){},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{176:176,180:180,187:187,203:203,207:207,engine:"engine"}],211:[function(a,b,c){function d(a,b){g.call(this,a,"ship fitting",j.mixin(b,{content:{padding:[1],layout:{ax:f.LEFT,ay:f.TOP,direction:f.HORIZONTAL,gap:1}},bg:!1})),this.hardpointPane=new i(a),this.statPane=new h(a),this.addContent(f.STRETCH,this.hardpointPane),this.addContent(f.STRETCH,this.statPane)}var e=a("engine"),f=a(176),g=a(203),h=(a(187),a(213)),i=a(212),j=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.reset=function(){this.hardpointPane.reset(),this.statPane.reset()},d.prototype.start=function(){this.button.start(),this.hardpointPane.start()},d.prototype.stop=function(){this.button.stop(),this.hardpointPane.stop()},d.prototype.create=function(a){this.hardpointPane.create(a),this.statPane.create(a)},b.exports=d},{176:176,187:187,203:203,212:212,213:213,engine:"engine"}],212:[function(a,b,c){function d(a){g.call(this,a,{padding:[0],bg:{fillAlpha:0},image:{padding:[0,10,0,0],border:[0],bg:{fillAlpha:0}},dpsAreaPane:{padding:[1,2,1,2],layout:{type:"percent",direction:f.HORIZONTAL,gap:0,stretch:!1},bg:{fillAlpha:.25,color:0}},dpsPane:{padding:[10],layout:{ax:f.CENTER,ay:f.CENTER},bg:{fillAlpha:0,borderSize:0,borderColor:3696824,borderAlpha:1}},dpsValueLabel:{padding:[5],border:[0],text:{fontName:"medium"},bg:{color:0,fillAlpha:0,borderSize:0}},dpsUnitsLabel:{padding:[0,5,5,5],border:[0],text:{fontName:"small"},bg:{color:0,fillAlpha:0,borderSize:0}},hardpointPane:{padding:[0],layout:{ax:f.LEFT,ay:f.TOP,direction:f.VERTICAL,gap:1},bg:{fillAlpha:.1,color:0}},enhancementPane:{padding:[1,0],layout:{ax:f.LEFT,ay:f.TOP,direction:f.HORIZONTAL,gap:1},bg:{fillAlpha:.25,color:0}},enhancementDataPane:{width:26,height:26,padding:[0],layout:{type:"percent",direction:f.HORIZONTAL,gap:1,stretch:!1},bg:{fillAlpha:0}},enhancementDataPaneLabel:{padding:[10,5,5,5],text:{fontName:"small"},align:"center",bg:{fillAlpha:.25,borderSize:0,color:3696824}}}),this.buttons=[],this.game.on("gui/fitting/enhancement",this._enhancementSelect,this),this.game.on("gui/fitting/enhancement/reset",this.reset,this)}var e=a("engine"),f=a(176),g=a(187),h=a(184),i=a(185),j=a(181);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.reset=function(){this.costLabel.text="cost --",this.activeLabel.text="active --",this.cooldownLabel.text="cool --",this._enhancementButtonReset(),this._dpsEnhancementSelect()},d.prototype.start=function(){var a,b=this.buttons;for(a in b)b[a].start()},d.prototype.stop=function(){var a,b=this.buttons;for(a in b)b[a].stop()},d.prototype.create=function(a){var b,c,d,i,j=(a.config,a.enhancements),k=j.length;for(this.data=a,this.image=new h(game,a.chasis+"-outline",this.settings.image),this.image.blendMode=e.BlendMode.ADD,this.image.tint=3368601,this.dpsAreaPane=new g(game,this.settings.dpsAreaPane),this.hardpointPane=new g(game,this.settings.hardpointPane),this.enhancementPane=new g(game,this.settings.enhancementPane),this.enhancementDataPane=this.createEnhancementDataPane(),this.dpsPaneCritical=this.createDpsPane("12.1","critical"),this.dpsPaneAverage=this.createDpsPane(""+e.Math.roundTo(a.damage*a.accuracy,3),"average",!0),this.dpsPaneMax=this.createDpsPane(""+a.damage,"max"),this.dpsAreaPane.addPanel(33,this.dpsPaneCritical),this.dpsAreaPane.addPanel(33,this.dpsPaneAverage),this.dpsAreaPane.addPanel(33,this.dpsPaneMax),i=0;k>i;i++)c=j[i],b=a.config.enhancement[c],d=this.createEnhancementButton(c),d.data=b,d.on("inputUp",this._enhancementButtonSelect,this),this.buttons.push(d),this.enhancementPane.addPanel(f.NONE,d);for(i=i;7>i;i++)d=this.createEnhancementButton("slot"),d.disabled=!0,d.tint=11193599,this.enhancementPane.addPanel(f.NONE,d);this.hardpointPane.addPanel(f.STRETCH,this.image),this.hardpointPane.addPanel(f.STRETCH,this.dpsAreaPane),this.addPanel(f.STRETCH,this.hardpointPane),this.addPanel(f.STRETCH,this.enhancementPane),this.addPanel(f.STRETCH,this.enhancementDataPane)},d.prototype.createDpsPane=function(a,b,c){var d=new g(game,this.settings.dpsPane),h=new i(game,a,this.settings.dpsValueLabel),j=new i(game,b,this.settings.dpsUnitsLabel);return c&&h.textView.scale.set(2,2),j.tint=4691911,j.blendMode=e.BlendMode.ADD,d.addPanel(f.CENTER,h),d.addPanel(f.CENTER,j),d},d.prototype.createEnhancementButton=function(a){return new j(game,"texture-atlas",{padding:[0],bg:{fillAlpha:1,color:3696824,radius:0},icon:{padding:[1],border:[0],width:38,height:38,frame:"enhancement-"+a+".png",bg:{highlightAlpha:.25,fillAlpha:0,borderSize:0,radius:0}}})},d.prototype.createEnhancementDataPane=function(){var a=new g(game,this.settings.enhancementDataPane),b=this.costLabel=new i(game,"cost --",this.settings.enhancementDataPaneLabel),c=this.activeLabel=new i(game,"active --",this.settings.enhancementDataPaneLabel);return cooldownLabel=this.cooldownLabel=new i(game,"cool --",this.settings.enhancementDataPaneLabel),a.addPanel(33,b),a.addPanel(33,c),a.addPanel(33,cooldownLabel),a},d.prototype._enhancementSelect=function(a){this.costLabel.text="cost "+a.cost+" gj",this.activeLabel.text="active "+a.active+" sec",this.cooldownLabel.text="cool "+a.cooldown+" sec",this._dpsEnhancementSelect(a),this.enhancementDataPane.invalidate(!0)},d.prototype._dpsEnhancementSelect=function(a){var b=0;data=this.data,dpsPaneCritical=this.dpsPaneCritical.panels[0],dpsPaneAverage=this.dpsPaneAverage.panels[0],dpsPaneMax=this.dpsPaneMax.panels[0],a&&a.stats.damage?(b=a.stats.damage.value,dpsPaneCritical.tint=dpsPaneAverage.tint=dpsPaneMax.tint=65280):dpsPaneCritical.tint=dpsPaneAverage.tint=dpsPaneMax.tint=16777215,dpsPaneCritical.text=12.1+b,dpsPaneAverage.text=""+e.Math.roundTo(data.damage*data.accuracy+b,3),dpsPaneMax.text=""+(data.damage+b),this.dpsAreaPane.invalidate(!0)},d.prototype._enhancementButtonReset=function(){var a,b,c=this.buttons;for(b in c)a=c[b],a.selected=!1},d.prototype._enhancementButtonSelect=function(a){var b=a.data;a.selected?this.game.emit("gui/fitting/enhancement/reset"):(this._enhancementButtonReset(),a.selected=!0,this.game.emit("gui/fitting/enhancement",b))},b.exports=d},{176:176,181:181,184:184,185:185,187:187,engine:"engine"}],213:[function(a,b,c){function d(a){g.call(this,a,{padding:[0],bg:{fillAlpha:0},title:{padding:[3,5],bg:{color:3696824,fillAlpha:.12},layout:{ax:f.LEFT,ay:f.TOP,direction:f.HORIZONTAL,gap:6}},row:{padding:[6,23,6,5],bg:{fillAlpha:.04,color:3696824},layout:{ax:f.LEFT,ay:f.TOP,direction:f.HORIZONTAL,gap:0}},key:{padding:[0],text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0}},value:{padding:[0,50,0,0],text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0},align:"right"}}),this.statPanes={},this.game.on("gui/fitting/enhancement",this._enhancementSelect,this),this.game.on("gui/fitting/enhancement/reset",this.reset,this)}var e=a("engine"),f=a(176),g=a(187),h=a(185),i=a(184),j=a(188);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.reset=function(){var a,b,c,d,e,f=this.data,g=f.config.units,h=f.config.systems,i=this.statPanes;for(e in h){a=h[e],c=a.stats;for(e in c)b=c[e],d=i[b],d&&(label=d.panels[1],label.text=this._calculateStatValue(f[b],g[b],0)+" "+g[b],label.tint=12303291,d.invalidate(!0))}},d.prototype.create=function(a){var b,c,d,e,g,h,i=a.config.systems,j=a.config.units;this.data=a;for(h in i){b=i[h],d=b.stats,this.createSystemTitleRow(b.name);for(h in d)c=d[h],e=this._calculateStatValue(a[c],j[c],0),g=this.createKeyValueRow(c,e+" "+j[c]),this.statPanes[c]=g,this.addPanel(f.STRETCH,g)}},d.prototype.createSystemTitleRow=function(a){var b=new g(this.game,this.settings.title),c=new h(this.game,a,this.settings.key),d=new i(this.game,"texture-atlas",{padding:[0],border:[0],width:12,height:12,frame:"system-"+a+".png",bg:{fillAlpha:0}});b.layout.stretchLast=!0,b.addPanel(f.CENTER,d),b.addPanel(f.CENTER,c),this.addPanel(f.STRETCH,b)},d.prototype.createKeyValueRow=function(a,b){var c=new j(this.game,this.settings.row),d=new h(this.game,a,this.settings.key),g=new h(this.game,b,this.settings.value);return d.tint=4691911,d.blendMode=e.BlendMode.ADD,g.tint=12303291,g.blendMode=e.BlendMode.ADD,c.layout.stretchLast=!0,c.addPanel(f.NONE,d),c.addPanel(f.NONE,g),c},d.prototype._enhancementSelect=function(a){var b,c,d,e=a.stats,f=this.statPanes,g=this.data,h=g.config;this.reset();for(d in e)b=e[d],f[d]&&(c=f[d].panels[1],c.text=this._calculateStatValue(g[d],h.units[d],b.value)+" "+h.units[d],c.tint=65280,f[d].alert(),f[d].invalidate(!0))},d.prototype._calculateStatValue=function(a,b,c){return e.Math.roundTo((a+c)*("%"===b?100:1),3)},b.exports=d},{176:176,184:184,185:185,187:187,188:188,engine:"engine"}],214:[function(a,b,c){function d(a,b){i.call(this,a,k.mixin(b,{bg:{blendMode:e.BlendMode.ADD},layout:{direction:f.HORIZONTAL},cargoPane:{padding:[1,4,1,0]},fittingPane:{padding:[1,4]},close:{padding:[0,2],border:[0],icon:{padding:[0],border:[0],frame:"icon-close.png",bg:{highlight:!1,borderSize:0,fillAlpha:0,radius:0}},bg:{fillAlpha:1,borderSize:0,radius:0}}})),this.closeButton=new j(a,"texture-atlas",this.settings.close),this.closeButton.on("inputUp",this.close,this),this.cargoPane=new g(a,this.settings.cargoPane),this.fittingPane=new h(a,this.settings.fittingPane),this.fittingPane.title.addPanel(f.RIGHT,this.closeButton),this.addPanel(f.STRETCH,this.cargoPane),this.addPanel(f.STRETCH,this.fittingPane),this.swap(this.cargoPane,this.fittingPane),this.game.on("ship/fitting",this.open,this)}var e=a("engine"),f=a(176),g=(a(203),a(210)),h=a(211),i=a(187),j=a(181),k=e.Class;d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.open=function(a){void 0===this.data&&(this.data=a,this.fittingPane.create(a),this.bg.inputEnabled=!0,this.bg.input.priorityID=2),this.fittingPane.reset(a),this.closeButton.start(),this.cargoPane.start(),this.fittingPane.start(),this.invalidate(!0),this.game.emit("gui/modal",!0,this)},d.prototype.close=function(){this.bg.inputEnabled=!1,this.closeButton.stop(),this.cargoPane.stop(),this.fittingPane.stop(),this.game.emit("gui/modal",!1)},b.exports=d},{176:176,181:181,187:187,203:203,210:210,211:211,engine:"engine"}],215:[function(a,b,c){function d(a,b){g.call(this,a,"",k.mixin(b,{tab:{padding:[2],icon:{padding:[0],border:[0],frame:"icon-edit.png",bg:{highlight:!1,borderSize:0,fillAlpha:0,radius:0}},bg:{fillAlpha:.5,borderSize:0,radius:0}}})),this.socket=a.net.socket,this.shipNetManager=a.shipNetManager,this.current=null,this.isPlayer=b.player,this.panes={},this.blank={label:"none selected",ship:null,data:{},tilemap:new i(a),system:new h(a)},this.button.on("inputUp",this._follow,this),this.isPlayer&&(this.editButton=new j(a,"texture-atlas",this.settings.tab),this.editButton.on("inputUp",this._fitting,this),this.editButton.alert(),this.addTab(f.NONE,this.editButton)),this.game.on("ships/selected",this._selected,this),this.game.on("ship/target",this._target,this),this.game.on("ship/targeted",this._targeted,this),this.game.on("ship/attack",this._attack,this),this.game.on("ship/destroyed",this._destroyed,this),this.set(this.blank)}var e=a("engine"),f=a(176),g=a(203),h=a(217),i=a(192),j=a(181),k=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.set=function(a){this.current&&this.reset(),this.label.text=a.label,this.current=a,this.current.tilemap.start(),this.current.tilemap.on("targeted",this._roomTargeted,this),this.current.ship&&this._setTargets(this.current.ship.targeted),this.addContent(f.NONE,a.tilemap),this.title.addPanel(f.RIGHT,a.system),this.invalidate(!0)},d.prototype.reset=function(){this.removeContent(this.current.tilemap),this.title.removePanel(this.current.system),this.current.tilemap.stop(),this.current.tilemap.removeListener("roomDown",this._roomDown)},d.prototype._data=function(a){var b,c,d=a.systems,e=this.system.buttons;this.data;if(void 0!==d)for(c in d)b=d[c],b.health<30?e[c].tint=16711680:b.health<90?e[c].tint=16776960:e[c].tint=65280},d.prototype._follow=function(){this.current.ship&&this.game.emit("ship/follow",this.current.ship)},d.prototype._fitting=function(){this.current.ship&&this.game.emit("ship/fitting",this.current.data)},d.prototype._target=function(a){this.isPlayer&&this.current!==this.blank&&this.socket.emit("ship/target",{origin:this.current.data.uuid,target:a.target,room:a.room,id:a.id})},d.prototype._setTargets=function(a){var b,c,d;for(d in a)b=a[d],c=this.shipNetManager.getBattleByOriginUuid(b.uuid),c&&this._updateTarget(c,!0)},d.prototype._targeted=function(a){var b=this.shipNetManager.getBattleByOriginUuid(a.origin);b&&this._updateTarget(b,!1),this._updateTarget(a,!0)},d.prototype._attack=function(a){var b=this.shipNetManager.getBattleByOriginUuid(a.origin);void 0!==b&&this._updateTarget(a,!0)},d.prototype._updateTarget=function(a,b){var c=this.panes[a.target];c&&c.tilemap&&(c.tilemap.target(a.id,b),c===this.current&&"hit"===a.type&&c.tilemap.alert())},d.prototype._destroyed=function(a){var b=this.shipNetManager.getBattleByOriginUuid(a.uuid);b&&this._updateTarget(b,!1),this.current&&a.uuid===this.current.data.uuid&&this.set(this.blank)},d.prototype._roomTargeted=function(a){this.isPlayer||this.game.emit("ship/target",{target:this.current.data.uuid,room:a.system,id:a.id})},d.prototype._roomSelected=function(a){},d.prototype._selected=function(a){var b,c,d,e,f=0;for(e in a)b=a[e],d=this.shipNetManager.getShipDataByUuid(b.uuid),this._filter(b)&&(this.panes[b.uuid]?c=this.panes[b.uuid]:(c=this.panes[b.uuid]={label:b.name,ship:b,data:d,tilemap:new i(this.game,b.name,{player:this.isPlayer}),system:new h(this.game,{systems:d.systems})},d.on("data",this._data,c)),b.destroyed||(0===f&&(this.set(c),this.isPlayer&&this.game.emit("gui/player/select",d)),f++));0===f&&this.set(this.blank)},d.prototype._filter=function(a){return this.isPlayer&&a.isPlayer||!this.isPlayer&&!a.isPlayer},b.exports=d},{176:176,181:181,192:192,203:203,217:217,engine:"engine"}],216:[function(a,b,c){function d(a,b){h.call(this,a,"sys",i.mixin(b,{padding:[1],content:{padding:[2],layout:{type:"list",gap:[2,2],columns:1}},button:{label:{padding:[2]}}})),this.create()}var e=a("engine"),f=a(176),g=a(187),h=a(203),i=e.Class;d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.create=function(){var a,b=2;for(a=0;b>a;a++)this.addContent(f.NONE,this.createEmptyPane())},d.prototype.createEmptyPane=function(){return new g(this.game,{width:27,height:27,bg:{fillAlpha:.75,color:0,borderSize:0}})},b.exports=d},{176:176,187:187,203:203,engine:"engine"}],217:[function(a,b,c){function d(a,b){g.call(this,a,i.mixin(b,{padding:[0,0,0,1],layout:{gap:0,direction:f.HORIZONTAL},bg:{fillAlpha:0,borderSize:0,radius:0}})),this.buttons={},this.sort=["pilot","engine","targeting","shield","teleport","reactor"],this.init()}var e=(a("xhr"),a("engine")),f=a(176),g=(a(177),a(187)),h=a(181),i=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.init=function(){var a,b,c,d=this.sort,e=this.settings,g=e.systems;if(g)for(c in d)b=g[d[c]],b&&(a=this.create(d[c]),a.image.tint=65280,this.buttons[d[c]]=a,this.addPanel(f.NONE,a))},d.prototype.create=function(a){return new h(game,"texture-atlas",{padding:[1,2,0,2],bg:{fillAlpha:0,borderSize:0,radius:0},icon:{padding:[0,0,0,0],border:[0],frame:"system-"+a+".png",bg:{highlight:!1,fillAlpha:0,borderSize:0,radius:0}}})},b.exports=d},{176:176,177:177,181:181,187:187,engine:"engine",xhr:"xhr"}],218:[function(a,b,c){(function(c){function d(a,b){f.call(this,a,new j(0,0)),this.data={},this.settings=l.mixin(b,{padding:[0,1,1,1],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:0},content:{padding:[1],bg:{color:0},layout:{direction:g.VERTICAL,gap:1}},healthBar:{width:213,height:7,padding:[0],label:{color:3368601,padding:[1],text:{fontName:"small"}},bg:{fillAlpha:.25,color:65280},progress:{color:65280}},energyBar:{width:213,height:7,padding:[0],label:{color:3368601,padding:[1],text:{fontName:"small"}},bg:{color:16755200,fillAlpha:.25},progress:{color:16755200}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new k(a,this.settings.bg),this.content=new h(a,this.settings.content),this.healthBar=new i(a,this.settings.healthBar),this.healthBar.setProgressBar(1),this.energyBar=new i(a,this.settings.energyBar),this.energyBar.setProgressBar(1),this.addContent(g.NONE,this.healthBar),this.addContent(g.NONE,this.energyBar),this.addView(this.bg),this.addPanel(g.CENTER,this.content),this.game.on("gui/player/select",this._playerSelect,this)}var e=a("engine"),f=a(177),g=a(176),h=a(187),i=(a(185),a(189)),j=a(196),k=a(219),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.addContent=function(a,b){this.content.addPanel(a,b)},d.prototype._playerSelect=function(a){var b=a.config.ship.stats;this.data&&(this.data=a,this.data.on("data",this._updateVitals,this),this.healthBar.setMinMax(0,b.health),this.energyBar.setMinMax(0,b.energy),this._updateVitals(a))},d.prototype._updateVitals=function(a){var b=c.Math,d=this.data.config.ship.stats,e=this.healthBar,f=this.energyBar;a.health&&e.setProgressBar(b.min(1,a.health/d.health)),a.energy&&f.setProgressBar(b.min(1,a.energy/d.energy))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{176:176,177:177,185:185,187:187,189:189,196:196,219:219,engine:"engine"}],219:[function(a,b,c){function d(a,b){g.call(this,a),f.call(this),this.settings=h.mixin(b,{color:3355443,fillAlpha:1,blendMode:e.BlendMode.NORMAL,radius:0,borderSize:1,borderColor:0,borderAlpha:1}),this.fillAlpha=this.settings.fillAlpha,this.blendMode=this.settings.blendMode}var e=a("engine"),f=a(178),g=e.Graphics,h=e.Class;d.prototype=Object.create(g.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,d.prototype.paint=function(a,b,c,d){var e=this.settings.size?this.settings.size:this.parent.size,f=this.settings.offset?this.settings.offset:{x:0,y:0},g=this.settings,h=g.radius>0?"drawRoundedRect":"drawRect";(g.highlight||g.fillAlpha>0||g.borderSize>0&&g.borderAlpha>0)&&this.clear(),g.highlight&&(this.lineStyle(0),this.beginFill(g.highlight,g.highlightAlpha?g.highlightAlpha:1),this[h](f.x,f.y,e.width,e.height/2,g.radius),this.endFill()),g.borderSize>0&&g.borderAlpha>0&&this.lineStyle(g.borderSize,g.borderColor,g.borderAlpha),g.fillAlpha>0&&this.beginFill(g.color,g.fillAlpha),(g.fillAlpha>0||g.borderSize>0&&g.borderAlpha>0)&&this[h](f.x,f.y,e.width,e.height,g.radius),g.fillAlpha>0&&this.endFill()},b.exports=d},{178:178,engine:"engine"}],220:[function(a,b,c){function d(a,b,c){g.call(this,a,b,c),f.call(this)}var e=a("engine"),f=a(178),g=e.Sprite;d.prototype=Object.create(g.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,b.exports=d},{178:178,engine:"engine"}],221:[function(a,b,c){function d(a){f.call(this,a),g.call(this),this.sprite=this,this.world=a.world,this.camera=a.camera,this.enabled=!1,this.isDragged=!1,this.objectRenderer="wireframe",this.priorityID=1,this.blendMode=e.BlendMode.ADD,this._dragStartPoint=new e.Point,this._dragPoint=new e.Point,this._tempStartPoint=new e.Point,this._tempPoint=new e.Point,this._tempVector=new e.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,isDragged:!1})}var e=a("engine"),f=e.Graphics,g=a(178);d.prototype=Object.create(f.prototype),d.prototype.mixinPrototype(g.prototype),d.prototype.constructor=d,d.prototype.start=function(){if(this.enabled===!1){this.enabled=!0,this.game.input.interactiveItems.add(this);for(var a=0;1>a;a++)this._pointerData[a]={id:a,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,isDragged:!1}}},d.prototype.reset=function(){this.enabled=!1;for(var a=0;1>a;a++)this._pointerData[a]={id:a,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,isDragged:!1}},d.prototype.stop=function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},d.prototype.validForInput=function(a,b){return!this.enabled||this.priorityID<this.game.input.minPriorityID?!1:this.priorityID>a||this.priorityID===a?!0:!1},d.prototype.checkPointerDown=function(a,b){return a.isDown&&this.enabled?!0:!1},d.prototype.checkPointerOver=function(a,b){return this.enabled?!0:!1},d.prototype.update=function(a){if(a){if(!this.enabled)return this._pointerOutHandler(a),!1;if(this._draggedPointerID===a.id)return this._updateDrag(a)}else this.isDragged&&(this._updateVector(),this._drawDrag())},d.prototype._pointerOverHandler=function(a){var b=this._pointerData[a.id];(b.isOver===!1||a.dirty)&&(b.isOver=!0,b.isOut=!1,b.x=a.x,b.y=a.y)},d.prototype._pointerOutHandler=function(a){var b=this._pointerData[a.id];b.isOver=!1,b.isOut=!0},d.prototype._touchedHandler=function(a){var b=this._pointerData[a.id];b.isDown||(b.isDown=!0,b.isUp=!1,a.dirty=!0,this.isDragged===!1&&a.button===e.Mouse.LEFT_BUTTON?this._startDrag(a):a.button===e.Mouse.RIGHT_BUTTON&&this._selected(a))},d.prototype._releasedHandler=function(a){var b=this._pointerData[a.id];b.isDown&&a.isUp&&(b.isDown=!1,b.isUp=!0,a.dirty=!0,this.isDragged&&this._draggedPointerID===a.id&&this._stopDrag(a))},d.prototype._startDrag=function(a){var b=a.x,c=a.y,d=this.camera.position;this.isDragged=!0,this._draggedPointerID=a.id,this._pointerData[a.id].isDragged=!0,this._dragPoint.setTo(0,0),this._dragStartPoint.set(b,c),this._tempStartPoint.copyFrom(d),this._tempPoint.copyFrom(d),this._tempVector.setTo(0,0),
this._updateDrag(a)},d.prototype._updateDrag=function(a){if(a.isUp)return this._stopDrag(a),!1;this._updateVector();var b=a.x-this._dragStartPoint.x,c=a.y-this._dragStartPoint.y;this._dragPoint.setTo(b,c),this._drawDrag()},d.prototype._updateVector=function(){this._tempPoint.copyFrom(this.camera.position),this._tempVector=e.Point.subtract(this._tempPoint,this._tempStartPoint,this._tempVector),this._tempVector.multiply(this.world.scale.x,this.world.scale.y)},d.prototype._drawDrag=function(){var a=this._dragStartPoint.x-this._tempVector.x,b=this._dragStartPoint.y-this._tempVector.y,c=this._dragPoint.x+this._tempVector.x,d=this._dragPoint.y+this._tempVector.y;this.clear(),this.lineStyle(2,3368601,.75),this.drawRect(a,b,c,d)},d.prototype._stopDrag=function(a){var b=this._dragStartPoint.x-this._tempVector.x,c=this._dragStartPoint.y-this._tempVector.y,d=a.x,f=a.y,g=e.Rectangle.aabb([{x:b,y:c},{x:d,y:f}]);this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[a.id].isDragged=!1,0===g.volume&&(g.resize(2,2),g.centerOn(a.x,a.y)),this._selected(a,g),this.clear()},d.prototype._selected=function(a,b){this.emit("selected",a,b||new e.Rectangle(a.x-1,a.y-1,2,2))},b.exports=d},{178:178,engine:"engine"}],222:[function(a,b,c){function d(a,b,c){g.call(this,a),f.call(this),this.defaultFont=c&&c.fontName?c.fontName:"vt323",this.fonts={vt323:{fontName:"vt323",characterWidth:8,characterHeight:10,xSpacing:2,ySpacing:0,xOffset:1,yOffset:1,tint:16777215},medium:{fontName:"medium",characterWidth:8,characterHeight:7,xSpacing:0,ySpacing:0,xOffset:0,yOffset:0,tint:16777215},small:{fontName:"small",characterWidth:5,characterHeight:5,xSpacing:0,ySpacing:0,xOffset:0,yOffset:0,tint:16777215}},this.settings=h.mixin(c,this.fonts[this.defaultFont]),this.fontTexture=new e.RetroFont(a,this.settings.fontName,this.settings),this.fontTexture.multiLine=!0,this.fontTexture.text=b,this.fontTexture.customSpacingX=this.settings.characterSpacing||0,this.fontTexture.customSpacingY=this.settings.lineSpacing||0,this.tint=this.settings.tint,this.texture=this.fontTexture}var e=a("engine"),f=a(178),g=e.Sprite,h=e.Class;d.prototype=Object.create(e.Sprite.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,b.exports=d},{178:178,engine:"engine"}],223:[function(a,b,c){function d(a,b,c,d,e){g.call(this,a,b,c,d,e),f.call(this)}var e=a("engine"),f=a(178),g=e.TilemapSprite;d.prototype=Object.create(g.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,b.exports=d},{178:178,engine:"engine"}],224:[function(a,b,c){(function(a){function c(){}c.getQueryParameter=function(a,b){var d=c.getQueryParameters();return d[a]?"false"===d[a]?!1:"true"===d[a]?!0:d[a]:b},c.getQueryParameters=function(){var b=a.location.search.substring(1).replace(/\+/g," "),c=function(a){var b,c,d,e=a.replace(/;/g,"&").split("&");for(a={},b=0;b<e.length;b++)d=e[b].split("=",2),c=unescape(d[0]),d.length>1?a[c]=unescape(d[1]):a[c]=!0;return a};return c(b)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],225:[function(a,b,c){var d={VERSION:"3.0.10-dev",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};b.exports=d},{}],226:[function(a,b,c){function d(){g.call(this),this.children=[]}var e=a(236),f=a(280),g=a(227),h=a(274),i=new e.Matrix;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}}}),d.prototype.onChildrenChange=function(){},d.prototype.addChild=function(a){var b,c=arguments.length;if(c>1)for(b=0;c>b;b++)this.addChild(arguments[b]);else a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},d.prototype.addChildAt=function(a,b){if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.onChildrenChange(b),a.emit("added",this),a;throw Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},d.prototype.swapChildren=function(a,b){var c,d;if(a!==b){if(c=this.getChildIndex(a),d=this.getChildIndex(b),0>c||0>d)throw Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[c]=b,this.children[d]=a,this.onChildrenChange(d>c?c:d)}},d.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw Error("The supplied DisplayObject must be a child of the caller");return b},d.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw Error("The supplied index is out of bounds");var c=this.getChildIndex(a);f.removeItems(this.children,c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},d.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[a]},d.prototype.removeChild=function(a){var b,c,d=arguments.length;if(d>1)for(b=0;d>b;b++)this.removeChild(arguments[b]);else{if(c=this.children.indexOf(a),-1===c)return;a.parent=null,f.removeItems(this.children,c,1),this.onChildrenChange(c),a.emit("removed",this)}return a},d.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,f.removeItems(this.children,a,1),this.onChildrenChange(a),b.emit("removed",this),b},d.prototype.removeChildren=function(a,b){var c,d,e=a||0,f="number"==typeof b?b:this.children.length,g=f-e;if(g>0&&f>=g){for(c=this.children.splice(e,g),d=0;d<c.length;++d)c[d].parent=null;for(this.onChildrenChange(a),d=0;d<c.length;++d)c[d].emit("removed",this);return c}if(0===g&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},d.prototype.generateTexture=function(a,b,c){var d=this.getLocalBounds(),e=new h(a,0|d.width,0|d.height,c,b);return i.tx=-d.x,i.ty=-d.y,e.render(this,i),e},d.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var a=0,b=this.children.length;b>a;++a)this.children[a].updateTransform()}},d.prototype.containerUpdateTransform=d.prototype.updateTransform,d.prototype.getBounds=function(){var a,b,c,d,f,g,h,i,j,k,l,m;if(!this._currentBounds){if(0===this.children.length)return e.Rectangle.EMPTY;for(a=1/0,b=1/0,c=-(1/0),d=-(1/0),i=!1,j=0,k=this.children.length;k>j;++j)l=this.children[j],l.visible&&(i=!0,f=this.children[j].getBounds(),a=a<f.x?a:f.x,b=b<f.y?b:f.y,g=f.width+f.x,h=f.height+f.y,c=c>g?c:g,d=d>h?d:h);if(!i)return e.Rectangle.EMPTY;m=this._bounds,m.x=a,m.y=b,m.width=c-a,m.height=d-b,this._currentBounds=m}return this._currentBounds},d.prototype.containerGetBounds=d.prototype.getBounds,d.prototype.getLocalBounds=function(){var a,b,c=this.worldTransform;for(this.worldTransform=e.Matrix.IDENTITY,a=0,b=this.children.length;b>a;++a)this.children[a].updateTransform();return this.worldTransform=c,this._currentBounds=null,this.getBounds(e.Matrix.IDENTITY)},d.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var b,c;if(this._mask||this._filters){for(a.currentRenderer.flush(),this._filters&&this._filters.length&&a.filterManager.pushFilter(this,this._filters),this._mask&&a.maskManager.pushMask(this,this._mask),a.currentRenderer.start(),this._renderWebGL(a),b=0,c=this.children.length;c>b;b++)this.children[b].renderWebGL(a);a.currentRenderer.flush(),this._mask&&a.maskManager.popMask(this,this._mask),this._filters&&a.filterManager.popFilter(),a.currentRenderer.start()}else for(this._renderWebGL(a),b=0,c=this.children.length;c>b;++b)this.children[b].renderWebGL(a)}},d.prototype._renderWebGL=function(a){},d.prototype._renderCanvas=function(a){},d.prototype.renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask,a),this._renderCanvas(a);for(var b=0,c=this.children.length;c>b;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},d.prototype.destroy=function(a){if(g.prototype.destroy.call(this),a)for(var b=0,c=this.children.length;c>b;++b)this.children[b].destroy(a);this.removeChildren(),this.children=null}},{227:227,236:236,274:274,280:280}],227:[function(a,b,c){function d(){g.call(this),this.position=new e.Point,this.scale=new e.Point(1,1),this.pivot=new e.Point(0,0),this.skew=new e.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new e.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new e.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var e=a(236),f=a(274),g=a(3),h=a(225),i=new e.Matrix,j={worldTransform:new e.Matrix,worldAlpha:1,children:[]};d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},worldVisible:{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},mask:{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}}),d.prototype.updateTransform=function(){var a,b,c,d,e,f,g=this.parent.worldTransform,j=this.worldTransform;this.skew.x||this.skew.y?(i.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),j.a=i.a*g.a+i.b*g.c,j.b=i.a*g.b+i.b*g.d,j.c=i.c*g.a+i.d*g.c,j.d=i.c*g.b+i.d*g.d,j.tx=i.tx*g.a+i.ty*g.c+g.tx,j.ty=i.tx*g.b+i.ty*g.d+g.ty):this.rotation%h.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),a=this._cr*this.scale.x,b=this._sr*this.scale.x,c=-this._sr*this.scale.y,d=this._cr*this.scale.y,e=this.position.x,f=this.position.y,(this.pivot.x||this.pivot.y)&&(e-=this.pivot.x*a+this.pivot.y*c,f-=this.pivot.x*b+this.pivot.y*d),j.a=a*g.a+b*g.c,j.b=a*g.b+b*g.d,j.c=c*g.a+d*g.c,j.d=c*g.b+d*g.d,j.tx=e*g.a+f*g.c+g.tx,j.ty=e*g.b+f*g.d+g.ty):(a=this.scale.x,d=this.scale.y,e=this.position.x-this.pivot.x*a,f=this.position.y-this.pivot.y*d,j.a=a*g.a,j.b=a*g.b,j.c=d*g.c,j.d=d*g.d,j.tx=e*g.a+f*g.c+g.tx,j.ty=e*g.b+f*g.d+g.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform,d.prototype.getBounds=function(a){return e.Rectangle.EMPTY},d.prototype.getLocalBounds=function(){return this.getBounds(e.Matrix.IDENTITY)},d.prototype.toGlobal=function(a){return this.parent?this.displayObjectUpdateTransform():(this.parent=j,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(a)},d.prototype.toLocal=function(a,b,c){return b&&(a=b.toGlobal(a)),this.parent?this.displayObjectUpdateTransform():(this.parent=j,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(a,c)},d.prototype.renderWebGL=function(a){},d.prototype.renderCanvas=function(a){},d.prototype.generateTexture=function(a,b,c){var d=this.getLocalBounds(),e=new f(a,0|d.width,0|d.height,b,c);return i.tx=-d.x,i.ty=-d.y,e.render(this,i),e},d.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");return a.addChild(this),a},d.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){return this.position.x=a||0,this.position.y=b||0,this.scale.x=c?c:1,this.scale.y=d?d:1,this.rotation=e||0,this.skew.x=f||0,this.skew.y=g||0,this.pivot.x=h||0,this.pivot.y=i||0,this},d.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{225:225,236:236,274:274,3:3}],228:[function(a,b,c){function d(){e.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=k.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new j.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var e=a(226),f=a(275),g=a(248),h=a(249),i=a(229),j=a(236),k=a(225),l=new j.Point;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){var a,b=new d;for(b.renderable=this.renderable,b.fillAlpha=this.fillAlpha,b.lineWidth=this.lineWidth,b.lineColor=this.lineColor,b.tint=this.tint,b.blendMode=this.blendMode,b.isMask=this.isMask,b.boundsPadding=this.boundsPadding,b.dirty=!0,b.glDirty=!0,b.cachedSpriteDirty=this.cachedSpriteDirty,a=0;a<this.graphicsData.length;++a)b.graphicsData.push(this.graphicsData[a].clone());return b.currentPath=b.graphicsData[b.graphicsData.length-1],b.updateLocalBounds(),b},d.prototype.lineStyle=function(a,b,c){if(this.lineWidth=a||0,this.lineColor=b||0,this.lineAlpha=void 0===c?1:c,this.currentPath)if(this.currentPath.shape.points.length){var d=new j.Polygon(this.currentPath.shape.points.slice(-2));d.closed=!1,this.drawShape(d)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},d.prototype.moveTo=function(a,b){var c=new j.Polygon([a,b]);return c.closed=!1,this.drawShape(c),this},d.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty=!0,this},d.prototype.quadraticCurveTo=function(a,b,c,d){var e,f,g,h,i,j,k,l;for(this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0),g=20,h=this.currentPath.shape.points,0===h.length&&this.moveTo(0,0),i=h[h.length-2],j=h[h.length-1],k=0,l=1;g>=l;++l)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty=this.boundsDirty=!0,this},d.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;for(this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0),g=20,m=this.currentPath.shape.points,n=m[m.length-2],o=m[m.length-1],p=0,q=1;g>=q;++q)p=q/g,h=1-p,i=h*h,j=i*h,k=p*p,l=k*p,m.push(j*n+3*i*p*a+3*h*k*c+l*e,j*o+3*i*p*b+3*h*k*d+l*f);return this.dirty=this.boundsDirty=!0,this},d.prototype.arcTo=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b),f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k),1e-8>m||0===e?(f[f.length-2]!==a||f[f.length-1]!==b)&&f.push(a,b):(n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u),this.arc(u+a,v+b,e,A,B,j*k>l*i)),this.dirty=this.boundsDirty=!0,this},d.prototype.arc=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(f=f||!1,d===e)return this;if(!f&&d>=e?e+=2*Math.PI:f&&e>=d&&(d+=2*Math.PI),g=f?-1*(d-e):e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI)),0===g)return this;for(i=a+Math.cos(d)*c,j=b+Math.sin(d)*c,this.currentPath?this.currentPath.shape.points.push(i,j):this.moveTo(i,j),k=this.currentPath.shape.points,l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;p>=r;r++)s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t),k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b);return this.dirty=this.boundsDirty=!0,this},d.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},d.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},d.prototype.drawRect=function(a,b,c,d){return this.drawShape(new j.Rectangle(a,b,c,d)),this},d.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new j.RoundedRectangle(a,b,c,d,e)),this},d.prototype.drawCircle=function(a,b,c){return this.drawShape(new j.Circle(a,b,c)),this},d.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new j.Ellipse(a,b,c,d)),this},d.prototype.drawPolygon=function(a){var b,c,d=a,e=!0;if(d instanceof j.Polygon&&(e=d.closed,d=d.points),!Array.isArray(d))for(d=Array(arguments.length),b=0;b<d.length;++b)d[b]=arguments[b];return c=new j.Polygon(d),c.closed=e,this.drawShape(c),this},d.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},d.prototype.generateTexture=function(a,b,c){var d,e,i;return b=b||1,d=this.getLocalBounds(),e=new g(d.width*b,d.height*b),i=f.fromCanvas(e.canvas,c),i.baseTexture.resolution=b,e.context.scale(b,b),e.context.translate(-d.x,-d.y),h.renderGraphics(this,e.context),i},d.prototype._renderWebGL=function(a){this.glDirty&&(this.dirty=!0,this.glDirty=!1),a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this)},d.prototype._renderCanvas=function(a){var b,c,d,e;this.isMask!==!0&&(this._prevTint!==this.tint&&(this.dirty=!0),b=a.context,c=this.worldTransform,d=a.blendModes[this.blendMode],d!==b.globalCompositeOperation&&(b.globalCompositeOperation=d),e=a.resolution,b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e,c.ty*e),h.renderGraphics(this,b))},d.prototype.getBounds=function(a){var b,c,d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(!this._currentBounds){if(!this.renderable)return j.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1),b=this._localBounds,c=b.x,d=b.width+b.x,e=b.y,f=b.height+b.y,g=a||this.worldTransform,h=g.a,i=g.b,k=g.c,l=g.d,m=g.tx,n=g.ty,o=h*d+k*f+m,p=l*f+i*d+n,q=h*c+k*f+m,r=l*f+i*c+n,s=h*c+k*e+m,t=l*e+i*c+n,u=h*d+k*e+m,v=l*e+i*d+n,w=o,x=p,y=o,z=p,y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,z=z>r?r:z,z=z>t?t:z,z=z>v?v:z,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w,x=r>x?r:x,x=t>x?t:x,x=v>x?v:x,this._bounds.x=y,this._bounds.width=w-y,this._bounds.y=z,this._bounds.height=x-z,this._currentBounds=this._bounds}return this._currentBounds},d.prototype.containsPoint=function(a){var b,c,d;for(this.worldTransform.applyInverse(a,l),b=this.graphicsData,c=0;c<b.length;c++)if(d=b[c],d.fill&&d.shape&&d.shape.contains(l.x,l.y))return!0;return!1},d.prototype.updateLocalBounds=function(){var a,b,c,d,e,f,g,h,i,j,l,m,n=1/0,o=-(1/0),p=1/0,q=-(1/0);if(this.graphicsData.length)for(g=0;g<this.graphicsData.length;g++)if(h=this.graphicsData[g],i=h.type,j=h.lineWidth,a=h.shape,i===k.SHAPES.RECT||i===k.SHAPES.RREC)c=a.x-j/2,d=a.y-j/2,e=a.width+j,f=a.height+j,n=n>c?c:n,o=c+e>o?c+e:o,p=p>d?d:p,q=d+f>q?d+f:q;else if(i===k.SHAPES.CIRC)c=a.x,d=a.y,e=a.radius+j/2,f=a.radius+j/2,n=n>c-e?c-e:n,o=c+e>o?c+e:o,p=p>d-f?d-f:p,q=d+f>q?d+f:q;else if(i===k.SHAPES.ELIP)c=a.x,d=a.y,e=a.width+j/2,f=a.height+j/2,n=n>c-e?c-e:n,o=c+e>o?c+e:o,p=p>d-f?d-f:p,q=d+f>q?d+f:q;else for(b=a.points,l=0;l<b.length;l+=2)c=b[l],d=b[l+1],n=n>c-j?c-j:n,o=c+j>o?c+j:o,p=p>d-j?d-j:p,q=d+j>q?d+j:q;else n=0,o=0,p=0,q=0;m=this.boundsPadding,this._localBounds.x=n-m,this._localBounds.width=o-n+2*m,this._localBounds.y=p-m,this._localBounds.height=q-p+2*m},d.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===k.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty=this.boundsDirty=!0,b},d.prototype.destroy=function(){var a,b,c;for(e.prototype.destroy.apply(this,arguments),a=0;a<this.graphicsData.length;++a)this.graphicsData[a].destroy();for(b in this._webgl)for(c=0;c<this._webgl[b].data.length;++c)this._webgl[b].data[c].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{225:225,226:226,229:229,236:236,248:248,249:249,275:275}],229:[function(a,b,c){function d(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.shape=g,this.type=g.type}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},d.prototype.destroy=function(){this.shape=null}},{}],230:[function(a,b,c){function d(a){h.call(this,a),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var e=a(280),f=a(236),g=a(225),h=a(266),i=a(252),j=a(231),k=a(2);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,i.registerPlugin("graphics",d),d.prototype.onContextChange=function(){},d.prototype.destroy=function(){h.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},d.prototype.render=function(a){var b,c,d,f,g=this.renderer,h=g.gl,i=g.shaderManager.plugins.primitiveShader;for((a.dirty||!a._webGL[h.id])&&this.updateGraphics(a),c=a._webGL[h.id],g.blendModeManager.setBlendMode(a.blendMode),d=0,f=c.data.length;f>d;d++)b=c.data[d],1===c.data[d].mode?(g.stencilManager.pushStencil(a,b),h.uniform1f(g.shaderManager.complexPrimitiveShader.uniforms.alpha._location,a.worldAlpha*b.alpha),h.drawElements(h.TRIANGLE_FAN,4,h.UNSIGNED_SHORT,2*(b.indices.length-4)),g.stencilManager.popStencil(a,b)):(i=g.shaderManager.primitiveShader,g.shaderManager.setShader(i),h.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),h.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,g.currentRenderTarget.projectionMatrix.toArray(!0)),h.uniform3fv(i.uniforms.tint._location,e.hex2rgb(a.tint)),h.uniform1f(i.uniforms.alpha._location,a.worldAlpha),h.bindBuffer(h.ARRAY_BUFFER,b.buffer),h.vertexAttribPointer(i.attributes.aVertexPosition,2,h.FLOAT,!1,24,0),h.vertexAttribPointer(i.attributes.aColor,4,h.FLOAT,!1,24,8),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,b.indexBuffer),h.drawElements(h.TRIANGLE_STRIP,b.indices.length,h.UNSIGNED_SHORT,0)),g.drawCount++},d.prototype.updateGraphics=function(a){var b,c,d,e,f,h=this.renderer.gl,i=a._webGL[h.id];if(i||(i=a._webGL[h.id]={lastIndex:0,data:[],gl:h}),a.dirty=!1,a.clearDirty){for(a.clearDirty=!1,b=0;b<i.data.length;b++)c=i.data[b],c.reset(),this.graphicsDataPool.push(c);i.data=[],i.lastIndex=0}for(b=i.lastIndex;b<a.graphicsData.length;b++)e=a.graphicsData[b],e.type===g.SHAPES.POLY?(e.points=e.shape.points.slice(),e.shape.closed&&(e.points[0]!==e.points[e.points.length-2]||e.points[1]!==e.points[e.points.length-1])&&e.points.push(e.points[0],e.points[1]),e.fill&&e.points.length>=6&&(e.points.length<2*this.maximumSimplePolySize?(d=this.switchMode(i,0),f=this.buildPoly(e,d),f||(d=this.switchMode(i,1),this.buildComplexPoly(e,d))):(d=this.switchMode(i,1),this.buildComplexPoly(e,d))),e.lineWidth>0&&(d=this.switchMode(i,0),this.buildLine(e,d))):(d=this.switchMode(i,0),e.type===g.SHAPES.RECT?this.buildRectangle(e,d):e.type===g.SHAPES.CIRC||e.type===g.SHAPES.ELIP?this.buildCircle(e,d):e.type===g.SHAPES.RREC&&this.buildRoundedRectangle(e,d)),i.lastIndex++;for(b=0;b<i.data.length;b++)d=i.data[b],d.dirty&&d.upload()},d.prototype.switchMode=function(a,b){var c;return a.data.length?(c=a.data[a.data.length-1],(c.points.length>32e4||c.mode!==b||1===b)&&(c=this.graphicsDataPool.pop()||new j(a.gl),c.mode=b,a.data.push(c))):(c=this.graphicsDataPool.pop()||new j(a.gl),c.mode=b,a.data.push(c)),c.dirty=!0,c},d.prototype.buildRectangle=function(a,b){var c,d,f,g,h,i,j,k,l,m=a.shape,n=m.x,o=m.y,p=m.width,q=m.height;a.fill&&(c=e.hex2rgb(a.fillColor),d=a.fillAlpha,f=c[0]*d,g=c[1]*d,h=c[2]*d,i=b.points,j=b.indices,k=i.length/6,i.push(n,o),i.push(f,g,h,d),i.push(n+p,o),i.push(f,g,h,d),i.push(n,o+q),i.push(f,g,h,d),i.push(n+p,o+q),i.push(f,g,h,d),j.push(k,k,k+1,k+2,k+3,k+3)),a.lineWidth&&(l=a.points,a.points=[n,o,n+p,o,n+p,o+q,n,o+q,n,o],this.buildLine(a,b),a.points=l)},d.prototype.buildRoundedRectangle=function(a,b){var c,d,f,g,h,i,j,l,m,n,o,p=a.shape,q=p.x,r=p.y,s=p.width,t=p.height,u=p.radius,v=[];if(v.push(q,r+u),this.quadraticBezierCurve(q,r+t-u,q,r+t,q+u,r+t,v),this.quadraticBezierCurve(q+s-u,r+t,q+s,r+t,q+s,r+t-u,v),this.quadraticBezierCurve(q+s,r+u,q+s,r,q+s-u,r,v),this.quadraticBezierCurve(q+u,r,q,r,q,r+u+1e-10,v),a.fill){for(c=e.hex2rgb(a.fillColor),d=a.fillAlpha,f=c[0]*d,g=c[1]*d,h=c[2]*d,i=b.points,j=b.indices,l=i.length/6,m=k(v,null,2),n=0,n=0;n<m.length;n+=3)j.push(m[n]+l),j.push(m[n]+l),j.push(m[n+1]+l),j.push(m[n+2]+l),j.push(m[n+2]+l);for(n=0;n<v.length;n++)i.push(v[n],v[++n],f,g,h,d)}a.lineWidth&&(o=a.points,a.points=v,this.buildLine(a,b),a.points=o)},d.prototype.quadraticBezierCurve=function(a,b,c,d,e,f,g){function h(a,b,c){var d=b-a;return a+d*c}var i,j,k,l,m,n,o,p=20,q=g||[],r=0;for(o=0;p>=o;o++)r=o/p,i=h(a,c,r),j=h(b,d,r),k=h(c,e,r),l=h(d,f,r),m=h(i,k,r),n=h(j,l,r),q.push(m,n);return q},d.prototype.buildCircle=function(a,b){var c,d,f,h,i,j,k,l,m,n,o,p,q,r,s=a.shape,t=s.x,u=s.y;if(a.type===g.SHAPES.CIRC?(c=s.radius,d=s.radius):(c=s.width,d=s.height),f=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(s.width+s.height)),h=2*Math.PI/f,i=0,a.fill){for(j=e.hex2rgb(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6,p.push(q),i=0;f+1>i;i++)o.push(t,u,l,m,n,k),o.push(t+Math.sin(h*i)*c,u+Math.cos(h*i)*d,l,m,n,k),p.push(q++,q++);p.push(q-1)}if(a.lineWidth){for(r=a.points,a.points=[],i=0;f+1>i;i++)a.points.push(t+Math.sin(h*i)*c,u+Math.cos(h*i)*d);this.buildLine(a,b),a.points=r}},d.prototype.buildLine=function(a,b){var c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=0,R=a.points;if(0!==R.length){for(c=new f.Point(R[0],R[1]),d=new f.Point(R[R.length-2],R[R.length-1]),c.x===d.x&&c.y===d.y&&(R=R.slice(),R.pop(),R.pop(),d=new f.Point(R[R.length-2],R[R.length-1]),g=d.x+.5*(c.x-d.x),h=d.y+.5*(c.y-d.y),R.unshift(g,h),R.push(g,h)),i=b.points,j=b.indices,k=R.length/2,l=R.length,m=i.length/6,n=a.lineWidth/2,o=e.hex2rgb(a.lineColor),p=a.lineAlpha,q=o[0]*p,r=o[1]*p,s=o[2]*p,v=R[0],w=R[1],x=R[2],y=R[3],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,i.push(v-B,w-C,q,r,s,p),i.push(v+B,w+C,q,r,s,p),Q=1;k-1>Q;Q++)v=R[2*(Q-1)],w=R[2*(Q-1)+1],x=R[2*Q],y=R[2*Q+1],z=R[2*(Q+1)],A=R[2*(Q+1)+1],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,D=-(y-A),E=x-z,P=Math.sqrt(D*D+E*E),D/=P,E/=P,D*=n,E*=n,H=-C+w-(-C+y),I=-B+x-(-B+v),J=(-B+v)*(-C+y)-(-B+x)*(-C+w),K=-E+A-(-E+y),L=-D+x-(-D+z),M=(-D+z)*(-E+y)-(-D+x)*(-E+A),N=H*L-K*I,Math.abs(N)<.1?(N+=10.1,i.push(x-B,y-C,q,r,s,p),i.push(x+B,y+C,q,r,s,p)):(t=(I*M-L*J)/N,u=(K*J-H*M)/N,O=(t-x)*(t-x)+(u-y)*(u-y),O>19600?(F=B-D,G=C-E,P=Math.sqrt(F*F+G*G),F/=P,G/=P,F*=n,G*=n,i.push(x-F,y-G),i.push(q,r,s,p),i.push(x+F,y+G),i.push(q,r,s,p),i.push(x-F,y-G),i.push(q,r,s,p),l++):(i.push(t,u),i.push(q,r,s,p),i.push(x-(t-x),y-(u-y)),i.push(q,r,s,p)));for(v=R[2*(k-2)],w=R[2*(k-2)+1],x=R[2*(k-1)],y=R[2*(k-1)+1],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,i.push(x-B,y-C),i.push(q,r,s,p),i.push(x+B,y+C),i.push(q,r,s,p),j.push(m),Q=0;l>Q;Q++)j.push(m++);j.push(m-1)}},d.prototype.buildComplexPoly=function(a,b){var c,d,f,g,h,i,j,k,l,m=a.points.slice();if(!(m.length<6)){for(c=b.indices,b.points=m,b.alpha=a.fillAlpha,b.color=e.hex2rgb(a.fillColor),d=1/0,f=-(1/0),g=1/0,h=-(1/0),k=0;k<m.length;k+=2)i=m[k],j=m[k+1],d=d>i?i:d,f=i>f?i:f,g=g>j?j:g,h=j>h?j:h;for(m.push(d,g,f,g,f,h,d,h),l=m.length/2,k=0;l>k;k++)c.push(k)}},d.prototype.buildPoly=function(a,b){var c,d,f,g,h,i,j,l,m,n,o,p=a.points;if(!(p.length<6)){if(c=b.points,d=b.indices,f=p.length/2,g=e.hex2rgb(a.fillColor),h=a.fillAlpha,i=g[0]*h,j=g[1]*h,l=g[2]*h,m=k(p,null,2),!m)return!1;for(n=c.length/6,o=0,o=0;o<m.length;o+=3)d.push(m[o]+n),d.push(m[o]+n),d.push(m[o+1]+n),d.push(m[o+2]+n),d.push(m[o+2]+n);for(o=0;f>o;o++)c.push(p[2*o],p[2*o+1],i,j,l,h);return!0}}},{2:2,225:225,231:231,236:236,252:252,266:266,280:280}],231:[function(a,b,c){function d(a){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}d.prototype.constructor=d,b.exports=d,d.prototype.reset=function(){this.points.length=0,this.indices.length=0},d.prototype.upload=function(){var a=this.gl;this.glPoints=new Float32Array(this.points),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndices,a.STATIC_DRAW),this.dirty=!1},d.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],232:[function(a,b,c){var d=b.exports=Object.assign(a(225),a(236),{utils:a(280),ticker:a(279),DisplayObject:a(227),Container:a(226),Sprite:a(270),ParticleContainer:a(242),SpriteRenderer:a(271),ParticleRenderer:a(244),Text:a(272),Graphics:a(228),GraphicsData:a(229),GraphicsRenderer:a(230),Texture:a(275),BaseTexture:a(273),RenderTexture:a(274),VideoBaseTexture:a(277),TextureUvs:a(276),CanvasRenderer:a(247),CanvasGraphics:a(249),CanvasBuffer:a(248),WebGLRenderer:a(252),WebGLManager:a(261),ShaderManager:a(259),Shader:a(264),TextureShader:a(265),PrimitiveShader:a(263),ComplexPrimitiveShader:a(262),ObjectRenderer:a(266),RenderTarget:a(268),AbstractFilter:a(253),FXAAFilter:a(254),SpriteMaskFilter:a(255),autoDetectRenderer:function(a,b,c,e){return a=a||800,b=b||600,!e&&d.utils.isWebGLSupported()?new d.WebGLRenderer(a,b,c):new d.CanvasRenderer(a,b,c)}})},{225:225,226:226,227:227,228:228,229:229,230:230,236:236,242:242,244:244,247:247,248:248,249:249,252:252,253:253,254:254,255:255,259:259,261:261,262:262,263:263,264:264,265:265,266:266,268:268,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,279:279,280:280}],233:[function(a,b,c){function d(a){return 0>a?-1:a>0?1:0}function e(){var a,b,c,e,f,n,o,p,q;for(a=0;16>a;a++)for(b=[],m.push(b),c=0;16>c;c++)for(e=d(g[a]*g[c]+i[a]*h[c]),f=d(h[a]*g[c]+j[a]*h[c]),n=d(g[a]*i[c]+i[a]*j[c]),o=d(h[a]*i[c]+j[a]*j[c]),p=0;16>p;p++)if(g[p]===e&&h[p]===f&&i[p]===n&&j[p]===o){b.push(p);break}for(a=0;16>a;a++)q=new l,q.set(g[a],h[a],i[a],j[a],0,0),k.push(q)}var f,g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],h=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],i=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],j=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],k=[],l=a(234),m=[];
e(),f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return g[a]},uY:function(a){return h[a]},vX:function(a){return i[a]},vY:function(a){return j[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return m[a][b]},sub:function(a,b){return m[a][f.inv(b)]},rotate180:function(a){return 4^a},isSwapWidthHeight:function(a){return 2===(3&a)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?f.S:f.N:2*Math.abs(b)<=Math.abs(a)?a>0?f.E:f.W:b>0?a>0?f.SE:f.SW:a>0?f.NE:f.NW},matrixAppendRotationInv:function(a,b,c,d){var e=k[f.inv(b)];c=c||0,d=d||0,e.tx=c,e.ty=d,a.append(e)}},b.exports=f},{234:234}],234:[function(a,b,c){function d(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var e=a(235);d.prototype.constructor=d,b.exports=d,d.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},d.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},d.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},d.prototype.apply=function(a,b){var c,d;return b=b||new e,c=a.x,d=a.y,b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},d.prototype.applyInverse=function(a,b){var c,d,f;return b=b||new e,c=1/(this.a*this.d+this.c*-this.b),d=a.x,f=a.y,b.x=this.d*c*d+-this.c*c*f+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*f+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},d.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},d.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},d.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},d.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},d.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s;return n=Math.sin(g),o=Math.cos(g),p=Math.cos(i),q=Math.sin(i),r=-Math.sin(h),s=Math.cos(h),j=o*e,k=n*e,l=-n*f,m=o*f,this.a=p*j+q*l,this.b=p*k+q*m,this.c=r*j+s*l,this.d=r*k+s*m,this.tx=a+(c*j+d*l),this.ty=b+(c*k+d*m),this},d.prototype.prepend=function(a){var b,c,d=this.tx;return(1!==a.a||0!==a.b||0!==a.c||1!==a.d)&&(b=this.a,c=this.c,this.a=b*a.a+this.b*a.c,this.b=b*a.b+this.b*a.d,this.c=c*a.a+this.d*a.c,this.d=c*a.b+this.d*a.d),this.tx=d*a.a+this.ty*a.c+a.tx,this.ty=d*a.b+this.ty*a.d+a.ty,this},d.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},d.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},d.prototype.clone=function(){var a=new d;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},d.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},d.IDENTITY=new d,d.TEMP_MATRIX=new d},{235:235}],235:[function(a,b,c){function d(a,b){this.x=a||0,this.y=b||0}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y)},d.prototype.copy=function(a){this.set(a.x,a.y)},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},d.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)}},{}],236:[function(a,b,c){b.exports={Point:a(235),Matrix:a(234),GroupD8:a(233),Circle:a(237),Ellipse:a(238),Polygon:a(239),Rectangle:a(240),RoundedRectangle:a(241)}},{233:233,234:234,235:235,237:237,238:238,239:239,240:240,241:241}],237:[function(a,b,c){function d(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0,this.type=f.SHAPES.CIRC}var e=a(240),f=a(225);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.radius)},d.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},d.prototype.getBounds=function(){return new e(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{225:225,240:240}],238:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=f.SHAPES.ELIP}var e=a(240),f=a(225);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},d.prototype.getBounds=function(){return new e(this.x-this.width,this.y-this.height,this.width,this.height)}},{225:225,240:240}],239:[function(a,b,c){function d(a){var b,c,d,g,h=a;if(!Array.isArray(h))for(h=Array(arguments.length),b=0;b<h.length;++b)h[b]=arguments[b];if(h[0]instanceof e){for(c=[],d=0,g=h.length;g>d;d++)c.push(h[d].x,h[d].y);h=c}this.closed=!0,this.points=h,this.type=f.SHAPES.POLY}var e=a(235),f=a(225);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.points.slice())},d.prototype.contains=function(a,b){var c,d,e,f,g,h,i,j=!1,k=this.points.length/2;for(c=0,d=k-1;k>c;d=c++)e=this.points[2*c],f=this.points[2*c+1],g=this.points[2*d],h=this.points[2*d+1],i=f>b!=h>b&&(g-e)*(b-f)/(h-f)+e>a,i&&(j=!j);return j}},{225:225,235:235}],240:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=e.SHAPES.RECT}var e=a(225);d.prototype.constructor=d,b.exports=d,d.EMPTY=new d(0,0,0,0),d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(a,b){return this.width<=0||this.height<=0?!1:a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height?!0:!1}},{225:225}],241:[function(a,b,c){function d(a,b,c,d,f){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=f||20,this.type=e.SHAPES.RREC}var e=a(225);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.radius)},d.prototype.contains=function(a,b){return this.width<=0||this.height<=0?!1:a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height?!0:!1}},{225:225}],242:[function(a,b,c){function d(a,b,c){e.call(this),c=c||15e3,a=a||15e3;var d=16384;c>d&&(c=d),c>a&&(c=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=a,this._batchSize=c,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=f.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(b)}var e=a(226),f=a(225);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},d.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},d.prototype.renderWebGL=function(a){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},d.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},d.prototype.renderCanvas=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable)for(b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode],i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform(),j=0;j<this.children.length;++j)k=this.children[j],k.visible&&(l=k.texture.frame,b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)===0?(d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y):(d||(d=!0),k.displayObjectUpdateTransform(),m=k.worldTransform,a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,0|m.tx,0|m.ty):b.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height),b.drawImage(k.texture.baseTexture.source,l.x,l.y,l.width,l.height,e,f,g,h))},d.prototype.destroy=function(){if(e.prototype.destroy.apply(this,arguments),this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._properties=null,this._buffers=null}},{225:225,226:226}],243:[function(a,b,c){function d(a,b,c,d){var e,f;for(this.gl=a,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=d,this.dynamicProperties=[],this.staticProperties=[],e=0;e<b.length;e++)f=b[e],c[e]?this.dynamicProperties.push(f):this.staticProperties.push(f);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}d.prototype.constructor=d,b.exports=d,d.prototype.initBuffers=function(){var a,b,c,d=this.gl,e=0;for(this.dynamicStride=0,a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],b.offset=e,e+=b.size,this.dynamicStride+=b.size;for(this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,this.dynamicBuffer),d.bufferData(d.ARRAY_BUFFER,this.dynamicData,d.DYNAMIC_DRAW),c=0,this.staticStride=0,a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],b.offset=c,c+=b.size,this.staticStride+=b.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,this.staticBuffer),d.bufferData(d.ARRAY_BUFFER,this.staticData,d.DYNAMIC_DRAW)},d.prototype.uploadDynamic=function(a,b,c){var d,e,f=this.gl;for(d=0;d<this.dynamicProperties.length;d++)e=this.dynamicProperties[d],e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset);f.bindBuffer(f.ARRAY_BUFFER,this.dynamicBuffer),f.bufferSubData(f.ARRAY_BUFFER,0,this.dynamicData)},d.prototype.uploadStatic=function(a,b,c){var d,e,f=this.gl;for(d=0;d<this.staticProperties.length;d++)e=this.staticProperties[d],e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset);f.bindBuffer(f.ARRAY_BUFFER,this.staticBuffer),f.bufferSubData(f.ARRAY_BUFFER,0,this.staticData)},d.prototype.bind=function(){var a,b,c=this.gl;for(c.bindBuffer(c.ARRAY_BUFFER,this.dynamicBuffer),a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],c.vertexAttribPointer(b.attribute,b.size,c.FLOAT,!1,4*this.dynamicStride,4*b.offset);for(c.bindBuffer(c.ARRAY_BUFFER,this.staticBuffer),a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],c.vertexAttribPointer(b.attribute,b.size,c.FLOAT,!1,4*this.staticStride,4*b.offset)},d.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],244:[function(a,b,c){function d(a){var b,c,d;for(e.call(this,a),b=98304,this.indices=new Uint16Array(b),c=0,d=0;b>c;c+=6,d+=4)this.indices[c+0]=d+0,this.indices[c+1]=d+1,this.indices[c+2]=d+2,this.indices[c+3]=d+0,this.indices[c+4]=d+2,this.indices[c+5]=d+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new i.Matrix}var e=a(266),f=a(252),g=a(245),h=a(243),i=a(236);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,f.registerPlugin("particle",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new g(this.renderer.shaderManager),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},d.prototype.start=function(){var a,b=this.renderer.gl;b.activeTexture(b.TEXTURE0),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.shader,this.renderer.shaderManager.setShader(a)},d.prototype.render=function(a){var b,c,d,e,f,g,h,i=a.children,j=i.length,k=a._maxSize,l=a._batchSize;if(0!==j){if(j>k&&(j=k),a._buffers||(a._buffers=this.generateBuffers(a)),this.renderer.blendModeManager.setBlendMode(a.blendMode),b=this.renderer.gl,c=a.worldTransform.copy(this.tempMatrix),c.prepend(this.renderer.currentRenderTarget.projectionMatrix),b.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,c.toArray(!0)),b.uniform1f(this.shader.uniforms.uAlpha._location,a.worldAlpha),d=i[0]._texture.baseTexture,d._glTextures[b.id])b.bindTexture(b.TEXTURE_2D,d._glTextures[b.id]);else{if(!this.renderer.updateTexture(d))return;a._properties[0]&&a._properties[3]||(a._bufferToUpdate=0)}for(e=0,f=0;j>e;e+=l,f+=1)g=j-e,g>l&&(g=l),h=a._buffers[f],h.uploadDynamic(i,e,g),a._bufferToUpdate===f&&(h.uploadStatic(i,e,g),a._bufferToUpdate=f+1),h.bind(this.shader),b.drawElements(b.TRIANGLES,6*g,b.UNSIGNED_SHORT,0),this.renderer.drawCount++}},d.prototype.generateBuffers=function(a){var b,c=this.renderer.gl,d=[],e=a._maxSize,f=a._batchSize,g=a._properties;for(b=0;e>b;b+=f)d.push(new h(c,this.properties,g,f));return d},d.prototype.uploadVertices=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p;for(p=0;c>p;p++)g=a[b+p],h=g._texture,j=g.scale.x,k=g.scale.y,h.trim?(i=h.trim,m=i.x-g.anchor.x*i.width,l=m+h.crop.width,o=i.y-g.anchor.y*i.height,n=o+h.crop.height):(l=h._frame.width*(1-g.anchor.x),m=h._frame.width*-g.anchor.x,n=h._frame.height*(1-g.anchor.y),o=h._frame.height*-g.anchor.y),d[f]=m*j,d[f+1]=o*k,d[f+e]=l*j,d[f+e+1]=o*k,d[f+2*e]=l*j,d[f+2*e+1]=n*k,d[f+3*e]=m*j,d[f+3*e+1]=n*k,f+=4*e},d.prototype.uploadPosition=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g].position,d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e},d.prototype.uploadRotation=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g].rotation,d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e},d.prototype.uploadUvs=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g]._texture._uvs,h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)},d.prototype.uploadAlpha=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g].alpha,d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e},d.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{236:236,243:243,245:245,252:252,266:266}],245:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}","precision lowp float;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}",{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var e=a(265);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{265:265}],246:[function(a,b,c){function d(a,b,c,d){if(h.call(this),e.sayHello(a),d)for(var i in g.DEFAULT_RENDER_OPTIONS)void 0===d[i]&&(d[i]=g.DEFAULT_RENDER_OPTIONS[i]);else d=g.DEFAULT_RENDER_OPTIONS;this.type=g.RENDERER_TYPE.UNKNOWN,this.width=b||800,this.height=c||600,this.view=d.view||document.createElement("canvas"),this.resolution=d.resolution,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=d.preserveDrawingBuffer,this.clearBeforeRender=d.clearBeforeRender,this.roundPixels=d.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=d.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new f.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var e=a(280),f=a(236),g=a(225),h=a(3);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=e.hex2string(a),e.hex2rgb(a,this._backgroundColorRgb)}}}),d.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},d.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=g.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{225:225,236:236,280:280,3:3}],247:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"Canvas",a,b,c),this.type=i.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new f,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new h.Matrix,worldAlpha:1},this.resize(a,b)}var e=a(246),f=a(250),g=a(280),h=a(236),i=a(225);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,g.pluginTarget.mixin(d),d.prototype.render=function(a){this.emit("prerender");var b=a.parent;this._lastObjectRendered=a,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=b,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[i.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(a,this.context),this.emit("postrender")},d.prototype.destroy=function(a){this.destroyPlugins(),e.prototype.destroy.call(this,a),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},d.prototype.renderDisplayObject=function(a,b){var c=this.context;this.context=b,a.renderCanvas(this),this.context=c},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.smoothProperty&&(this.context[this.smoothProperty]=i.SCALE_MODES.DEFAULT===i.SCALE_MODES.LINEAR)},d.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},g.canUseNewCanvasBlendModes()?(this.blendModes[i.BLEND_MODES.NORMAL]="source-over",this.blendModes[i.BLEND_MODES.ADD]="lighter",this.blendModes[i.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[i.BLEND_MODES.SCREEN]="screen",this.blendModes[i.BLEND_MODES.OVERLAY]="overlay",this.blendModes[i.BLEND_MODES.DARKEN]="darken",this.blendModes[i.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[i.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[i.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[i.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[i.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[i.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[i.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[i.BLEND_MODES.HUE]="hue",this.blendModes[i.BLEND_MODES.SATURATION]="saturate",this.blendModes[i.BLEND_MODES.COLOR]="color",this.blendModes[i.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[i.BLEND_MODES.NORMAL]="source-over",this.blendModes[i.BLEND_MODES.ADD]="lighter",this.blendModes[i.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[i.BLEND_MODES.SCREEN]="source-over",this.blendModes[i.BLEND_MODES.OVERLAY]="source-over",this.blendModes[i.BLEND_MODES.DARKEN]="source-over",this.blendModes[i.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[i.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[i.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[i.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[i.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[i.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[i.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[i.BLEND_MODES.HUE]="source-over",this.blendModes[i.BLEND_MODES.SATURATION]="source-over",this.blendModes[i.BLEND_MODES.COLOR]="source-over",this.blendModes[i.BLEND_MODES.LUMINOSITY]="source-over"))}},{225:225,236:236,246:246,250:250,280:280}],248:[function(a,b,c){function d(a,b){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=a,this.canvas.height=b}d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},height:{get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}}),d.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},d.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b},d.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],249:[function(a,b,c){var d=a(225),e={};b.exports=e,e.renderGraphics=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=a.worldAlpha;for(a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),c=0;c<a.graphicsData.length;c++)if(e=a.graphicsData[c],f=e.shape,g=e._fillTint,h=e._lineTint,b.lineWidth=e.lineWidth,e.type===d.SHAPES.POLY){for(b.beginPath(),i=f.points,b.moveTo(i[0],i[1]),j=1;j<i.length/2;j++)b.lineTo(i[2*j],i[2*j+1]);f.closed&&b.lineTo(i[0],i[1]),i[0]===i[i.length-2]&&i[1]===i[i.length-1]&&b.closePath(),e.fill&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke())}else e.type===d.SHAPES.RECT?((e.fillColor||0===e.fillColor)&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fillRect(f.x,f.y,f.width,f.height)),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.strokeRect(f.x,f.y,f.width,f.height))):e.type===d.SHAPES.CIRC?(b.beginPath(),b.arc(f.x,f.y,f.radius,0,2*Math.PI),b.closePath(),e.fill&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke())):e.type===d.SHAPES.ELIP?(k=2*f.width,l=2*f.height,m=f.x-k/2,n=f.y-l/2,b.beginPath(),o=.5522848,p=k/2*o,q=l/2*o,r=m+k,s=n+l,t=m+k/2,u=n+l/2,b.moveTo(m,u),b.bezierCurveTo(m,u-q,t-p,n,t,n),b.bezierCurveTo(t+p,n,r,u-q,r,u),b.bezierCurveTo(r,u+q,t+p,s,t,s),b.bezierCurveTo(t-p,s,m,u+q,m,u),b.closePath(),e.fill&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke())):e.type===d.SHAPES.RREC&&(v=f.x,w=f.y,x=f.width,y=f.height,z=f.radius,A=Math.min(x,y)/2|0,z=z>A?A:z,b.beginPath(),b.moveTo(v,w+z),b.lineTo(v,w+y-z),b.quadraticCurveTo(v,w+y,v+z,w+y),b.lineTo(v+x-z,w+y),b.quadraticCurveTo(v+x,w+y,v+x,w+y-z),b.lineTo(v+x,w+z),b.quadraticCurveTo(v+x,w,v+x-z,w),b.lineTo(v+z,w),b.quadraticCurveTo(v,w,v,w+z),b.closePath(),(e.fillColor||0===e.fillColor)&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke()))},e.renderGraphicsMask=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=a.graphicsData.length;if(0!==z)for(b.beginPath(),c=0;z>c;c++)if(e=a.graphicsData[c],f=e.shape,e.type===d.SHAPES.POLY){for(g=f.points,b.moveTo(g[0],g[1]),h=1;h<g.length/2;h++)b.lineTo(g[2*h],g[2*h+1]);g[0]===g[g.length-2]&&g[1]===g[g.length-1]&&b.closePath()}else e.type===d.SHAPES.RECT?(b.rect(f.x,f.y,f.width,f.height),b.closePath()):e.type===d.SHAPES.CIRC?(b.arc(f.x,f.y,f.radius,0,2*Math.PI),b.closePath()):e.type===d.SHAPES.ELIP?(i=2*f.width,j=2*f.height,k=f.x-i/2,l=f.y-j/2,m=.5522848,n=i/2*m,o=j/2*m,p=k+i,q=l+j,r=k+i/2,s=l+j/2,b.moveTo(k,s),b.bezierCurveTo(k,s-o,r-n,l,r,l),b.bezierCurveTo(r+n,l,p,s-o,p,s),b.bezierCurveTo(p,s+o,r+n,q,r,q),b.bezierCurveTo(r-n,q,k,s+o,k,s),b.closePath()):e.type===d.SHAPES.RREC&&(t=f.x,u=f.y,v=f.width,w=f.height,x=f.radius,y=Math.min(v,w)/2|0,x=x>y?y:x,b.moveTo(t,u+x),b.lineTo(t,u+w-x),b.quadraticCurveTo(t,u+w,t+x,u+w),b.lineTo(t+v-x,u+w),b.quadraticCurveTo(t+v,u+w,t+v,u+w-x),b.lineTo(t+v,u+x),b.quadraticCurveTo(t+v,u,t+v-x,u),b.lineTo(t+x,u),b.quadraticCurveTo(t,u,t,u+x),b.closePath())},e.updateGraphicsTint=function(a){var b,c,d,e,f,g,h;if(16777215!==a.tint||a._prevTint!==a.tint)for(a._prevTint=a.tint,b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++)f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor,f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},{225:225}],250:[function(a,b,c){function d(){}var e=a(249);d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a,b){var c,d,f;b.context.save(),c=a.alpha,d=a.worldTransform,f=b.resolution,b.context.setTransform(d.a*f,d.b*f,d.c*f,d.d*f,d.tx*f,d.ty*f),a.texture||(e.renderGraphicsMask(a,b.context),b.context.clip()),a.worldAlpha=c},d.prototype.popMask=function(a){a.context.restore()},d.prototype.destroy=function(){}},{249:249}],251:[function(a,b,c){var d=a(280),e={};b.exports=e,e.getTintedTexture=function(a,b){var c,d,f,g=a.texture;return b=e.roundColor(b),c="#"+("00000"+(0|b).toString(16)).substr(-6),g.tintCache=g.tintCache||{},g.tintCache[c]?g.tintCache[c]:(d=e.canvas||document.createElement("canvas"),e.tintMethod(g,b,d),e.convertTintToImage?(f=new Image,f.src=d.toDataURL(),g.tintCache[c]=f):(g.tintCache[c]=d,e.canvas=null),d)},e.tintWithMultiply=function(a,b,c){var d=c.getContext("2d"),e=a.baseTexture.resolution,f=a.crop.clone();f.x*=e,f.y*=e,f.width*=e,f.height*=e,c.width=f.width,c.height=f.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,f.width,f.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height)},e.tintWithOverlay=function(a,b,c){var d=c.getContext("2d"),e=a.baseTexture.resolution,f=a.crop.clone();f.x*=e,f.y*=e,f.width*=e,f.height*=e,c.width=f.width,c.height=f.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,f.width,f.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height)},e.tintWithPerPixel=function(a,b,c){var e,f,g,h,i,j,k,l=c.getContext("2d"),m=a.baseTexture.resolution,n=a.crop.clone();for(n.x*=m,n.y*=m,n.width*=m,n.height*=m,c.width=n.width,c.height=n.height,l.globalCompositeOperation="copy",l.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),e=d.hex2rgb(b),f=e[0],g=e[1],h=e[2],i=l.getImageData(0,0,n.width,n.height),j=i.data,k=0;k<j.length;k+=4)j[k+0]*=f,j[k+1]*=g,j[k+2]*=h;l.putImageData(i,0,0)},e.roundColor=function(a){var b=e.cacheStepsPerColorChannel,c=d.hex2rgb(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),d.rgb2hex(c)},e.cacheStepsPerColorChannel=8,e.convertTintToImage=!1,e.canUseMultiply=d.canUseNewCanvasBlendModes(),e.tintMethod=e.canUseMultiply?e.tintWithMultiply:e.tintWithPerPixel},{280:280}],252:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"WebGL",a,b,c),this.type=o.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!c.forceFXAA&&c.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:c.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new f(this),this.maskManager=new g(this),this.stencilManager=new h(this),this.filterManager=new i(this),this.blendModeManager=new j(this),this.currentRenderTarget=null,this.currentRenderer=new l(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var e=a(246),f=a(259),g=a(258),h=a(260),i=a(257),j=a(256),k=a(268),l=a(266),m=a(254),n=a(280),o=a(225);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,n.pluginTarget.mixin(d),d.glContextId=0,d.prototype._createContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=a,!a)throw Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=d.glContextId++,a.id=this.glContextId,a.renderer=this},d.prototype._initContext=function(){var a=this.gl;a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),this.renderTarget=new k(a,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",a),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!a.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),
this._FXAAFilter=[new m])},d.prototype.render=function(a){var b,c;this.emit("prerender"),this.gl.isContextLost()||(this.drawCount=0,this._lastObjectRendered=a,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,a.filterArea=this.renderTarget.size,a.filters=this._FXAAFilter),b=a.parent,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=b,c=this.gl,this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?c.clearColor(0,0,0,0):c.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),c.clear(c.COLOR_BUFFER_BIT)),this.renderDisplayObject(a,this.renderTarget),this.emit("postrender"))},d.prototype.renderDisplayObject=function(a,b,c){this.setRenderTarget(b),c&&b.clear(),this.filterManager.setFilterStack(b.filterStack),a.renderWebGL(this),this.currentRenderer.flush()},d.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},d.prototype.setRenderTarget=function(a){this.currentRenderTarget!==a&&(this.currentRenderTarget=a,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(a.stencilMaskStack))},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.filterManager.resize(a,b),this.renderTarget.resize(a,b),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},d.prototype.updateTexture=function(a){if(a=a.baseTexture||a,a.hasLoaded){var b=this.gl;return a._glTextures[b.id]||(a._glTextures[b.id]=b.createTexture(),a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a)),b.bindTexture(b.TEXTURE_2D,a._glTextures[b.id]),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.source),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a.scaleMode===o.SCALE_MODES.LINEAR?b.LINEAR:b.NEAREST),a.mipmap&&a.isPowerOfTwo?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===o.SCALE_MODES.LINEAR?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST),b.generateMipmap(b.TEXTURE_2D)):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===o.SCALE_MODES.LINEAR?b.LINEAR:b.NEAREST),a.isPowerOfTwo?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),a._glTextures[b.id]}},d.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.gl.id]&&(this.gl.deleteTexture(a._glTextures[this.gl.id]),delete a._glTextures[this.gl.id],!b)){var c=this._managedTextures.indexOf(a);-1!==c&&n.removeItems(this._managedTextures,c,1)}},d.prototype.handleContextLost=function(a){a.preventDefault()},d.prototype.handleContextRestored=function(){var a,b;for(this._initContext(),a=0;a<this._managedTextures.length;++a)b=this._managedTextures[a],b._glTextures[this.gl.id]&&delete b._glTextures[this.gl.id]},d.prototype.destroy=function(a){var b,c;for(this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),b=0;b<this._managedTextures.length;++b)c=this._managedTextures[b],this.destroyTexture(c,!0),c.off("update",this.updateTexture,this),c.off("dispose",this.destroyTexture,this);e.prototype.destroy.call(this,a),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl=null},d.prototype._mapGlModes=function(){var a=this.gl;this.blendModes||(this.blendModes={},this.blendModes[o.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],this.blendModes[o.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],this.blendModes[o.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[o.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[o.DRAW_MODES.POINTS]=a.POINTS,this.drawModes[o.DRAW_MODES.LINES]=a.LINES,this.drawModes[o.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,this.drawModes[o.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,this.drawModes[o.DRAW_MODES.TRIANGLES]=a.TRIANGLES,this.drawModes[o.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,this.drawModes[o.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN)}},{225:225,246:246,254:254,256:256,257:257,258:258,259:259,260:260,266:266,268:268,280:280}],253:[function(a,b,c){function d(a,b,c){this.shaders=[],this.padding=0,this.uniforms=c||{},this.vertexSrc=a||e.defaultVertexSrc,this.fragmentSrc=b||e.defaultFragmentSrc}var e=a(265);d.prototype.constructor=d,b.exports=d,d.prototype.getShader=function(a){var b=a.gl,c=this.shaders[b.id];return c||(c=new e(a.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[b.id]=c),c},d.prototype.applyFilter=function(a,b,c,d){var e=this.getShader(a);a.filterManager.applyFilter(e,b,c,d)},d.prototype.syncUniform=function(a){for(var b=0,c=this.shaders.length;c>b;++b)this.shaders[b].syncUniform(a)}},{265:265}],254:[function(a,b,c){function d(){e.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var e=a(253);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.applyFilter=function(a,b,c){var d=a.filterManager,e=this.getShader(a);d.applyFilter(e,b,c)}},{253:253}],255:[function(a,b,c){function d(a){var b=new f.Matrix;e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:a._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:b.toArray(!0)}}),this.maskSprite=a,this.maskMatrix=b}var e=a(253),f=a(236);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.applyFilter=function(a,b,c){var d,e=a.filterManager;this.uniforms.mask.value=this.maskSprite._texture,e.calculateMappedMatrix(b.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha,d=this.getShader(a),e.applyFilter(d,b,c)},Object.defineProperties(d.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}},offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}})},{236:236,253:253}],256:[function(a,b,c){function d(a){e.call(this,a),this.currentBlendMode=99999}var e=a(261);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;var b=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(b[0],b[1]),!0}},{261:261}],257:[function(a,b,c){function d(a){e.call(this,a),this.filterStack=[],this.filterStack.push({renderTarget:a.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new i.Rectangle(0,0,a.width,a.height),this.currentFrame=null}var e=a(261),f=a(268),g=a(225),h=a(267),i=a(236);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.onContextChange=function(){this.texturePool.length=0;var a=this.renderer.gl;this.quad=new h(a)},d.prototype.setFilterStack=function(a){this.filterStack=a},d.prototype.pushFilter=function(a,b){var c,d,e,f=a.filterArea?a.filterArea.clone():a.getBounds();f.x=0|f.x,f.y=0|f.y,f.width=0|f.width,f.height=0|f.height,c=0|b[0].padding,f.x-=c,f.y-=c,f.width+=2*c,f.height+=2*c,this.renderer.currentRenderTarget.transform?(d=this.renderer.currentRenderTarget.transform,f.x+=d.tx,f.y+=d.ty,this.capFilterArea(f),f.x-=d.tx,f.y-=d.ty):this.capFilterArea(f),f.width>0&&f.height>0?(this.currentFrame=f,e=this.getRenderTarget(),this.renderer.setRenderTarget(e),e.clear(),this.filterStack.push({renderTarget:e,filter:b})):this.filterStack.push({renderTarget:null,filter:b})},d.prototype.popFilter=function(){var a,b,c,d,e,f,h,i,j=this.filterStack.pop(),k=this.filterStack[this.filterStack.length-1],l=j.renderTarget;if(j.renderTarget){if(a=k.renderTarget,b=this.renderer.gl,this.currentFrame=l.frame,this.quad.map(this.textureSize,l.frame),b.bindBuffer(b.ARRAY_BUFFER,this.quad.vertexBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer),c=j.filter,b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,b.FLOAT,!1,0,0),b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,b.FLOAT,!1,0,32),b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,b.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(g.BLEND_MODES.NORMAL),1===c.length)c[0].uniforms.dimensions&&(c[0].uniforms.dimensions.value[0]=this.renderer.width,c[0].uniforms.dimensions.value[1]=this.renderer.height,c[0].uniforms.dimensions.value[2]=this.quad.vertices[0],c[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),c[0].applyFilter(this.renderer,l,a),this.returnRenderTarget(l);else{for(d=l,e=this.getRenderTarget(!0),f=0;f<c.length-1;f++)h=c[f],h.uniforms.dimensions&&(h.uniforms.dimensions.value[0]=this.renderer.width,h.uniforms.dimensions.value[1]=this.renderer.height,h.uniforms.dimensions.value[2]=this.quad.vertices[0],h.uniforms.dimensions.value[3]=this.quad.vertices[5]),h.applyFilter(this.renderer,d,e),i=d,d=e,e=i;c[c.length-1].applyFilter(this.renderer,d,a),this.returnRenderTarget(d),this.returnRenderTarget(e)}return j.filter}},d.prototype.getRenderTarget=function(a){var b=this.texturePool.pop()||new f(this.renderer.gl,this.textureSize.width,this.textureSize.height,g.SCALE_MODES.LINEAR,this.renderer.resolution*g.FILTER_RESOLUTION);return b.frame=this.currentFrame,a&&b.clear(!0),b},d.prototype.returnRenderTarget=function(a){this.texturePool.push(a)},d.prototype.applyFilter=function(a,b,c,d){var e=this.renderer.gl;this.renderer.setRenderTarget(c),d&&c.clear(),this.renderer.shaderManager.setShader(a),a.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),a.syncUniforms(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,b.texture),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),this.renderer.drawCount++},d.prototype.calculateMappedMatrix=function(a,b,c){var d,e,f=b.worldTransform.copy(i.Matrix.TEMP_MATRIX),g=b._texture.baseTexture,h=c.identity(),j=this.textureSize.height/this.textureSize.width;return h.translate(a.x/this.textureSize.width,a.y/this.textureSize.height),h.scale(1,j),d=this.textureSize.width/g.width,e=this.textureSize.height/g.height,f.tx/=g.width*d,f.ty/=g.width*d,f.invert(),h.prepend(f),h.scale(1,1/j),h.scale(d,e),h.translate(b.anchor.x,b.anchor.y),h},d.prototype.capFilterArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.textureSize.width&&(a.width=this.textureSize.width-a.x),a.y+a.height>this.textureSize.height&&(a.height=this.textureSize.height-a.y)},d.prototype.resize=function(a,b){this.textureSize.width=a,this.textureSize.height=b;for(var c=0;c<this.texturePool.length;c++)this.texturePool[c].resize(a,b)},d.prototype.destroy=function(){this.quad.destroy(),e.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var a=0;a<this.texturePool.length;a++)this.texturePool[a].destroy();this.texturePool=null}},{225:225,236:236,261:261,267:267,268:268}],258:[function(a,b,c){function d(a){e.call(this,a),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var e=a(261),f=a(255);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a,b){b.texture?this.pushSpriteMask(a,b):this.pushStencilMask(a,b)},d.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.popStencilMask(a,b)},d.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool.pop();c||(c=[new f(b)]),c[0].maskSprite=b,this.renderer.filterManager.pushFilter(a,c)},d.prototype.popSpriteMask=function(){var a=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(a)},d.prototype.pushStencilMask=function(a,b){this.renderer.stencilManager.pushMask(b)},d.prototype.popStencilMask=function(a,b){this.renderer.stencilManager.popMask(b)}},{255:255,261:261}],259:[function(a,b,c){function d(a){e.call(this,a),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var e=a(261),f=a(265),g=a(262),h=a(263),i=a(280);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,i.pluginTarget.mixin(d),b.exports=d,d.prototype.onContextChange=function(){var a,b;for(this.initPlugins(),a=this.renderer.gl,this.maxAttibs=a.getParameter(a.MAX_VERTEX_ATTRIBS),this.attribState=[],b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.defaultShader=new f(this),this.primitiveShader=new h(this),this.complexPrimitiveShader=new g(this)},d.prototype.setAttribs=function(a){var b,c,d;for(b=0;b<this.tempAttribState.length;b++)this.tempAttribState[b]=!1;for(c in a)this.tempAttribState[a[c]]=!0;for(d=this.renderer.gl,b=0;b<this.attribState.length;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],this.attribState[b]?d.enableVertexAttribArray(b):d.disableVertexAttribArray(b))},d.prototype.setShader=function(a){return this._currentId===a.uid?!1:(this._currentId=a.uid,this.currentShader=a,this.renderer.gl.useProgram(a.program),this.setAttribs(a.attributes),!0)},d.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),e.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{261:261,262:262,263:263,265:265,280:280}],260:[function(a,b,c){function d(a){e.call(this,a),this.stencilMaskStack=null}var e=a(261),f=a(280);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.stencilStack.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},d.prototype.pushStencil=function(a,b){var c,d,e;this.renderer.currentRenderTarget.attachStencilBuffer(),c=this.renderer.gl,d=this.stencilMaskStack,this.bindGraphics(a,b),0===d.stencilStack.length&&(c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),d.reverse=!0,d.count=0),d.stencilStack.push(b),e=d.count,c.colorMask(!1,!1,!1,!1),c.stencilFunc(c.ALWAYS,0,255),c.stencilOp(c.KEEP,c.KEEP,c.INVERT),1===b.mode?(c.drawElements(c.TRIANGLE_FAN,b.indices.length-4,c.UNSIGNED_SHORT,0),d.reverse?(c.stencilFunc(c.EQUAL,255-e,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)):(c.stencilFunc(c.EQUAL,e,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(b.indices.length-4)),d.reverse?c.stencilFunc(c.EQUAL,255-(e+1),255):c.stencilFunc(c.EQUAL,e+1,255),d.reverse=!d.reverse):(d.reverse?(c.stencilFunc(c.EQUAL,e,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)):(c.stencilFunc(c.EQUAL,255-e,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)),c.drawElements(c.TRIANGLE_STRIP,b.indices.length,c.UNSIGNED_SHORT,0),d.reverse?c.stencilFunc(c.EQUAL,e+1,255):c.stencilFunc(c.EQUAL,255-(e+1),255)),c.colorMask(!0,!0,!0,!0),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),d.count++},d.prototype.bindGraphics=function(a,b){var c,d=this.renderer.gl;1===b.mode?(c=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(c),d.uniformMatrix3fv(c.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),d.uniformMatrix3fv(c.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(c.uniforms.tint._location,f.hex2rgb(a.tint)),d.uniform3fv(c.uniforms.color._location,b.color),d.uniform1f(c.uniforms.alpha._location,a.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,b.buffer),d.vertexAttribPointer(c.attributes.aVertexPosition,2,d.FLOAT,!1,8,0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.indexBuffer)):(c=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(c),d.uniformMatrix3fv(c.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),d.uniformMatrix3fv(c.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),d.uniform3fv(c.uniforms.tint._location,f.hex2rgb(a.tint)),d.uniform1f(c.uniforms.alpha._location,a.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,b.buffer),d.vertexAttribPointer(c.attributes.aVertexPosition,2,d.FLOAT,!1,24,0),d.vertexAttribPointer(c.attributes.aColor,4,d.FLOAT,!1,24,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.indexBuffer))},d.prototype.popStencil=function(a,b){var c,d=this.renderer.gl,e=this.stencilMaskStack;e.stencilStack.pop(),e.count--,0===e.stencilStack.length?d.disable(d.STENCIL_TEST):(c=e.count,this.bindGraphics(a,b),d.colorMask(!1,!1,!1,!1),1===b.mode?(e.reverse=!e.reverse,e.reverse?(d.stencilFunc(d.EQUAL,255-(c+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,c+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,e.reverse?d.stencilFunc(d.EQUAL,c,255):d.stencilFunc(d.EQUAL,255-c,255)):(e.reverse?(d.stencilFunc(d.EQUAL,c+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,255-(c+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.renderer.drawCount++,e.reverse?d.stencilFunc(d.EQUAL,c,255):d.stencilFunc(d.EQUAL,255-c,255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP))},d.prototype.destroy=function(){e.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},d.prototype.pushMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),a.dirty&&this.renderer.plugins.graphics.updateGraphics(a,this.renderer.gl),a._webGL[this.renderer.gl.id].data.length&&this.pushStencil(a,a._webGL[this.renderer.gl.id].data[0])},d.prototype.popMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(a,a._webGL[this.renderer.gl.id].data[0])}},{261:261,280:280}],261:[function(a,b,c){function d(a){this.renderer=a,this.renderer.on("context",this.onContextChange,this)}d.prototype.constructor=d,b.exports=d,d.prototype.onContextChange=function(){},d.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],262:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform vec3 tint;\nuniform float alpha;\nuniform vec3 color;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = vec4(color * alpha * tint, alpha);\n}","precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var e=a(264);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{264:264}],263:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform float flipY;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}","precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var e=a(264);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{264:264}],264:[function(a,b,c){function d(a,b,c,d,f){if(!b||!c)throw Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=e.uid(),this.gl=a.renderer.gl,this.shaderManager=a,this.program=null,this.uniforms=d||{},this.attributes=f||{},this.textureCount=1,this.vertexSrc=b,this.fragmentSrc=c,this.init()}var e=a(280);d.prototype.constructor=d,b.exports=d,d.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},d.prototype.cacheUniformLocations=function(a){for(var b=0;b<a.length;++b)this.uniforms[a[b]]._location=this.gl.getUniformLocation(this.program,a[b])},d.prototype.cacheAttributeLocations=function(a){for(var b=0;b<a.length;++b)this.attributes[a[b]]=this.gl.getAttribLocation(this.program,a[b])},d.prototype.compile=function(){var a=this.gl,b=this._glCompile(a.VERTEX_SHADER,this.vertexSrc),c=this._glCompile(a.FRAGMENT_SHADER,this.fragmentSrc),d=a.createProgram();return a.attachShader(d,b),a.attachShader(d,c),a.linkProgram(d),a.getProgramParameter(d,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(d,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(d)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(d)),a.deleteProgram(d),d=null),a.deleteShader(b),a.deleteShader(c),this.program=d},d.prototype.syncUniform=function(a){var b,c,d,f=a._location,g=a.value,h=this.gl;switch(a.type){case"b":case"bool":case"boolean":h.uniform1i(f,g?1:0);break;case"i":case"1i":h.uniform1i(f,g);break;case"f":case"1f":h.uniform1f(f,g);break;case"2f":h.uniform2f(f,g[0],g[1]);break;case"3f":h.uniform3f(f,g[0],g[1],g[2]);break;case"4f":h.uniform4f(f,g[0],g[1],g[2],g[3]);break;case"v2":h.uniform2f(f,g.x,g.y);break;case"v3":h.uniform3f(f,g.x,g.y,g.z);break;case"v4":h.uniform4f(f,g.x,g.y,g.z,g.w);break;case"1iv":h.uniform1iv(f,g);break;case"2iv":h.uniform2iv(f,g);break;case"3iv":h.uniform3iv(f,g);break;case"4iv":h.uniform4iv(f,g);break;case"1fv":h.uniform1fv(f,g);break;case"2fv":h.uniform2fv(f,g);break;case"3fv":h.uniform3fv(f,g);break;case"4fv":h.uniform4fv(f,g);break;case"m2":case"mat2":case"Matrix2fv":h.uniformMatrix2fv(f,a.transpose,g);break;case"m3":case"mat3":case"Matrix3fv":h.uniformMatrix3fv(f,a.transpose,g);break;case"m4":case"mat4":case"Matrix4fv":h.uniformMatrix4fv(f,a.transpose,g);break;case"c":"number"==typeof g&&(g=e.hex2rgb(g)),h.uniform3f(f,g[0],g[1],g[2]);break;case"iv1":h.uniform1iv(f,g);break;case"iv":h.uniform3iv(f,g);break;case"fv1":h.uniform1fv(f,g);break;case"fv":h.uniform3fv(f,g);break;case"v2v":for(a._array||(a._array=new Float32Array(2*g.length)),b=0,c=g.length;c>b;++b)a._array[2*b]=g[b].x,a._array[2*b+1]=g[b].y;h.uniform2fv(f,a._array);break;case"v3v":for(a._array||(a._array=new Float32Array(3*g.length)),b=0,c=g.length;c>b;++b)a._array[3*b]=g[b].x,a._array[3*b+1]=g[b].y,a._array[3*b+2]=g[b].z;h.uniform3fv(f,a._array);break;case"v4v":for(a._array||(a._array=new Float32Array(4*g.length)),b=0,c=g.length;c>b;++b)a._array[4*b]=g[b].x,a._array[4*b+1]=g[b].y,a._array[4*b+2]=g[b].z,a._array[4*b+3]=g[b].w;h.uniform4fv(f,a._array);break;case"t":case"sampler2D":if(!a.value||!a.value.baseTexture.hasLoaded)break;h.activeTexture(h["TEXTURE"+this.textureCount]),d=a.value.baseTexture._glTextures[h.id],d||(this.initSampler2D(a),d=a.value.baseTexture._glTextures[h.id]),h.bindTexture(h.TEXTURE_2D,d),h.uniform1i(a._location,this.textureCount),this.textureCount++;break;
default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+a.type)}},d.prototype.syncUniforms=function(){this.textureCount=1;for(var a in this.uniforms)this.syncUniform(this.uniforms[a])},d.prototype.initSampler2D=function(a){var b,c=this.gl,d=a.value.baseTexture;d.hasLoaded&&(a.textureData?(b=a.textureData,d._glTextures[c.id]=c.createTexture(),c.bindTexture(c.TEXTURE_2D,d._glTextures[c.id]),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.premultipliedAlpha),c.texImage2D(c.TEXTURE_2D,0,b.luminance?c.LUMINANCE:c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d.source),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b.magFilter?b.magFilter:c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.wrapS?b.wrapS:c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.wrapS?b.wrapS:c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.wrapT?b.wrapT:c.CLAMP_TO_EDGE)):this.shaderManager.renderer.updateTexture(d))},d.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},d.prototype._glCompile=function(a,b){var c=this.gl.createShader(a);return this.gl.shaderSource(c,b),this.gl.compileShader(c),this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS)?c:(console.log(this.gl.getShaderInfoLog(c)),null)}},{280:280}],265:[function(a,b,c){function d(a,b,c,f,g){var h,i,j,k={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(f)for(h in f)k[h]=f[h];if(i={aVertexPosition:0,aTextureCoord:0,aColor:0},g)for(j in g)i[j]=g[j];b=b||d.defaultVertexSrc,c=c||d.defaultFragmentSrc,e.call(this,a,b,c,k,i)}var e=a(264);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.defaultVertexSrc="precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}",d.defaultFragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}"},{264:264}],266:[function(a,b,c){function d(a){e.call(this,a)}var e=a(261);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.start=function(){},d.prototype.stop=function(){this.flush()},d.prototype.flush=function(){},d.prototype.render=function(a){}},{261:261}],267:[function(a,b,c){function d(a){this.gl=a,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,128,a.DYNAMIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),this.upload()}d.prototype.constructor=d,d.prototype.map=function(a,b){var c=0,d=0;this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this.upload()},d.prototype.upload=function(){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices),a.bufferSubData(a.ARRAY_BUFFER,32,this.uvs),a.bufferSubData(a.ARRAY_BUFFER,64,this.colors)},d.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},b.exports=d},{}],268:[function(a,b,c){var d=a(236),e=a(280),f=a(225),g=a(269),h=function(a,b,c,h,i,j){if(this.gl=a,this.frameBuffer=null,this.texture=null,this.size=new d.Rectangle(0,0,1,1),this.resolution=i||f.RESOLUTION,this.projectionMatrix=new d.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new g,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=h||f.SCALE_MODES.DEFAULT,this.root=j,!this.root){this.frameBuffer=a.createFramebuffer(),this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,h===f.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,h===f.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST);var k=e.isPowerOfTwo(b,c);k?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0)}this.resize(b,c)};h.prototype.constructor=h,b.exports=h,h.prototype.clear=function(a){var b=this.gl;a&&b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT)},h.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var a=this.gl;this.stencilBuffer=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencilBuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencilBuffer),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},h.prototype.activate=function(){var a,b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer),a=this.frame||this.size,this.calculateProjection(a),this.transform&&this.projectionMatrix.append(this.transform),b.viewport(0,0,a.width*this.resolution,a.height*this.resolution)},h.prototype.calculateProjection=function(a){var b=this.projectionMatrix;b.identity(),this.root?(b.a=1/a.width*2,b.d=-1/a.height*2,b.tx=-1-a.x*b.a,b.ty=1-a.y*b.d):(b.a=1/a.width*2,b.d=1/a.height*2,b.tx=-1-a.x*b.a,b.ty=-1-a.y*b.d)},h.prototype.resize=function(a,b){var c,d;a=0|a,b=0|b,(this.size.width!==a||this.size.height!==b)&&(this.size.width=a,this.size.height=b,this.root||(c=this.gl,c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a*this.resolution,b*this.resolution,0,c.RGBA,c.UNSIGNED_BYTE,null),this.stencilBuffer&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencilBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a*this.resolution,b*this.resolution))),d=this.frame||this.size,this.calculateProjection(d))},h.prototype.destroy=function(){var a=this.gl;a.deleteRenderbuffer(this.stencilBuffer),a.deleteFramebuffer(this.frameBuffer),a.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{225:225,236:236,269:269,280:280}],269:[function(a,b,c){function d(){this.stencilStack=[],this.reverse=!0,this.count=0}d.prototype.constructor=d,b.exports=d},{}],270:[function(a,b,c){function d(a){g.call(this),this.anchor=new e.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=j.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=a||f.EMPTY}var e=a(236),f=a(275),g=a(226),h=a(251),i=a(280),j=a(225),k=new e.Point,l=e.GroupD8,m=new e.Matrix;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(a){var b=i.sign(this.scale.x)||1;this.scale.x=b*a/this.texture._frame.width,this._width=a}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(a){var b=i.sign(this.scale.y)||1;this.scale.y=b*a/this.texture._frame.height,this._height=a}},texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),d.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=i.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=i.sign(this.scale.y)*this._height/this.texture.frame.height)},d.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this)},d.prototype.getBounds=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return this._currentBounds||(b=this._texture._frame.width,c=this._texture._frame.height,d=b*(1-this.anchor.x),e=b*-this.anchor.x,f=c*(1-this.anchor.y),g=c*-this.anchor.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,s=i*e+k*g+m,t=l*g+j*e+n,u=i*d+k*g+m,v=l*g+j*d+n,w=i*d+k*f+m,x=l*f+j*d+n,y=i*e+k*f+m,z=l*f+j*e+n,o=s,o=o>u?u:o,o=o>w?w:o,o=o>y?y:o,q=t,q=q>v?v:q,q=q>x?x:q,q=q>z?z:q,p=s,p=u>p?u:p,p=w>p?w:p,p=y>p?y:p,r=t,r=v>r?v:r,r=x>r?x:r,r=z>r?z:r,this.children.length&&(A=this.containerGetBounds(),d=A.x,e=A.x+A.width,f=A.y,g=A.y+A.height,o=d>o?o:d,q=f>q?q:f,p=p>e?p:e,r=r>g?r:g),B=this._bounds,B.x=o,B.width=p-o,B.y=q,B.height=r-q,this._currentBounds=B),this._currentBounds},d.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},d.prototype.containsPoint=function(a){var b,c,d,e;return this.worldTransform.applyInverse(a,k),b=this._texture._frame.width,c=this._texture._frame.height,d=-b*this.anchor.x,k.x>d&&k.x<d+b&&(e=-c*this.anchor.y,k.y>e&&k.y<e+c)?!0:!1},d.prototype._renderCanvas=function(a){var b,c,d,e,f,g,i,k,n;this.texture.crop.width<=0||this.texture.crop.height<=0||(b=a.blendModes[this.blendMode],b!==a.context.globalCompositeOperation&&(a.context.globalCompositeOperation=b),this.texture.valid&&(c=this._texture,d=this.worldTransform,g=c.crop.width,i=c.crop.height,a.context.globalAlpha=this.worldAlpha,k=c.baseTexture.scaleMode===j.SCALE_MODES.LINEAR,a.smoothProperty&&a.context[a.smoothProperty]!==k&&(a.context[a.smoothProperty]=k),2===(3&c.rotate)&&(g=c.crop.height,i=c.crop.width),c.trim?(e=c.crop.width/2+c.trim.x-this.anchor.x*c.trim.width,f=c.crop.height/2+c.trim.y-this.anchor.y*c.trim.height):(e=(.5-this.anchor.x)*c._frame.width,f=(.5-this.anchor.y)*c._frame.height),c.rotate&&(d.copy(m),d=m,l.matrixAppendRotationInv(d,c.rotate,e,f),e=0,f=0),e-=g/2,f-=i/2,a.roundPixels?(a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution|0,d.ty*a.resolution|0),e=0|e,f=0|f):a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution,d.ty*a.resolution),n=c.baseTexture.resolution,16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=h.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,g*n,i*n,e*a.resolution,f*a.resolution,g*a.resolution,i*a.resolution)):a.context.drawImage(c.baseTexture.source,c.crop.x*n,c.crop.y*n,g*n,i*n,e*a.resolution,f*a.resolution,g*a.resolution,i*a.resolution)))},d.prototype.destroy=function(a,b){g.prototype.destroy.call(this),this.anchor=null,a&&this._texture.destroy(b),this._texture=null,this.shader=null},d.fromFrame=function(a){var b=i.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new d(b)},d.fromImage=function(a,b,c){return new d(f.fromImage(a,b,c))}},{225:225,226:226,236:236,251:251,275:275,280:280}],271:[function(a,b,c){function d(a){var b,c,d,f;for(e.call(this,a),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=g.SPRITE_BATCH_SIZE,b=4*this.size*this.vertByteSize,c=6*this.size,this.vertices=new ArrayBuffer(b),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(c),d=0,f=0;c>d;d+=6,f+=4)this.indices[d+0]=f+0,this.indices[d+1]=f+1,this.indices[d+2]=f+2,this.indices[d+3]=f+0,this.indices[d+4]=f+2,this.indices[d+5]=f+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var e=a(266),f=a(252),g=a(225);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,f.registerPlugin("sprite",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW),this.currentBlendMode=99999},d.prototype.render=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a._texture;this.currentBatchSize>=this.size&&this.flush(),b=v._uvs,b&&(c=a.anchor.x,d=a.anchor.y,v.trim&&void 0===a.tileScale?(i=v.trim,f=i.x-c*i.width,e=f+v.crop.width,h=i.y-d*i.height,g=h+v.crop.height):(e=v._frame.width*(1-c),f=v._frame.width*-c,g=v._frame.height*(1-d),h=v._frame.height*-d),j=this.currentBatchSize*this.vertByteSize,k=a.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,r=this.colors,s=this.positions,this.renderer.roundPixels?(t=this.renderer.resolution,s[j]=((l*f+n*h+p)*t|0)/t,s[j+1]=((o*h+m*f+q)*t|0)/t,s[j+5]=((l*e+n*h+p)*t|0)/t,s[j+6]=((o*h+m*e+q)*t|0)/t,s[j+10]=((l*e+n*g+p)*t|0)/t,s[j+11]=((o*g+m*e+q)*t|0)/t,s[j+15]=((l*f+n*g+p)*t|0)/t,s[j+16]=((o*g+m*f+q)*t|0)/t):(s[j]=l*f+n*h+p,s[j+1]=o*h+m*f+q,s[j+5]=l*e+n*h+p,s[j+6]=o*h+m*e+q,s[j+10]=l*e+n*g+p,s[j+11]=o*g+m*e+q,s[j+15]=l*f+n*g+p,s[j+16]=o*g+m*f+q),s[j+2]=b.x0,s[j+3]=b.y0,s[j+7]=b.x1,s[j+8]=b.y1,s[j+12]=b.x2,s[j+13]=b.y2,s[j+17]=b.x3,s[j+18]=b.y3,u=a.tint,r[j+4]=r[j+9]=r[j+14]=r[j+19]=(u>>16)+(65280&u)+((255&u)<<16)+(255*a.worldAlpha<<24),this.sprites[this.currentBatchSize++]=a)},d.prototype.flush=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(0!==this.currentBatchSize){for(a=this.renderer.gl,this.currentBatchSize>.5*this.size?a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices):(c=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize),a.bufferSubData(a.ARRAY_BUFFER,0,c)),g=0,h=0,i=null,j=this.renderer.blendModeManager.currentBlendMode,k=null,l=!1,m=!1,o=0,p=this.currentBatchSize;p>o;o++)n=this.sprites[o],d=n._texture.baseTexture,e=n.blendMode,f=n.shader||this.shader,l=j!==e,m=k!==f,(i!==d||l||m)&&(this.renderBatch(i,g,h),h=o,g=0,i=d,l&&(j=e,this.renderer.blendModeManager.setBlendMode(j)),m&&(k=f,b=k.shaders?k.shaders[a.id]:k,b||(b=k.getShader(this.renderer)),this.renderer.shaderManager.setShader(b),b.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),b.syncUniforms(),a.activeTexture(a.TEXTURE0))),g++;this.renderBatch(i,g,h),this.currentBatchSize=0}},d.prototype.renderBatch=function(a,b,c){if(0!==b){var d=this.renderer.gl;a._glTextures[d.id]?d.bindTexture(d.TEXTURE_2D,a._glTextures[d.id]):this.renderer.updateTexture(a),d.drawElements(d.TRIANGLES,6*b,d.UNSIGNED_SHORT,6*c*2),this.renderer.drawCount++}},d.prototype.start=function(){var a,b=this.renderer.gl;b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.vertByteSize,b.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,b.FLOAT,!1,a,0),b.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,b.FLOAT,!1,a,8),b.vertexAttribPointer(this.shader.attributes.aColor,4,b.UNSIGNED_BYTE,!0,a,16)},d.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{225:225,252:252,266:266}],272:[function(a,b,c){function d(a,b,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||i.RESOLUTION,this._text=null,this._style=null;var d=f.fromCanvas(this.canvas);d.trim=new g.Rectangle,e.call(this,d),this.text=a,this.style=b}var e=a(270),f=a(275),g=a(236),h=a(280),i=a(225);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.fontPropertiesCache={},d.fontPropertiesCanvas=document.createElement("canvas"),d.fontPropertiesContext=d.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(d.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(a){this.scale.x=a/this._texture._frame.width,this._width=a}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(a){this.scale.y=a/this._texture._frame.height,this._height=a}},style:{get:function(){return this._style},set:function(a){a=a||{},"number"==typeof a.fill&&(a.fill=h.hex2string(a.fill)),"number"==typeof a.stroke&&(a.stroke=h.hex2string(a.stroke)),"number"==typeof a.dropShadowColor&&(a.dropShadowColor=h.hex2string(a.dropShadowColor)),a.font=a.font||"bold 20pt Arial",a.fill=a.fill||"black",a.align=a.align||"left",a.stroke=a.stroke||"black",a.strokeThickness=a.strokeThickness||0,a.wordWrap=a.wordWrap||!1,a.wordWrapWidth=a.wordWrapWidth||100,a.dropShadow=a.dropShadow||!1,a.dropShadowColor=a.dropShadowColor||"#000000",a.dropShadowAngle=void 0!==a.dropShadowAngle?a.dropShadowAngle:Math.PI/6,a.dropShadowDistance=void 0!==a.dropShadowDistance?a.dropShadowDistance:5,a.dropShadowBlur=void 0!==a.dropShadowBlur?a.dropShadowBlur:0,a.padding=a.padding||0,a.textBaseline=a.textBaseline||"alphabetic",a.lineJoin=a.lineJoin||"miter",a.miterLimit=a.miterLimit||10,this._style=a,this.dirty=!0}},text:{get:function(){return this._text},set:function(a){a=""+a||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}}),d.prototype.updateText=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=this._style;for(this.context.font=o.font,a=o.wordWrap?this.wordWrap(this._text):this._text,b=a.split(/(?:\r\n|\r|\n)/),c=Array(b.length),d=0,e=this.determineFontProperties(o.font),f=0;f<b.length;f++)g=this.context.measureText(b[f]).width,c[f]=g,d=Math.max(d,g);if(h=d+o.strokeThickness,o.dropShadow&&(h+=o.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution,i=this.style.lineHeight||e.fontSize+o.strokeThickness,j=i*b.length,o.dropShadow&&(j+=o.dropShadowDistance),this.canvas.height=(j+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=o.font,this.context.strokeStyle=o.stroke,this.context.lineWidth=o.strokeThickness,this.context.textBaseline=o.textBaseline,this.context.lineJoin=o.lineJoin,this.context.miterLimit=o.miterLimit,o.dropShadow)for(o.dropShadowBlur>0?(this.context.shadowColor=o.dropShadowColor,this.context.shadowBlur=o.dropShadowBlur):this.context.fillStyle=o.dropShadowColor,m=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,n=Math.sin(o.dropShadowAngle)*o.dropShadowDistance,f=0;f<b.length;f++)k=o.strokeThickness/2,l=o.strokeThickness/2+f*i+e.ascent,"right"===o.align?k+=d-c[f]:"center"===o.align&&(k+=(d-c[f])/2),o.fill&&this.context.fillText(b[f],k+m,l+n+this._style.padding);for(this.context.fillStyle=o.fill,f=0;f<b.length;f++)k=o.strokeThickness/2,l=o.strokeThickness/2+f*i+e.ascent,"right"===o.align?k+=d-c[f]:"center"===o.align&&(k+=(d-c[f])/2),o.stroke&&o.strokeThickness&&this.context.strokeText(b[f],k,l+this._style.padding),o.fill&&this.context.fillText(b[f],k,l+this._style.padding);this.updateTexture()},d.prototype.updateTexture=function(){var a=this._texture;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.crop.width=a._frame.width=this.canvas.width/this.resolution,a.crop.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=0,a.trim.y=-this._style.padding,a.trim.width=a._frame.width,a.trim.height=a._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},d.prototype.renderWebGL=function(a){this.dirty&&this.updateText(),e.prototype.renderWebGL.call(this,a)},d.prototype._renderCanvas=function(a){this.dirty&&this.updateText(),e.prototype._renderCanvas.call(this,a)},d.prototype.determineFontProperties=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o=d.fontPropertiesCache[a];if(!o){for(o={},b=d.fontPropertiesCanvas,c=d.fontPropertiesContext,c.font=a,e=Math.ceil(c.measureText("|MÉq").width),f=Math.ceil(c.measureText("M").width),g=2*f,f=1.4*f|0,b.width=e,b.height=g,c.fillStyle="#f00",c.fillRect(0,0,e,g),c.font=a,c.textBaseline="alphabetic",c.fillStyle="#000",c.fillText("|MÉq",0,f),h=c.getImageData(0,0,e,g).data,i=h.length,j=4*e,m=0,n=!1,k=0;f>k;k++){for(l=0;j>l;l+=4)if(255!==h[m+l]){n=!0;break}if(n)break;m+=j}for(o.ascent=f-k,m=i-j,n=!1,k=g;k>f;k--){for(l=0;j>l;l+=4)if(255!==h[m+l]){n=!0;break}if(n)break;m-=j}o.descent=k-f,o.fontSize=o.ascent+o.descent,d.fontPropertiesCache[a]=o}return o},d.prototype.wordWrap=function(a){var b,c,d,e,f,g,h="",i=a.split("\n"),j=this._style.wordWrapWidth;for(b=0;b<i.length;b++){for(c=j,d=i[b].split(" "),e=0;e<d.length;e++)f=this.context.measureText(d[e]).width,g=f+this.context.measureText(" ").width,0===e||g>c?(e>0&&(h+="\n"),h+=d[e],c=j-f):(c-=g,h+=" "+d[e]);b<i.length-1&&(h+="\n")}return h},d.prototype.getBounds=function(a){return this.dirty&&this.updateText(),e.prototype.getBounds.call(this,a)},d.prototype.destroy=function(a){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===a?!0:a)}},{225:225,236:236,270:270,275:275,280:280}],273:[function(a,b,c){function d(a,b,c){g.call(this),this.uid=e.uid(),this.resolution=c||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=b||f.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},a&&this.loadSource(a)}var e=a(280),f=a(225),g=a(3);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=e.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},d.prototype.loadSource=function(a){var b,c=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,c&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=a,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height?this._sourceLoaded():a.getContext||(this.isLoading=!0,b=this,a.onload=function(){a.onload=null,a.onerror=null,b.isLoading&&(b.isLoading=!1,b._sourceLoaded(),b.emit("loaded",b))},a.onerror=function(){a.onload=null,a.onerror=null,b.isLoading&&(b.isLoading=!1,b.emit("error",b))},a.complete&&a.src&&(this.isLoading=!1,a.onload=null,a.onerror=null,a.width&&a.height?(this._sourceLoaded(),c&&this.emit("loaded",this)):c&&this.emit("error",this)))},d.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},d.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},d.prototype.dispose=function(){this.emit("dispose",this)},d.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},d.fromImage=function(a,b,c){var f,g=e.BaseTextureCache[a];return void 0===b&&0!==a.indexOf("data:")&&(b=!0),g||(f=new Image,b&&(f.crossOrigin=""),g=new d(f,c),g.imageUrl=a,f.src=a,e.BaseTextureCache[a]=g,g.resolution=e.getResolutionOfUrl(a)),g},d.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+e.uid());var c=e.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),e.BaseTextureCache[a._pixiId]=c),c}},{225:225,280:280,3:3}],274:[function(a,b,c){function d(a,b,c,d,l){var m,n;if(!a)throw Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");b=b||100,c=c||100,l=l||k.RESOLUTION,m=new e,m.width=b,m.height=c,m.resolution=l,m.scaleMode=d||k.SCALE_MODES.DEFAULT,m.hasLoaded=!0,f.call(this,m,new j.Rectangle(0,0,b,c)),this.width=b,this.height=c,this.resolution=l,this.render=null,this.renderer=a,this.renderer.type===k.RENDERER_TYPE.WEBGL?(n=this.renderer.gl,this.textureBuffer=new g(n,this.width,this.height,m.scaleMode,this.resolution),this.baseTexture._glTextures[n.id]=this.textureBuffer.texture,this.filterManager=new h(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(b,c),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()):(this.render=this.renderCanvas,this.textureBuffer=new i(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas),this.valid=!0,this._updateUvs()}var e=a(273),f=a(275),g=a(268),h=a(257),i=a(248),j=a(236),k=a(225),l=new j.Matrix;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b,c){(a!==this.width||b!==this.height)&&(this.valid=a>0&&b>0,this.width=this._frame.width=this.crop.width=a,this.height=this._frame.height=this.crop.height=b,c&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},d.prototype.clear=function(){this.valid&&(this.renderer.type===k.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},d.prototype.renderWebGL=function(a,b,c,d){var e,f,g,h;if(this.valid){if(d=void 0!==d?d:!0,this.textureBuffer.transform=b,this.textureBuffer.activate(),a.worldAlpha=1,d)for(a.worldTransform.identity(),a.currentBounds=null,e=a.children,f=0,g=e.length;g>f;++f)e[f].updateTransform();h=this.renderer.filterManager,this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(a,this.textureBuffer,c),this.renderer.filterManager=h}},d.prototype.renderCanvas=function(a,b,c,d){var e,f,g,h,i,j,k;if(this.valid){for(d=!!d,e=l,e.identity(),b&&e.append(b),f=a.worldTransform,a.worldTransform=e,a.worldAlpha=1,g=a.children,h=0,i=g.length;i>h;++h)g[h].updateTransform();c&&this.textureBuffer.clear(),j=this.textureBuffer.context,k=this.renderer.resolution,this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(a,j),this.renderer.resolution=k,a.worldTransform===e&&(a.worldTransform=f)}},d.prototype.destroy=function(){f.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},d.prototype.getImage=function(){var a=new Image;return a.src=this.getBase64(),a},d.prototype.getBase64=function(){return this.getCanvas().toDataURL()},d.prototype.getCanvas=function(){var a,b,c,d,e,f;return this.renderer.type===k.RENDERER_TYPE.WEBGL?(a=this.renderer.gl,b=this.textureBuffer.size.width,c=this.textureBuffer.size.height,d=new Uint8Array(4*b*c),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),a.readPixels(0,0,b,c,a.RGBA,a.UNSIGNED_BYTE,d),a.bindFramebuffer(a.FRAMEBUFFER,null),e=new i(b,c),f=e.context.getImageData(0,0,b,c),f.data.set(d),e.context.putImageData(f,0,0),e.canvas):this.textureBuffer.canvas},d.prototype.getPixels=function(){var a,b,c,d;return this.renderer.type===k.RENDERER_TYPE.WEBGL?(c=this.renderer.gl,a=this.textureBuffer.size.width,b=this.textureBuffer.size.height,d=new Uint8Array(4*a*b),c.bindFramebuffer(c.FRAMEBUFFER,this.textureBuffer.frameBuffer),c.readPixels(0,0,a,b,c.RGBA,c.UNSIGNED_BYTE,d),c.bindFramebuffer(c.FRAMEBUFFER,null),d):(a=this.textureBuffer.canvas.width,b=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,a,b).data)},d.prototype.getPixel=function(a,b){var c,d;return this.renderer.type===k.RENDERER_TYPE.WEBGL?(c=this.renderer.gl,d=new Uint8Array(4),c.bindFramebuffer(c.FRAMEBUFFER,this.textureBuffer.frameBuffer),c.readPixels(a,b,1,1,c.RGBA,c.UNSIGNED_BYTE,d),c.bindFramebuffer(c.FRAMEBUFFER,null),d):this.textureBuffer.canvas.getContext("2d").getImageData(a,b,1,1).data}},{225:225,236:236,248:248,257:257,268:268,273:273,275:275}],275:[function(a,b,c){function d(a,b,c,e,f){if(h.call(this),this.noFrame=!1,b||(this.noFrame=!0,b=new i.Rectangle(0,0,1,1)),a instanceof d&&(a=a.baseTexture),this.baseTexture=a,this._frame=b,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=c||b,this._rotate=+(f||0),f===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";a.hasLoaded?(this.noFrame&&(b=new i.Rectangle(0,0,a.width,a.height),a.on("update",this.onBaseTextureUpdated,this)),this.frame=b):a.once("loaded",this.onBaseTextureLoaded,this)}var e=a(273),f=a(277),g=a(276),h=a(3),i=a(236),j=a(280);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{frame:{get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,this.width=a.width,this.height=a.height,!this.trim&&!this.rotate&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=a,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}}}),d.prototype.update=function(){this.baseTexture.update()},d.prototype.onBaseTextureLoaded=function(a){this.noFrame?this.frame=new i.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.emit("update",this)},d.prototype.onBaseTextureUpdated=function(a){this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},d.prototype.destroy=function(a){this.baseTexture&&(a&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},d.prototype.clone=function(){return new d(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},d.prototype._updateUvs=function(){this._uvs||(this._uvs=new g),this._uvs.set(this.crop,this.baseTexture,this.rotate)},d.fromImage=function(a,b,c){var f=j.TextureCache[a];return f||(f=new d(e.fromImage(a,b,c)),j.TextureCache[a]=f),f},d.fromFrame=function(a){var b=j.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return b},d.fromCanvas=function(a,b){return new d(e.fromCanvas(a,b))},d.fromVideo=function(a,b){return"string"==typeof a?d.fromVideoUrl(a,b):new d(f.fromVideo(a,b))},d.fromVideoUrl=function(a,b){return new d(f.fromUrl(a,b))},d.addTextureToCache=function(a,b){j.TextureCache[b]=a},d.removeTextureFromCache=function(a){var b=j.TextureCache[a];return delete j.TextureCache[a],delete j.BaseTextureCache[a],b},d.EMPTY=new d(new e)},{236:236,273:273,276:276,277:277,280:280,3:3}],276:[function(a,b,c){function d(){this.x0=0,this.y0=0,this.x1=1,
this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}b.exports=d;var e=a(233);d.prototype.set=function(a,b,c){var d,f,g,h,i,j=b.width,k=b.height;c?(d=e.isSwapWidthHeight(c),f=(d?a.height:a.width)/2/j,g=(d?a.width:a.height)/2/k,h=a.x/j+f,i=a.y/k+g,c=e.add(c,e.NW),this.x0=h+f*e.uX(c),this.y0=i+g*e.uY(c),c=e.add(c,2),this.x1=h+f*e.uX(c),this.y1=i+g*e.uY(c),c=e.add(c,2),this.x2=h+f*e.uX(c),this.y2=i+g*e.uY(c),c=e.add(c,2),this.x3=h+f*e.uX(c),this.y3=i+g*e.uY(c)):(this.x0=a.x/j,this.y0=a.y/k,this.x1=(a.x+a.width)/j,this.y1=a.y/k,this.x2=(a.x+a.width)/j,this.y2=(a.y+a.height)/k,this.x3=a.x/j,this.y3=(a.y+a.height)/k)}},{233:233}],277:[function(a,b,c){function d(a,b){if(!a)throw Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),f.call(this,a,b),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),a.complete||(a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this._onPlayStart.bind(this)),a.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function e(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}var f=a(273),g=a(280);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},d.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},d.prototype._onPlayStop=function(){this.autoUpdate=!1},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},d.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete g.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),f.prototype.destroy.call(this)},d.fromVideo=function(a,b){a._pixiId||(a._pixiId="video_"+g.uid());var c=g.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),g.BaseTextureCache[a._pixiId]=c),c},d.fromUrl=function(a,b){var c,f=document.createElement("video");if(Array.isArray(a))for(c=0;c<a.length;++c)f.appendChild(e(a[c].src||a[c],a[c].mime));else f.appendChild(e(a.src||a,a.mime));return f.load(),f.play(),d.fromVideo(f,b)},d.fromUrls=d.fromUrl},{273:273,280:280}],278:[function(a,b,c){function d(){var a=this;this._tick=function(b){a._requestId=null,a.started&&(a.update(b),a.started&&null===a._requestId&&a._emitter.listeners(g,!0)&&(a._requestId=requestAnimationFrame(a._tick)))},this._emitter=new f,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/e.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var e=a(225),f=a(3),g="tick";Object.defineProperties(d.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,e.TARGET_FPMS);this._maxElapsedMS=1/b}}}),d.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(g,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},d.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},d.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},d.prototype.add=function(a,b){return this._emitter.on(g,a,b),this._startIfPossible(),this},d.prototype.addOnce=function(a,b){return this._emitter.once(g,a,b),this._startIfPossible(),this},d.prototype.remove=function(a,b){return this._emitter.off(g,a,b),this._emitter.listeners(g,!0)||this._cancelIfNeeded(),this},d.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},d.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},d.prototype.update=function(a){var b;a=a||performance.now(),b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*e.TARGET_FPMS*this.speed,this._emitter.emit(g,this.deltaTime),this.lastTime=a},b.exports=d},{225:225,3:3}],279:[function(a,b,c){var d=a(278),e=new d;e.autoStart=!0,b.exports={shared:e,Ticker:d}},{278:278}],280:[function(a,b,c){var d=a(225),e=b.exports={_uid:0,_saidHello:!1,EventEmitter:a(3),pluginTarget:a(281),async:a(1),uid:function(){return++e._uid},hex2rgb:function(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b},hex2string:function(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},canUseNewCanvasBlendModes:function(){var a,b,c,d,e,f,g;return"undefined"==typeof document?!1:(a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",b="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image,c.src=a+"AP804Oa6"+b,d=new Image,d.src=a+"/wCKxvRF"+b,e=document.createElement("canvas"),e.width=6,e.height=1,f=e.getContext("2d"),f.globalCompositeOperation="multiply",f.drawImage(c,0,0),f.drawImage(d,2,0),g=f.getImageData(2,0,1,1).data,255===g[0]&&0===g[1]&&0===g[2])},getNextPowerOfTwo:function(a){if(a>0&&0===(a&a-1))return a;for(var b=1;a>b;)b<<=1;return b},isPowerOfTwo:function(a,b){return a>0&&0===(a&a-1)&&b>0&&0===(b&b-1)},getResolutionOfUrl:function(a){var b=d.RETINA_PREFIX.exec(a);return b?parseFloat(b[1]):1},sayHello:function(a){if(!e._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+d.VERSION+" - ✰ "+a+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+d.VERSION+" - "+a+" - http://www.pixijs.com/");e._saidHello=!0}},isWebGLSupported:function(){var a,b,c={stencil:!0};try{return window.WebGLRenderingContext?(a=document.createElement("canvas"),b=a.getContext("webgl",c)||a.getContext("experimental-webgl",c),!(!b||!b.getContextAttributes().stencil)):!1}catch(d){return!1}},sign:function(a){return a?0>a?-1:1:0},removeItems:function(a,b,c){var d,e,f=a.length;if(!(b>=f||0===c)){for(c=b+c>f?f-b:c,d=b,e=f-c;e>d;++d)a[d]=a[d+c];a.length=e}},TextureCache:{},BaseTextureCache:{}}},{1:1,225:225,281:281,3:3}],281:[function(a,b,c){function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}b.exports={mixin:function(a){d(a)}}},{}],282:[function(a,b,c){function d(a,b,c,f,g){e.Container.call(this),this._texture=null,this.uvs=c||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=b||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=f||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=e.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=g||d.DRAW_MODES.TRIANGLE_MESH,this.texture=a,this.shader=null}var e=a(232),f=new e.Point,g=new e.Polygon;d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),d.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.mesh),a.plugins.mesh.render(this)},d.prototype._renderCanvas=function(a){var b=a.context,c=this.worldTransform;a.roundPixels?b.setTransform(c.a,c.b,c.c,c.d,0|c.tx,0|c.ty):b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(b):this._renderCanvasTriangles(b)},d.prototype._renderCanvasTriangleMesh=function(a){var b,c,d=this.vertices,e=this.uvs,f=d.length/2;for(b=0;f-2>b;b++)c=2*b,this._renderCanvasDrawTriangle(a,d,e,c,c+2,c+4)},d.prototype._renderCanvasTriangles=function(a){var b,c,d,e,f=this.vertices,g=this.uvs,h=this.indices,i=h.length;for(b=0;i>b;b+=3)c=2*h[b],d=2*h[b+1],e=2*h[b+2],this._renderCanvasDrawTriangle(a,f,g,c,d,e)},d.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this._texture.baseTexture.source,v=this._texture.baseTexture.width,w=this._texture.baseTexture.height,x=b[d],y=b[e],z=b[f],A=b[d+1],B=b[e+1],C=b[f+1],D=c[d]*v,E=c[e]*v,F=c[f]*v,G=c[d+1]*w,H=c[e+1]*w,I=c[f+1]*w;this.canvasPadding>0&&(g=this.canvasPadding/this.worldTransform.a,h=this.canvasPadding/this.worldTransform.d,i=(x+y+z)/3,j=(A+B+C)/3,k=x-i,l=A-j,m=Math.sqrt(k*k+l*l),x=i+k/m*(m+g),A=j+l/m*(m+h),k=y-i,l=B-j,m=Math.sqrt(k*k+l*l),y=i+k/m*(m+g),B=j+l/m*(m+h),k=z-i,l=C-j,m=Math.sqrt(k*k+l*l),z=i+k/m*(m+g),C=j+l/m*(m+h)),a.save(),a.beginPath(),a.moveTo(x,A),a.lineTo(y,B),a.lineTo(z,C),a.closePath(),a.clip(),n=D*H+G*F+E*I-H*F-G*E-D*I,o=x*H+G*z+y*I-H*z-G*y-x*I,p=D*y+x*F+E*z-y*F-x*E-D*z,q=D*H*z+G*y*F+x*E*I-x*H*F-G*E*z-D*y*I,r=A*H+G*C+B*I-H*C-G*B-A*I,s=D*B+A*F+E*C-B*F-A*E-D*C,t=D*H*C+G*B*F+A*E*I-A*H*F-G*E*C-D*B*I,a.transform(o/n,r/n,p/n,s/n,q/n,t/n),a.drawImage(u,0,0),a.restore()},d.prototype.renderMeshFlat=function(a){var b,c,d,e,f,g,h,i,j=this.context,k=a.vertices,l=k.length/2;for(j.beginPath(),b=1;l-2>b;b++)c=2*b,d=k[c],e=k[c+2],f=k[c+4],g=k[c+1],h=k[c+3],i=k[c+5],j.moveTo(d,g),j.lineTo(e,h),j.lineTo(f,i);j.fillStyle="#FF0000",j.fill(),j.closePath()},d.prototype._onTextureUpdate=function(){this.updateFrame=!0},d.prototype.getBounds=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(!this._currentBounds){for(b=a||this.worldTransform,c=b.a,d=b.b,f=b.c,g=b.d,h=b.tx,i=b.ty,j=-(1/0),k=-(1/0),l=1/0,m=1/0,n=this.vertices,o=0,p=n.length;p>o;o+=2)q=n[o],r=n[o+1],s=c*q+f*r+h,t=g*r+d*q+i,l=l>s?s:l,m=m>t?t:m,j=s>j?s:j,k=t>k?t:k;if(l===-(1/0)||k===1/0)return e.Rectangle.EMPTY;u=this._bounds,u.x=l,u.width=j-l,u.y=m,u.height=k-m,this._currentBounds=u}return this._currentBounds},d.prototype.containsPoint=function(a){var b,c,e,h,i,j,k,l;if(!this.getBounds().contains(a.x,a.y))return!1;if(this.worldTransform.applyInverse(a,f),b=this.vertices,c=g.points,this.drawMode===d.DRAW_MODES.TRIANGLES){for(i=this.indices,h=this.indices.length,e=0;h>e;e+=3)if(j=2*i[e],k=2*i[e+1],l=2*i[e+2],c[0]=b[j],c[1]=b[j+1],c[2]=b[k],c[3]=b[k+1],c[4]=b[l],c[5]=b[l+1],g.contains(f.x,f.y))return!0}else for(h=b.length,e=0;h>e;e+=6)if(c[0]=b[e],c[1]=b[e+1],c[2]=b[e+2],c[3]=b[e+3],c[4]=b[e+4],c[5]=b[e+5],g.contains(f.x,f.y))return!0;return!1},d.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{232:232}],283:[function(a,b,c){function d(a,b,c){e.call(this,a),this._ready=!0,this.segmentsX=b||10,this.segmentsY=c||10,this.drawMode=e.DRAW_MODES.TRIANGLES,this.refresh()}var e=a(282);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a,b,c,d,e,f,g,h,i,j=this.segmentsX*this.segmentsY,k=[],l=[],m=[],n=[],o=this.texture,p=this.segmentsX-1,q=this.segmentsY-1,r=0,s=o.width/p,t=o.height/q;for(r=0;j>r;r++)a=r%this.segmentsX,b=r/this.segmentsX|0,k.push(a*s,b*t),m.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(a/(this.segmentsX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(b/(this.segmentsY-1)));for(c=p*q,r=0;c>r;r++)d=r%p,e=r/p|0,f=e*this.segmentsX+d,g=e*this.segmentsX+d+1,h=(e+1)*this.segmentsX+d,i=(e+1)*this.segmentsX+d+1,n.push(f,g,h),n.push(g,i,h);this.vertices=new Float32Array(k),this.uvs=new Float32Array(m),this.colors=new Float32Array(l),this.indices=new Uint16Array(n)},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{282:282}],284:[function(a,b,c){function d(a,b){e.call(this,a),this.points=b,this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length),this._ready=!0,this.refresh()}var e=a(282),f=a(232);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a,b,c,d,e,g,h,i,j,k,l,m=this.points;if(!(m.length<1)&&this._texture._uvs){for(a=this.uvs,b=this.indices,c=this.colors,d=this._texture._uvs,e=new f.Point(d.x0,d.y0),g=new f.Point(d.x2-d.x0,d.y2-d.y0),a[0]=0+e.x,a[1]=0+e.y,a[2]=0+e.x,a[3]=1*g.y+e.y,c[0]=1,c[1]=1,b[0]=0,b[1]=1,h=m.length,l=1;h>l;l++)i=m[l],j=4*l,k=l/(h-1),a[j]=k*g.x+e.x,a[j+1]=0+e.y,a[j+2]=k*g.x+e.x,a[j+3]=1*g.y+e.y,j=2*l,c[j]=1,c[j+1]=1,j=2*l,b[j]=j,b[j+1]=j+1;this.dirty=!0}},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},d.prototype.updateTransform=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this.points;if(!(m.length<1)){for(a=m[0],c=0,d=0,e=this.vertices,f=m.length,l=0;f>l;l++)g=m[l],h=4*l,b=l<m.length-1?m[l+1]:g,d=-(b.x-a.x),c=b.y-a.y,i=10*(1-l/(f-1)),i>1&&(i=1),j=Math.sqrt(c*c+d*d),k=this._texture.height/2,c/=j,d/=j,c*=k,d*=k,e[h]=g.x+c,e[h+1]=g.y+d,e[h+2]=g.x-c,e[h+3]=g.y-d,a=g;this.containerUpdateTransform()}}},{232:232,282:282}],285:[function(a,b,c){b.exports={Mesh:a(282),Plane:a(283),Rope:a(284),MeshRenderer:a(286),MeshShader:a(287)}},{282:282,283:283,284:284,286:286,287:287}],286:[function(a,b,c){function d(a){e.ObjectRenderer.call(this,a),this.indices=new Uint16Array(15e3);for(var b=0,c=0;15e3>b;b+=6,c+=4)this.indices[b+0]=c+0,this.indices[b+1]=c+1,this.indices[b+2]=c+2,this.indices[b+3]=c+0,this.indices[b+4]=c+2,this.indices[b+5]=c+3;this.currentShader=null}var e=a(232),f=a(282);d.prototype=Object.create(e.ObjectRenderer.prototype),d.prototype.constructor=d,b.exports=d,e.WebGLRenderer.registerPlugin("mesh",d),d.prototype.onContextChange=function(){},d.prototype.render=function(a){var b,c,d,e,g;a._vertexBuffer||this._initWebGL(a),b=this.renderer,c=b.gl,d=a._texture.baseTexture,e=a.shader,g=a.drawMode===f.DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES,b.blendModeManager.setBlendMode(a.blendMode),e=e?e.shaders[c.id]||e.getShader(b):b.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(e),e.uniforms.translationMatrix.value=a.worldTransform.toArray(!0),e.uniforms.projectionMatrix.value=b.currentRenderTarget.projectionMatrix.toArray(!0),e.uniforms.alpha.value=a.worldAlpha,e.syncUniforms(),a.dirty?(a.dirty=!1,c.bindBuffer(c.ARRAY_BUFFER,a._vertexBuffer),c.bufferData(c.ARRAY_BUFFER,a.vertices,c.STATIC_DRAW),c.vertexAttribPointer(e.attributes.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.bufferData(c.ARRAY_BUFFER,a.uvs,c.STATIC_DRAW),c.vertexAttribPointer(e.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),d._glTextures[c.id]?c.bindTexture(c.TEXTURE_2D,d._glTextures[c.id]):this.renderer.updateTexture(d),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a._indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.indices,c.STATIC_DRAW)):(c.bindBuffer(c.ARRAY_BUFFER,a._vertexBuffer),c.bufferSubData(c.ARRAY_BUFFER,0,a.vertices),c.vertexAttribPointer(e.attributes.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.vertexAttribPointer(e.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),d._glTextures[c.id]?c.bindTexture(c.TEXTURE_2D,d._glTextures[c.id]):this.renderer.updateTexture(d),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a._indexBuffer),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.indices)),c.drawElements(g,a.indices.length,c.UNSIGNED_SHORT,0)},d.prototype._initWebGL=function(a){var b=this.renderer.gl;a._vertexBuffer=b.createBuffer(),a._indexBuffer=b.createBuffer(),a._uvBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,a.vertices,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,a._uvBuffer),b.bufferData(b.ARRAY_BUFFER,a.uvs,b.STATIC_DRAW),a.colors&&(a._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a._colorBuffer),b.bufferData(b.ARRAY_BUFFER,a.colors,b.STATIC_DRAW)),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.indices,b.STATIC_DRAW)},d.prototype.flush=function(){},d.prototype.start=function(){this.currentShader=null},d.prototype.destroy=function(){e.ObjectRenderer.prototype.destroy.call(this)}},{232:232,282:282}],287:[function(a,b,c){function d(a){e.Shader.call(this,a,"precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}","precision lowp float;\nvarying vec2 vTextureCoord;\nuniform float alpha;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;\n}",{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var e=a(232);d.prototype=Object.create(e.Shader.prototype),d.prototype.constructor=d,b.exports=d,e.ShaderManager.registerPlugin("meshShader",d)},{232:232}],engine:[function(a,b,c){var d=a(116),e=a(76),f=a(80),g=a(74),h=a(77),i=a(86),j=a(84),k=a(83),l=a(85),m=a(87),n=a(136),o=a(135),p=a(71),q=a(72),r=a(73),s=a(69),t=a(134),u=a(102),v=a(101),w=a(103),x=a(99),y=a(100),z=a(108),A=a(128),B=a(119),C=a(120),D=a(123),E=a(122),F=a(124),G=a(118);a(111),b.exports=Object.assign(a(66),{Device:d,Game:e,State:f,Batch:g,Group:h,Sprite:i,Particle:j,Graphics:k,RetroFont:l,Strip:m,Point:u,Line:v,Rectangle:w,Circle:x,Ellipse:y,Keyboard:p,Mouse:q,Pointer:r,InputHandler:s,Emitter:z,Easing:A,Tilemap:B,TilemapLayer:C,TilemapSprite:D,TilemapPathing:E,Tileset:F,Tile:G,Math:n,Class:t,Color:o})},{100:100,101:101,102:102,103:103,108:108,111:111,116:116,118:118,119:119,120:120,122:122,123:123,124:124,128:128,134:134,135:135,136:136,66:66,69:69,71:71,72:72,73:73,74:74,76:76,77:77,80:80,83:83,84:84,85:85,86:86,87:87,99:99}],pixi:[function(a,b,c){a(172);var d=b.exports=a(232);d.mesh=a(285)},{172:172,232:232,285:285}],socket:[function(a,b,c){function d(a,b){var c,d,g,j,k,l,m;return"object"==typeof a&&(b=a,a=void 0),b=b||{},c=f(a),d=c.source,g=c.id,j=c.path,k=e[g]&&j in e[g].nsps,l=b.forceNew||b["force new connection"]||!1===b.multiplex||k,l?(i("ignoring socket cache for %s",d),m=h(d,b)):(e[g]||(i("new io instance for %s",d),e[g]=h(d,b)),m=e[g]),m.socket(c.path)}var e,f=a(15),g=a(48),h=a(12),i=a(7)("socket.io-client");b.exports=c=d,e=c.managers={},c.protocol=g.protocol,c.connect=d,c.Manager=a(12),c.Socket=a(14)},{12:12,14:14,15:15,48:48,7:7}],xhr:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a.length;c++)b(a[c])}function e(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a,b,c){var d=a;return l(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=n(b,{uri:a}),d.callback=c,d}function g(a,b,c){return b=f(a,b,c),h(b)}function h(a){function b(){4===i.readyState&&f()}function c(){var a=void 0;if(i.response?a=i.response:"text"!==i.responseType&&i.responseType||(a=i.responseText||i.responseXML),s)try{a=JSON.parse(a)}catch(b){}return a}function d(a){clearTimeout(t),a instanceof Error||(a=Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,u(a,h)}function f(){var b,d,e;l||(clearTimeout(t),b=a.useXDR&&void 0===i.status?200:1223===i.status?204:i.status,d=h,e=null,0!==b?(d={body:c(),statusCode:b,method:o,headers:{},url:n,rawRequest:i},i.getAllResponseHeaders&&(d.headers=m(i.getAllResponseHeaders()))):e=Error("Internal XMLHttpRequest Error"),u(e,d,d.body))}var h,i,j,l,n,o,p,q,r,s,t,u=a.callback;if(void 0===u)throw Error("callback argument missing");if(u=k(u),h={body:void 0,headers:{},statusCode:0,method:o,url:n,rawRequest:i},i=a.xhr||null,i||(i=a.cors||a.useXDR?new g.XDomainRequest:new g.XMLHttpRequest),n=i.url=a.uri||a.url,o=i.method=a.method||"GET",p=a.body||a.data||null,q=i.headers=a.headers||{},r=!!a.sync,s=!1,"json"in a&&(s=!0,q.accept||q.Accept||(q.Accept="application/json"),"GET"!==o&&"HEAD"!==o&&(q["content-type"]||q["Content-Type"]||(q["Content-Type"]="application/json"),p=JSON.stringify(a.json))),i.onreadystatechange=b,i.onload=f,i.onerror=d,i.onprogress=function(){},i.ontimeout=d,i.open(o,n,!r,a.username,a.password),r||(i.withCredentials=!!a.withCredentials),!r&&a.timeout>0&&(t=setTimeout(function(){l=!0,i.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)},a.timeout)),i.setRequestHeader)for(j in q)q.hasOwnProperty(j)&&i.setRequestHeader(j,q[j]);else if(a.headers&&!e(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(i.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(i),i.send(p),i}function i(){}var j=a(53),k=a(55),l=a(54),m=a(58),n=a(59);b.exports=g,g.XMLHttpRequest=j.XMLHttpRequest||i,g.XDomainRequest="withCredentials"in new g.XMLHttpRequest?g.XMLHttpRequest:j.XDomainRequest,d(["get","put","post","patch","head","delete"],function(a){g["delete"===a?"del":a]=function(b,c,d){return c=f(b,c,d),c.method=a.toUpperCase(),h(c)}})},{53:53,54:54,55:55,58:58,59:59}]},{},[145]);